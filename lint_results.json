
> temp-gfs-app@0.1.0 lint
> eslint --format json

[{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/next-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/app/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/app/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showPersistentPanels' is assigned a value but never used.","line":105,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":105,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { UserInput, SimulationResult, Phase } from \"@/types\";\nimport { generateSimulation } from \"@/lib/simulation\";\nimport Agenda from \"@/components/Agenda\";\nimport Phase1Hearing from \"@/components/Phase1Hearing\";\nimport Phase2CompanyIntro from \"@/components/Phase2CompanyIntro\";\nimport Phase3Simulation from \"@/components/Phase3Simulation\";\nimport Phase4Solution from \"@/components/Phase4Solution\";\nimport Phase5Closing from \"@/components/Phase5Closing\";\nimport Phase1ThreeSteps from \"@/components/Phase1ThreeSteps\";\nimport SupportPanel from \"@/components/SupportPanel\";\nimport HearingMemo from \"@/components/HearingMemo\";\nimport { Sparkles } from \"lucide-react\";\nimport Image from \"next/image\";\n\nexport default function Home() {\n  // フェーズ順序: agenda -> company -> hearing -> simulation -> solution -> closing\n  const [phase, setPhase] = useState<Phase>(\"agenda\");\n  const [userData, setUserData] = useState<UserInput | null>(null);\n  const [simulationResult, setSimulationResult] = useState<SimulationResult | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSupportOpen, setIsSupportOpen] = useState(false);\n  const [isHearingMemoOpen, setIsHearingMemoOpen] = useState(false);\n  const [sideMemoText, setSideMemoText] = useState(\"\");\n\n  // フェーズが切り替わったときにトップにスクロール\n  useEffect(() => {\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  }, [phase]);\n\n  const handleAgendaStart = () => {\n    setPhase(\"company\"); // 会社紹介から開始\n  };\n\n  const handleCompanyNext = () => {\n    setPhase(\"threeSteps\"); // 資産形成の3ステップへ\n  };\n\n  const handleThreeStepsNext = () => {\n    setPhase(\"hearing\"); // 次にヒアリング\n  };\n\n  const handleHearingComplete = async (data: UserInput) => {\n    setUserData(data);\n    setIsLoading(true);\n\n    // シミュレーション計算（擬似遅延付き）\n    await new Promise(resolve => setTimeout(resolve, 2500));\n    const result = generateSimulation(data);\n    setSimulationResult(result);\n\n    setIsLoading(false);\n    setPhase(\"simulation\");\n  };\n\n  const goToPhase = (targetPhase: Phase) => {\n    setPhase(targetPhase);\n  };\n\n  // ローディング画面\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-white relative overflow-hidden\">\n        {/* 背景マスコット */}\n        <div className=\"absolute inset-0 pointer-events-none\">\n          <Image\n            src=\"/mascot/mascot_search.png\"\n            alt=\"\"\n            width={200}\n            height={200}\n            className=\"absolute top-10 left-10 opacity-20 animate-float-slow\"\n          />\n          <Image\n            src=\"/mascot/mascot_phone.png\"\n            alt=\"\"\n            width={180}\n            height={180}\n            className=\"absolute bottom-10 right-10 opacity-20 animate-float-delayed\"\n          />\n        </div>\n\n        <div className=\"text-center space-y-8 animate-fade-in relative z-10\">\n          <div className=\"relative\">\n            <div className=\"w-32 h-32 rounded-full border-4 border-blue-200 border-t-primary animate-spin mx-auto\" />\n            <div className=\"absolute inset-0 flex items-center justify-center\">\n              <Sparkles className=\"w-12 h-12 text-primary animate-pulse\" />\n            </div>\n          </div>\n          <div className=\"space-y-3\">\n            <h2 className=\"text-3xl font-bold text-gray-800\">分析中...</h2>\n          </div>\n          <div className=\"flex gap-2 justify-center\">\n            {[0, 1, 2, 3, 4].map(i => (\n              <div key={i} className=\"w-3 h-3 bg-primary rounded-full animate-bounce\" style={{ animationDelay: `${i * 0.1}s` }} />\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // 以降のフェーズは共通のサイドパネルを持つ\n  const showPersistentPanels = [\"simulation\", \"solution\", \"closing\"].includes(phase);\n\n  return (\n    <>\n      {phase === \"agenda\" && (\n        <Agenda onStart={handleAgendaStart} onGoToPhase={goToPhase} userData={userData} />\n      )}\n\n      {phase === \"company\" && (\n        <Phase2CompanyIntro\n          userData={userData}\n          onNext={handleCompanyNext}\n          onBack={() => goToPhase(\"agenda\")}\n          onGoToAgenda={() => goToPhase(\"agenda\")}\n        />\n      )}\n\n      {phase === \"threeSteps\" && (\n        <Phase1ThreeSteps\n          onNext={handleThreeStepsNext}\n          onBack={() => goToPhase(\"company\")}\n          onGoToAgenda={() => goToPhase(\"agenda\")}\n        />\n      )}\n\n      {phase === \"hearing\" && (\n        <Phase1Hearing\n          onSubmit={handleHearingComplete}\n          onBack={() => goToPhase(\"threeSteps\")}\n          onGoToAgenda={() => goToPhase(\"agenda\")}\n        />\n      )}\n\n      {/* Persistent Panels */}\n      {userData && (\n        <SupportPanel\n          userData={userData}\n          isOpen={isSupportOpen}\n          onToggle={() => setIsSupportOpen(!isSupportOpen)}\n        />\n      )}\n\n      <HearingMemo\n        userData={userData}\n        simulationResult={simulationResult}\n        isOpen={isHearingMemoOpen}\n        onToggle={() => setIsHearingMemoOpen(!isHearingMemoOpen)}\n        memoText={sideMemoText}\n        onMemoChange={setSideMemoText}\n        isHearingComplete={[\"simulation\", \"solution\", \"closing\"].includes(phase)}\n      />\n\n      {phase === \"simulation\" && userData && simulationResult && (\n        <Phase3Simulation\n          userData={userData}\n          simulationResult={simulationResult}\n          onNext={() => goToPhase(\"solution\")}\n          onBack={() => goToPhase(\"hearing\")}\n          onGoToAgenda={() => goToPhase(\"agenda\")}\n        />\n      )}\n\n      {phase === \"solution\" && userData && simulationResult && (\n        <Phase4Solution\n          userData={userData}\n          simulationResult={simulationResult}\n          onNext={() => goToPhase(\"closing\")}\n          onBack={() => goToPhase(\"simulation\")}\n          onGoToAgenda={() => goToPhase(\"agenda\")}\n        />\n      )}\n\n      {phase === \"closing\" && userData && simulationResult && (\n        <Phase5Closing\n          userData={userData}\n          simulationResult={simulationResult}\n          onBack={() => goToPhase(\"solution\")}\n          onGoToAgenda={() => goToPhase(\"agenda\")}\n        />\n      )}\n    </>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/components/Agenda.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageCircle' is defined but never used.","line":5,"column":55,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":68,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"MessageCircle"},"fix":{"range":[161,176],"text":""},"desc":"Remove unused variable \"MessageCircle\"."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/components/Agenda.tsx:20:9\n  18 |\n  19 |     useEffect(() => {\n> 20 |         setIsVisible(true);\n     |         ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  21 |     }, []);\n  22 |\n  23 |     const sections = [","line":20,"column":9,"nodeType":null,"endLine":20,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Button } from \"@/components/ui/Button\";\nimport { ArrowRight, Building2, BarChart3, Lightbulb, MessageCircle, FileText, ChevronRight } from \"lucide-react\";\nimport Image from \"next/image\";\n\nimport { UserInput, Phase } from \"@/types\";\n\ninterface AgendaProps {\n    onStart: () => void;\n    onGoToPhase: (phase: Phase) => void;\n    userData: UserInput | null;\n}\n\nexport default function Agenda({ onStart, onGoToPhase, userData }: AgendaProps) {\n    const [isVisible, setIsVisible] = useState(false);\n\n    useEffect(() => {\n        setIsVisible(true);\n    }, []);\n\n    const sections = [\n        {\n            id: \"01\",\n            title: \"簡単に弊社のご紹介\",\n            subtitle: \"GFSについて\",\n            time: \"約7分\",\n            icon: Building2,\n            color: \"from-blue-500 to-cyan-500\",\n            phase: \"company\" as Phase,\n        },\n        {\n            id: \"02\",\n            title: userData ? `${userData.name}様の未来予想図` : \"あなたの目標を教えてください\",\n            subtitle: \"理想のゴールを一緒に描きましょう\",\n            time: \"約11分\",\n            icon: FileText,\n            color: \"from-emerald-500 to-teal-500\",\n            phase: \"threeSteps\" as Phase,\n        },\n        {\n            id: \"03\",\n            title: userData ? `${userData.name}様に合う投資` : \"あなたに\\\"合う投資\\\"とは？\",\n            subtitle: \"自分にピッタリな投資手段を考えよう\",\n            time: \"約14分\",\n            icon: BarChart3,\n            color: \"from-purple-500 to-pink-500\",\n            phase: \"solution\" as Phase,\n        },\n        {\n            id: \"04\",\n            title: \"投資の学びとは？GFSを使って一緒に見ていこう！\",\n            subtitle: \"投資をできるようになろう！\",\n            time: \"約18分\",\n            icon: Lightbulb,\n            color: \"from-amber-500 to-orange-500\",\n            phase: \"closing\" as Phase,\n        },\n    ];\n\n    return (\n        <div className=\"min-h-screen relative overflow-hidden bg-gradient-to-br from-slate-50 via-blue-50 to-white\">\n            {/* 背景のマスコット画像（薄く配置） */}\n            <div className=\"absolute inset-0 pointer-events-none\">\n                <Image\n                    src=\"/mascot/mascot_cheer_blue.png\"\n                    alt=\"\"\n                    width={180}\n                    height={180}\n                    className=\"absolute top-10 -left-10 opacity-15 animate-float-slow\"\n                />\n                <Image\n                    src=\"/mascot/mascot_happy.png\"\n                    alt=\"\"\n                    width={160}\n                    height={160}\n                    className=\"absolute top-1/3 -right-10 opacity-15 animate-float-delayed\"\n                />\n                <Image\n                    src=\"/mascot/mascot_search.png\"\n                    alt=\"\"\n                    width={140}\n                    height={140}\n                    className=\"absolute bottom-20 left-10 opacity-15 animate-bounce-gentle\"\n                />\n                <Image\n                    src=\"/mascot/mascot_phone.png\"\n                    alt=\"\"\n                    width={150}\n                    height={150}\n                    className=\"absolute -bottom-10 right-1/4 opacity-15 animate-float-slow\"\n                />\n            </div>\n\n            {/* 装飾的な背景要素 */}\n            <div className=\"absolute top-0 left-0 w-96 h-96 bg-blue-200 rounded-full blur-3xl opacity-20\" />\n            <div className=\"absolute bottom-0 right-0 w-80 h-80 bg-amber-200 rounded-full blur-3xl opacity-20\" />\n\n            {/* メインコンテンツ */}\n            <div className=\"relative z-10 min-h-screen flex flex-col items-center justify-center p-4 md:p-8\">\n                {/* タイトル */}\n                <div\n                    className={`text-center mb-10 transition-all duration-1000 ${isVisible ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"\n                        }`}\n                >\n                    <div className=\"inline-flex items-center gap-3 mb-4\">\n                        <div className=\"w-14 h-14 rounded-2xl bg-gradient-to-br from-primary to-blue-600 flex items-center justify-center shadow-lg\">\n                            <FileText className=\"w-7 h-7 text-white\" />\n                        </div>\n                        <h1 className=\"text-4xl md:text-5xl font-black text-gray-800 tracking-tight\">\n                            本日の流れ\n                        </h1>\n                    </div>\n                </div>\n\n                <div className=\"w-full max-w-2xl space-y-4 mb-12\">\n                    {sections.map((section, index) => {\n                        const isSection02Branch = section.id === \"02\" && userData;\n\n                        if (isSection02Branch) {\n                            return (\n                                <div\n                                    key={section.id}\n                                    className={`bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden\n                                        ${isVisible ? \"opacity-100 translate-x-0\" : \"opacity-0 -translate-x-10\"}\n                                    `}\n                                    style={{ transitionDelay: `${index * 100}ms` }}\n                                >\n                                    {/* ヘッダー部分 */}\n                                    <div className=\"flex items-center p-5 pb-4 border-b border-gray-50\">\n                                        <div className={`w-14 h-14 rounded-xl bg-gradient-to-br ${section.color} flex items-center justify-center shrink-0 shadow-md`}>\n                                            <section.icon className=\"w-7 h-7 text-white\" />\n                                        </div>\n                                        <div className=\"flex-1 ml-5\">\n                                            <div className=\"flex items-center gap-2 mb-1\">\n                                                <span className=\"text-xs font-bold text-gray-400\">Section {section.id}</span>\n                                                <span className=\"text-xs text-gray-300\">|</span>\n                                                <span className=\"text-xs text-gray-400\">{section.time}</span>\n                                            </div>\n                                            <h3 className=\"text-lg font-bold text-gray-800\">\n                                                {section.title}\n                                            </h3>\n                                        </div>\n                                    </div>\n\n                                    {/* 分岐選択エリア */}\n                                    <div className=\"flex divide-x divide-gray-100 bg-slate-50/30\">\n                                        <button\n                                            onClick={() => onGoToPhase(\"hearing\")}\n                                            className=\"flex-1 p-6 hover:bg-white transition-all text-center group/btn relative\"\n                                        >\n                                            <div className=\"absolute top-0 left-0 w-full h-1 bg-slate-200 opacity-0 group-hover/btn:opacity-100 transition-opacity\" />\n                                            <p className=\"text-[10px] font-black text-slate-400 mb-1 tracking-widest uppercase\">Redefine Goal</p>\n                                            <p className=\"text-base font-black text-slate-800 group-hover/btn:text-primary transition-colors\">\n                                                もう一度目標を教えてください\n                                            </p>\n                                        </button>\n                                        <button\n                                            onClick={() => onGoToPhase(\"simulation\")}\n                                            className=\"flex-1 p-6 hover:bg-white transition-all text-center group/btn relative\"\n                                        >\n                                            <div className=\"absolute top-0 left-0 w-full h-1 bg-blue-500 opacity-0 group-hover/btn:opacity-100 transition-opacity\" />\n                                            <p className=\"text-[10px] font-black text-blue-500 mb-1 tracking-widest uppercase\">Quick View</p>\n                                            <p className=\"text-base font-black text-slate-800 group-hover/btn:text-blue-600 transition-colors\">\n                                                シミュレーション結果を見る\n                                            </p>\n                                        </button>\n                                    </div>\n                                </div>\n                            );\n                        }\n\n                        return (\n                            <div\n                                key={section.id}\n                                className={`group bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-500 cursor-pointer border border-gray-100 overflow-hidden\n                                    ${isVisible ? \"opacity-100 translate-x-0\" : \"opacity-0 -translate-x-10\"}\n                                `}\n                                style={{ transitionDelay: `${index * 100}ms` }}\n                                onClick={() => onGoToPhase(section.phase)}\n                            >\n                                <div className=\"flex items-center p-5\">\n                                    {/* 番号とアイコン */}\n                                    <div className={`w-14 h-14 rounded-xl bg-gradient-to-br ${section.color} flex items-center justify-center shrink-0 shadow-md group-hover:scale-110 transition-transform`}>\n                                        <section.icon className=\"w-7 h-7 text-white\" />\n                                    </div>\n\n                                    {/* テキスト */}\n                                    <div className=\"flex-1 ml-5\">\n                                        <div className=\"flex items-center gap-2 mb-1\">\n                                            <span className=\"text-xs font-bold text-gray-400\">Section {section.id}</span>\n                                            <span className=\"text-xs text-gray-300\">|</span>\n                                            <span className=\"text-xs text-gray-400\">{section.time}</span>\n                                        </div>\n                                        <h3 className=\"text-lg font-bold text-gray-800 group-hover:text-primary transition-colors\">\n                                            {section.title}\n                                        </h3>\n                                        <p className=\"text-sm text-gray-500\">{section.subtitle}</p>\n                                    </div>\n\n                                    {/* 矢印 */}\n                                    <ChevronRight className=\"w-6 h-6 text-gray-300 group-hover:text-primary group-hover:translate-x-1 transition-all\" />\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n\n                {/* 開始ボタン */}\n                <div\n                    className={`transition-all duration-1000 delay-700 ${isVisible ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"\n                        }`}\n                >\n                    <Button\n                        onClick={onStart}\n                        size=\"lg\"\n                        className=\"min-w-64 text-lg h-16 shadow-2xl hover:scale-105 transition-transform bg-gradient-to-r from-primary to-blue-600 hover:from-blue-600 hover:to-blue-700\"\n                    >\n                        GFSへようこそ！\n                        <ArrowRight className=\"w-6 h-6\" />\n                    </Button>\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/components/HearingMemo.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Save' is defined but never used.","line":4,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":55,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Save"},"fix":{"range":[108,114],"text":""},"desc":"Remove unused variable \"Save\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Check' is defined but never used.","line":4,"column":57,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":62,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Check"},"fix":{"range":[114,121],"text":""},"desc":"Remove unused variable \"Check\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Sparkles' is defined but never used.","line":4,"column":64,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":72,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Sparkles"},"fix":{"range":[121,131],"text":""},"desc":"Remove unused variable \"Sparkles\"."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/components/HearingMemo.tsx:32:13\n  30 |     useEffect(() => {\n  31 |         if (!isHearingComplete) {\n> 32 |             setActiveTab(\"memo\");\n     |             ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  33 |         }\n  34 |     }, [isHearingComplete]);\n  35 |","line":32,"column":13,"nodeType":null,"endLine":32,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { User, Target, Wallet, FileText, PenLine, Save, Check, Sparkles } from \"lucide-react\";\nimport { UserInput, SimulationResult } from \"@/types\";\nimport { formatPercent } from \"@/lib/simulation\";\n\ninterface HearingMemoProps {\n    userData: UserInput | null;\n    simulationResult: SimulationResult | null;\n    isOpen: boolean;\n    onToggle: () => void;\n    memoText: string;\n    onMemoChange: (text: string) => void;\n    isHearingComplete: boolean;\n}\n\nexport default function HearingMemo({\n    userData,\n    simulationResult,\n    isOpen,\n    onToggle,\n    memoText,\n    onMemoChange,\n    isHearingComplete\n}: HearingMemoProps) {\n    const [activeTab, setActiveTab] = useState<\"summary\" | \"memo\">(\"memo\");\n\n    // Force memo tab if hearing is not complete\n    useEffect(() => {\n        if (!isHearingComplete) {\n            setActiveTab(\"memo\");\n        }\n    }, [isHearingComplete]);\n\n    return (\n        <div\n            className={`fixed top-1/2 -translate-y-1/2 right-0 z-50 transition-all duration-500 transform ${isOpen ? \"translate-x-0\" : \"translate-x-[calc(100%-40px)]\"}`}\n        >\n            <div className=\"flex items-stretch shadow-2xl h-[70vh]\">\n                {/* 開閉ボタン（縦の帯） */}\n                <button\n                    onClick={onToggle}\n                    className={`w-10 bg-slate-900 text-white flex flex-col items-center justify-center gap-4 py-8 rounded-l-2xl hover:bg-slate-800 transition-colors cursor-pointer group`}\n                >\n                    <FileText className={`w-5 h-5 transition-transform duration-500 ${isOpen ? \"rotate-0 scale-110\" : \"rotate-0\"}`} />\n                    <span className=\"[writing-mode:vertical-rl] font-black text-[10px] tracking-[0.3em] uppercase opacity-70 group-hover:opacity-100\">\n                        {isOpen ? \"Close Panel\" : \"Side Memo\"}\n                    </span>\n                </button>\n\n                {/* メモ内容 */}\n                <div className=\"w-80 bg-white/95 backdrop-blur-xl border-l border-slate-200 flex flex-col overflow-hidden\">\n                    {/* Tabs Header */}\n                    <div className=\"p-4 border-b border-slate-100 bg-slate-50/50 flex gap-2\">\n                        {isHearingComplete && (\n                            <button\n                                onClick={() => setActiveTab(\"summary\")}\n                                className={`flex-1 flex items-center justify-center gap-2 py-2 rounded-xl text-[10px] font-black tracking-wider transition-all ${activeTab === \"summary\" ? \"bg-slate-900 text-white shadow-lg\" : \"text-slate-400 hover:bg-slate-200\"}`}\n                            >\n                                <FileText className=\"w-3.5 h-3.5\" />\n                                SUMMARY\n                            </button>\n                        )}\n                        <button\n                            onClick={() => setActiveTab(\"memo\")}\n                            className={`flex-1 flex items-center justify-center gap-2 py-2 rounded-xl text-[10px] font-black tracking-wider transition-all ${activeTab === \"memo\" ? \"bg-blue-600 text-white shadow-lg shadow-blue-200\" : \"text-slate-400 hover:bg-slate-200\"}`}\n                        >\n                            <PenLine className=\"w-3.5 h-3.5\" />\n                            PRIVATE MEMO\n                        </button>\n                    </div>\n\n                    <div className=\"flex-1 overflow-y-auto p-6 custom-scrollbar\">\n                        {activeTab === \"summary\" && isHearingComplete && userData ? (\n                            <div className=\"space-y-8 animate-in fade-in duration-300\">\n                                <div>\n                                    <h3 className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2\">\n                                        <User className=\"w-3.5 h-3.5\" /> Profile\n                                    </h3>\n                                    <div className=\"space-y-4\">\n                                        <div className=\"p-4 bg-slate-50 rounded-xl\">\n                                            <p className=\"text-[9px] font-bold text-slate-400 mb-1\">お名前 / 年齢</p>\n                                            <p className=\"text-lg font-black text-slate-900\">{userData.name} 様 <span className=\"text-xs font-medium text-slate-500\">({userData.age}歳)</span></p>\n                                        </div>\n                                        <div className=\"p-4 bg-slate-50 rounded-xl\">\n                                            <p className=\"text-[9px] font-bold text-slate-400 mb-1\">職業 / 家族構成</p>\n                                            <p className=\"text-sm font-bold text-slate-800\">\n                                                {userData.occupation || \"未入力\"}\n                                                {userData.familyStructure && ` / ${userData.familyStructure}`}\n                                            </p>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div>\n                                    <h3 className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2\">\n                                        <Target className=\"w-3.5 h-3.5\" /> Goal & Experience\n                                    </h3>\n                                    <div className=\"space-y-4\">\n                                        <div className=\"p-4 bg-blue-50/50 rounded-xl border border-blue-100\">\n                                            <p className=\"text-[9px] font-bold text-blue-400 mb-1\">将来の目標</p>\n                                            <p className=\"text-sm font-bold text-slate-800 leading-relaxed\">「{userData.investmentGoal}」</p>\n                                        </div>\n                                        <div className=\"p-4 bg-slate-50 rounded-xl\">\n                                            <p className=\"text-[9px] font-bold text-slate-400 mb-1\">投資経験 / 知識</p>\n                                            <div className=\"flex flex-wrap gap-2 mt-2\">\n                                                <span className=\"px-2 py-1 bg-white border border-slate-200 rounded text-[9px] font-bold text-slate-600\">{userData.experience}</span>\n                                                <span className=\"px-2 py-1 bg-white border border-slate-200 rounded text-[9px] font-bold text-slate-600\">知識レベル: {userData.knowledgeLevel}</span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div>\n                                    <h3 className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2\">\n                                        <Wallet className=\"w-3.5 h-3.5\" /> Assets\n                                    </h3>\n                                    <div className=\"space-y-3\">\n                                        <div className=\"p-4 bg-emerald-50/50 rounded-xl border border-emerald-100\">\n                                            <p className=\"text-[9px] font-bold text-emerald-600 mb-1\">現在の投資可能額</p>\n                                            <p className=\"text-xl font-black text-slate-900\">{(userData.currentAssets / 10000).toLocaleString()}<span className=\"text-[10px] ml-1\">万円</span></p>\n                                        </div>\n                                        <div className=\"p-4 bg-slate-50 rounded-xl\">\n                                            <p className=\"text-[9px] font-bold text-slate-400 mb-1\">月々の投資可能額</p>\n                                            <p className=\"text-lg font-black text-slate-900\">{(userData.monthlyInvestment / 10000).toLocaleString()}<span className=\"text-[10px] ml-1\">万円</span></p>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                {simulationResult && (\n                                    <div className=\"pt-4 border-t border-slate-100\">\n                                        <div className=\"p-4 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl shadow-lg shadow-blue-100/50 flex items-center justify-between gap-3\">\n                                            <div className=\"flex items-center gap-2\">\n                                                <Target className=\"w-4 h-4 text-white/80\" />\n                                                <p className=\"text-[11px] font-black text-white tracking-widest leading-none\">\n                                                    {userData?.name}様に必要な年利\n                                                </p>\n                                            </div>\n                                            <p className=\"text-xl font-black text-white tracking-tighter shrink-0\">\n                                                {formatPercent(simulationResult.requiredAnnualRate)}\n                                            </p>\n                                        </div>\n                                        <p className=\"mt-2 text-center text-[9px] font-black text-slate-400 italic\">\n                                            GOAL: {formatPercent(simulationResult.requiredAnnualRate)}\n                                        </p>\n                                    </div>\n                                )}\n                            </div>\n                        ) : (\n                            <div className=\"h-full flex flex-col animate-in fade-in duration-300\">\n                                <div className=\"flex justify-between items-center mb-4\">\n                                    <h3 className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-2\">\n                                        <PenLine className=\"w-3.5 h-3.5\" /> Side Note\n                                    </h3>\n                                </div>\n                                <textarea\n                                    value={memoText}\n                                    onChange={(e) => onMemoChange(e.target.value)}\n                                    placeholder=\"自由にメモを残してください...\"\n                                    className=\"flex-1 w-full bg-blue-50/30 rounded-2xl p-4 text-sm font-bold text-slate-700 placeholder:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-100 resize-none leading-relaxed custom-scrollbar\"\n                                />\n                                <p className=\"mt-4 text-[9px] font-medium text-slate-400 italic\">\n                                    ※入力した内容は一時的なものです（再起動でリセットされます）\n                                </p>\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n            <style jsx global>{`\n                .custom-scrollbar::-webkit-scrollbar {\n                    width: 4px;\n                }\n                .custom-scrollbar::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .custom-scrollbar::-webkit-scrollbar-thumb {\n                    background: #e2e8f0;\n                    border-radius: 10px;\n                }\n                .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n                    background: #cbd5e1;\n                }\n            `}</style>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/components/Phase1Hearing.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used.","line":8,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":50,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CardTitle"},"fix":{"range":[320,331],"text":""},"desc":"Remove unused variable \"CardTitle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardDescription' is defined but never used.","line":8,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":67,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CardDescription"},"fix":{"range":[331,348],"text":""},"desc":"Remove unused variable \"CardDescription\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":9,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":39,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Clock"},"fix":{"range":[411,418],"text":""},"desc":"Remove unused variable \"Clock\"."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/components/Phase1Hearing.tsx:40:9\n  38 |\n  39 |     useEffect(() => {\n> 40 |         setShowContent(true);\n     |         ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  41 |     }, []);\n  42 |\n  43 |     // ステップが切り替わったときにトップにスクロール","line":40,"column":9,"nodeType":null,"endLine":40,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { UserInput } from \"@/types\";\nimport { toHalfWidth, formatJapaneseAmount, parseNumericInput } from \"@/lib/simulation\";\nimport { Button } from \"@/components/ui/Button\";\nimport { Input } from \"@/components/ui/Input\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/Card\";\nimport { User, Calendar, Target, Clock, Wallet, Sparkles, ArrowRight, CheckCircle, ChevronLeft, FileText } from \"lucide-react\";\nimport Image from \"next/image\";\n\ninterface Phase1HearingProps {\n    onSubmit: (data: UserInput) => void;\n    onBack: () => void;\n    onGoToAgenda: () => void;\n}\n\nexport default function Phase1Hearing({ onSubmit, onBack, onGoToAgenda }: Phase1HearingProps) {\n    const [step, setStep] = useState(0);\n    const [showContent, setShowContent] = useState(false);\n    const [formData, setFormData] = useState<UserInput>({\n        name: \"\",\n        age: 35,\n        investmentGoal: \"\",\n        targetAmount: 30000000,\n        targetPeriod: 10,\n        initialBudget: 1000000,\n        monthlySavings: 30000,\n        occupation: \"\",\n        familyStructure: \"\",\n        investmentExperience: [],\n        experience: \"未入力\",\n        knowledgeLevel: \"初級\",\n        currentAssets: 1000000,\n        monthlyInvestment: 30000,\n    });\n    const [errors, setErrors] = useState<Partial<Record<keyof UserInput, string>>>({});\n\n    useEffect(() => {\n        setShowContent(true);\n    }, []);\n\n    // ステップが切り替わったときにトップにスクロール\n    useEffect(() => {\n        window.scrollTo({ top: 0, behavior: \"smooth\" });\n    }, [step]);\n\n    const questions = [\n        {\n            title: \"お名前を教えてください\",\n            subtitle: \"本日はよろしくお願いいたします\",\n            icon: User,\n        },\n        {\n            title: \"基本的なプロフィールを教えてください\",\n            subtitle: \"より具体的なアドバイスのためにご協力ください\",\n            icon: Target,\n        },\n        {\n            title: \"目標金額と期間を教えてください\",\n            subtitle: \"具体的な数字があると計画が立てやすくなります\",\n            icon: Calendar,\n        },\n        {\n            title: \"現在の投資可能額を教えてください\",\n            subtitle: \"無理のない金額からスタートすることが大切です\",\n            icon: Wallet,\n        },\n    ];\n\n    const validateStep = (stepIndex: number): boolean => {\n        const newErrors: Partial<Record<keyof UserInput, string>> = {};\n\n        switch (stepIndex) {\n            case 0:\n                if (!formData.name.trim()) newErrors.name = \"お名前を入力してください\";\n                break;\n            case 1:\n                if (formData.age < 18 || formData.age > 100) newErrors.age = \"有効な年齢を入力してください\";\n                if (!formData.investmentGoal.trim()) newErrors.investmentGoal = \"投資で達成したいことを入力してください\";\n                if (!formData.occupation?.trim()) newErrors.occupation = \"職業を入力してください\";\n                break;\n            case 2:\n                if (formData.targetAmount < 100000) newErrors.targetAmount = \"目標金額を入力してください\";\n                if (formData.targetPeriod < 1 || formData.targetPeriod > 100) newErrors.targetPeriod = \"1〜100年の間で入力してください\";\n                break;\n            case 3:\n                if (formData.initialBudget < 0) newErrors.initialBudget = \"有効な数値を入力してください\";\n                if (formData.monthlySavings < 0) newErrors.monthlySavings = \"有効な数値を入力してください\";\n                if (formData.initialBudget === 0 && formData.monthlySavings === 0) {\n                    newErrors.initialBudget = \"初期予算または毎月の積立額のどちらかを入力してください\";\n                }\n                break;\n        }\n\n        setErrors(newErrors);\n        return Object.keys(newErrors).length === 0;\n    };\n\n    const handleNext = () => {\n        if (validateStep(step)) {\n            if (step < 3) {\n                setStep(step + 1);\n            } else {\n                handleSubmit();\n            }\n        }\n    };\n\n    const handleSubmit = () => {\n        onSubmit(formData);\n    };\n\n    const goalSuggestions = [\n        \"早めにFIREして自由に暮らしたい\",\n        \"老後の資金問題を解決したい\",\n        \"子供のために資金を準備したい\",\n        \"マイホームを建てたい\",\n        \"海外旅行に行きたい\",\n        \"配当金で生活費を賄いたい\",\n    ];\n\n    const renderStepContent = () => {\n        const currentQuestion = questions[step];\n\n        return (\n            <div className=\"space-y-6\">\n                {/* ステップヘッダー */}\n                <div className=\"text-center\">\n                    <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-primary to-blue-600 text-white mb-4 animate-bounce-gentle shadow-xl\">\n                        <currentQuestion.icon className=\"w-8 h-8\" />\n                    </div>\n                    <h2 className=\"text-2xl font-bold text-gray-800 mb-2\">{currentQuestion.title}</h2>\n                    <p className=\"text-gray-500\">{currentQuestion.subtitle}</p>\n                </div>\n\n                {/* フォームコンテンツ */}\n                <div className=\"space-y-4\">\n                    {step === 0 && (\n                        <div className=\"max-w-md mx-auto\">\n                            <Input\n                                label=\"お名前\"\n                                placeholder=\"例：田中 太郎\"\n                                value={formData.name}\n                                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                                error={errors.name}\n                                className=\"text-lg py-4\"\n                            />\n                        </div>\n                    )}\n\n                    {step === 1 && (\n                        <div className=\"max-w-2xl mx-auto space-y-6\">\n                            <div className=\"grid md:grid-cols-2 gap-6\">\n                                <Input\n                                    label=\"ご年齢\"\n                                    type=\"text\"\n                                    inputMode=\"numeric\"\n                                    placeholder=\"35\"\n                                    value={formData.age}\n                                    onChange={(e) => setFormData({ ...formData, age: parseInt(toHalfWidth(e.target.value)) || 0 })}\n                                    error={errors.age}\n                                />\n                                <Input\n                                    label=\"職業\"\n                                    placeholder=\"例：会社員、公務員、経営者\"\n                                    value={formData.occupation}\n                                    onChange={(e) => setFormData({ ...formData, occupation: e.target.value })}\n                                    error={errors.occupation}\n                                />\n                            </div>\n                            <Input\n                                label=\"家族構成\"\n                                placeholder=\"例：独身、既婚（子供1名）\"\n                                value={formData.familyStructure}\n                                onChange={(e) => setFormData({ ...formData, familyStructure: e.target.value })}\n                            />\n\n                            <div className=\"space-y-3\">\n                                <label className=\"text-sm font-bold text-gray-700\">投資経験・興味（複数選択可）</label>\n                                <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-3\">\n                                    {[\"個別株\", \"投資信託\", \"NISA\", \"iDeCo\", \"仮想通貨\", \"FX\", \"不動産投資\"].map((exp) => (\n                                        <label key={exp} className={`flex items-center gap-2 p-3 rounded-xl border-2 transition-all cursor-pointer ${formData.investmentExperience?.includes(exp) ? \"border-primary bg-blue-50 text-primary\" : \"border-slate-100 hover:border-slate-200\"}`}>\n                                            <input\n                                                type=\"checkbox\"\n                                                className=\"hidden\"\n                                                checked={formData.investmentExperience?.includes(exp)}\n                                                onChange={(e) => {\n                                                    const current = formData.investmentExperience || [];\n                                                    let next: string[];\n                                                    if (e.target.checked) {\n                                                        next = [...current, exp];\n                                                    } else {\n                                                        next = current.filter(item => item !== exp);\n                                                    }\n                                                    setFormData({\n                                                        ...formData,\n                                                        investmentExperience: next,\n                                                        experience: next.length > 0 ? next.join('・') : \"未入力\"\n                                                    });\n                                                }}\n                                            />\n                                            <span className=\"font-bold text-sm\">{exp}</span>\n                                        </label>\n                                    ))}\n                                </div>\n                            </div>\n\n                            <div>\n                                <Input\n                                    label=\"投資で利益が出たらやりたいこと\"\n                                    placeholder=\"例：50歳でFIREして世界一周旅行\"\n                                    value={formData.investmentGoal}\n                                    onChange={(e) => setFormData({ ...formData, investmentGoal: e.target.value })}\n                                    error={errors.investmentGoal}\n                                />\n                                <div className=\"mt-3 flex flex-wrap gap-2\">\n                                    {goalSuggestions.map((suggestion, index) => (\n                                        <button\n                                            key={index}\n                                            type=\"button\"\n                                            onClick={() => setFormData({ ...formData, investmentGoal: suggestion })}\n                                            className=\"text-xs px-3 py-1.5 bg-blue-50 text-primary rounded-full hover:bg-blue-100 transition-colors\"\n                                        >\n                                            {suggestion}\n                                        </button>\n                                    ))}\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {step === 2 && (\n                        <div className=\"max-w-2xl mx-auto\">\n                            <div className=\"grid md:grid-cols-2 gap-6\">\n                                <div>\n                                    <Input\n                                        label=\"目標金額（円）\"\n                                        type=\"text\"\n                                        inputMode=\"numeric\"\n                                        placeholder=\"30000000\"\n                                        value={formData.targetAmount ? formData.targetAmount.toLocaleString() : \"\"}\n                                        onChange={(e) => setFormData({ ...formData, targetAmount: parseNumericInput(e.target.value) })}\n                                        error={errors.targetAmount}\n                                    />\n                                    <p className=\"text-sm text-gray-500 mt-1\">\n                                        ={\" \"}\n                                        <span className=\"font-bold text-primary\">\n                                            {formatJapaneseAmount(formData.targetAmount)}\n                                        </span>\n                                    </p>\n                                </div>\n                                <div>\n                                    <Input\n                                        label=\"達成期間（年）\"\n                                        type=\"text\"\n                                        inputMode=\"numeric\"\n                                        placeholder=\"10\"\n                                        value={formData.targetPeriod}\n                                        onChange={(e) => setFormData({ ...formData, targetPeriod: parseInt(toHalfWidth(e.target.value)) || 0 })}\n                                        error={errors.targetPeriod}\n                                    />\n                                    <p className=\"text-sm text-gray-500 mt-1\">\n                                        {formData.age + formData.targetPeriod}歳のときに達成\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {step === 3 && (\n                        <div className=\"max-w-2xl mx-auto space-y-8\">\n                            <div className=\"grid md:grid-cols-2 gap-8\">\n                                <div>\n                                    <Input\n                                        label=\"現在出せる投資資金（円）\"\n                                        type=\"text\"\n                                        inputMode=\"numeric\"\n                                        placeholder=\"1000000\"\n                                        value={formData.initialBudget ? formData.initialBudget.toLocaleString() : \"\"}\n                                        onChange={(e) => {\n                                            const val = parseNumericInput(e.target.value);\n                                            setFormData({ ...formData, initialBudget: val, currentAssets: val });\n                                        }}\n                                        error={errors.initialBudget}\n                                    />\n                                    <p className=\"text-sm text-gray-500 mt-1\">\n                                        ={\" \"}\n                                        <span className=\"font-bold text-primary\">\n                                            {formatJapaneseAmount(formData.initialBudget)}\n                                        </span>\n                                    </p>\n                                </div>\n                                <div>\n                                    <Input\n                                        label=\"毎月の積立金額（円）\"\n                                        type=\"text\"\n                                        inputMode=\"numeric\"\n                                        placeholder=\"30000\"\n                                        value={formData.monthlySavings ? formData.monthlySavings.toLocaleString() : \"\"}\n                                        onChange={(e) => {\n                                            const val = parseNumericInput(e.target.value);\n                                            setFormData({ ...formData, monthlySavings: val, monthlyInvestment: val });\n                                        }}\n                                        error={errors.monthlySavings}\n                                    />\n                                    <p className=\"text-sm text-gray-500 mt-1\">\n                                        年間で{\" \"}\n                                        <span className=\"font-bold text-primary\">\n                                            {formatJapaneseAmount(formData.monthlySavings * 12)}\n                                        </span>\n                                        の積立\n                                    </p>\n                                </div>\n                            </div>\n                            <div className=\"p-4 bg-amber-50 rounded-xl border border-amber-200\">\n                                <p className=\"text-sm text-amber-800\">\n                                    💡 最初は月5,000円〜でも大丈夫です。スキルに応じて増やしていくのが成功のコツです\n                                </p>\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n        );\n    };\n\n    return (\n        <div className=\"min-h-screen relative overflow-hidden bg-gradient-to-br from-slate-50 via-blue-50 to-white\">\n            {/* 背景のマスコット画像 */}\n            <div className=\"absolute inset-0 pointer-events-none\">\n                <Image\n                    src=\"/mascot/mascot_cheer_blue.png\"\n                    alt=\"\"\n                    width={200}\n                    height={200}\n                    className=\"absolute -top-10 -left-10 opacity-10 animate-float-slow\"\n                />\n                <Image\n                    src=\"/mascot/mascot_happy.png\"\n                    alt=\"\"\n                    width={180}\n                    height={180}\n                    className=\"absolute top-1/3 -right-10 opacity-10 animate-float-delayed\"\n                />\n                <Image\n                    src=\"/mascot/mascot_phone.png\"\n                    alt=\"\"\n                    width={150}\n                    height={150}\n                    className=\"absolute -bottom-10 left-1/4 opacity-10 animate-bounce-gentle\"\n                />\n            </div>\n\n            <div className=\"relative z-10 min-h-screen flex items-center justify-center py-8 px-4\">\n                <div className=\"w-full max-w-3xl\">\n                    {/* セクションヘッダー */}\n                    <div className={`text-center mb-6 transition-all duration-700 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                        <div className=\"flex justify-between items-center mb-4 max-w-3xl mx-auto\">\n                            <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                onClick={onBack}\n                                className=\"text-slate-600 hover:text-slate-900 transition-colors\"\n                            >\n                                <ChevronLeft className=\"w-4 h-4 mr-1\" />\n                                戻る\n                            </Button>\n                            <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                onClick={onGoToAgenda}\n                                className=\"text-slate-600 hover:text-slate-900 transition-colors\"\n                            >\n                                <FileText className=\"w-4 h-4 mr-1\" />\n                                目次\n                            </Button>\n                        </div>\n                        <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-slate-900/5 backdrop-blur rounded-full mb-4 ring-1 ring-slate-900/10\">\n                            <span className=\"text-slate-900 font-medium\">あなたのことを教えてください</span>\n                        </div>\n                    </div>\n\n                    {/* メインカード */}\n                    <Card className={`border-0 shadow-2xl transition-all duration-700 delay-200 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                        <CardHeader className=\"text-center pb-2\">\n                            {/* ステップインジケーター */}\n                            <div className=\"flex justify-center gap-3 mb-6\">\n                                {[0, 1, 2, 3].map((i) => (\n                                    <div key={i} className=\"flex items-center gap-3\">\n                                        <div\n                                            className={`w-10 h-10 rounded-full flex items-center justify-center font-bold transition-all ${i < step\n                                                ? \"bg-primary text-white\"\n                                                : i === step\n                                                    ? \"bg-primary text-white ring-4 ring-primary/30 animate-pulse\"\n                                                    : \"bg-gray-200 text-gray-400\"\n                                                }`}\n                                        >\n                                            {i < step ? <CheckCircle className=\"w-5 h-5\" /> : i + 1}\n                                        </div>\n                                        {i < 3 && (\n                                            <div className={`w-12 h-1 rounded ${i < step ? \"bg-primary\" : \"bg-gray-200\"}`} />\n                                        )}\n                                    </div>\n                                ))}\n                            </div>\n                        </CardHeader>\n                        <CardContent className=\"pb-8\">\n                            {renderStepContent()}\n\n                            {/* ナビゲーションボタン */}\n                            <div className=\"flex justify-between mt-8 max-w-md mx-auto\">\n                                {step > 0 && (\n                                    <Button variant=\"outline\" onClick={() => setStep(step - 1)}>\n                                        戻る\n                                    </Button>\n                                )}\n                                <Button\n                                    onClick={handleNext}\n                                    className={`${step === 0 ? \"w-full\" : \"flex-1 ml-4\"} animate-pulse-border`}\n                                >\n                                    {step < 3 ? (\n                                        <>\n                                            次へ\n                                            <ArrowRight className=\"w-4 h-4\" />\n                                        </>\n                                    ) : (\n                                        <>\n                                            <Sparkles className=\"w-4 h-4\" />\n                                            分析を開始する\n                                        </>\n                                    )}\n                                </Button>\n                            </div>\n                        </CardContent>\n                    </Card>\n\n                    {/* 入力サマリー */}\n                    {step > 0 && (\n                        <div className={`mt-6 p-4 bg-white/60 backdrop-blur rounded-xl border border-white/40 shadow-sm transition-all duration-500 ${showContent ? \"opacity-100\" : \"opacity-0\"}`}>\n                            <p className=\"text-slate-900 text-sm leading-relaxed\">\n                                {formData.name && <span className=\"text-amber-600 font-bold\">{formData.name}</span>}\n                                {formData.name && \"様 \"}\n                                {formData.age > 0 && <span className=\"font-medium\">({formData.age}歳)</span>}\n                                {formData.investmentGoal && (\n                                    <span className=\"block mt-1 font-medium\">\n                                        目標: 「{formData.investmentGoal}」\n                                        {formData.occupation && ` / 職業: ${formData.occupation}`}\n                                        {formData.investmentExperience && formData.investmentExperience.length > 0 && ` / 経験: ${formData.investmentExperience.join('・')}`}\n                                    </span>\n                                )}\n                            </p>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/components/Phase1ThreeSteps.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/components/Phase1ThreeSteps.tsx:18:9\n  16 |\n  17 |     useEffect(() => {\n> 18 |         setShowContent(true);\n     |         ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  19 |     }, []);\n  20 |\n  21 |     const steps = [","line":18,"column":9,"nodeType":null,"endLine":18,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Button } from \"@/components/ui/Button\";\nimport { ArrowRight, ChevronLeft, FileText, Target, TrendingUp, Zap, Flag } from \"lucide-react\";\nimport Image from \"next/image\";\n\ninterface Phase1ThreeStepsProps {\n    onNext: () => void;\n    onBack: () => void;\n    onGoToAgenda: () => void;\n}\n\nexport default function Phase1ThreeSteps({ onNext, onBack, onGoToAgenda }: Phase1ThreeStepsProps) {\n    const [showContent, setShowContent] = useState(false);\n\n    useEffect(() => {\n        setShowContent(true);\n    }, []);\n\n    const steps = [\n        {\n            number: \"1\",\n            title: \"ゴールを決める\",\n            subtitle: \"（計画を立てよう）\",\n            icon: Target,\n            color: \"bg-blue-900\",\n            textColor: \"text-blue-900\",\n        },\n        {\n            number: \"2\",\n            title: \"適切な投資手段の決定\",\n            subtitle: \"（年利を考えてみる）\",\n            icon: TrendingUp,\n            color: \"bg-blue-900\",\n            textColor: \"text-blue-900\",\n        },\n        {\n            number: \"3\",\n            title: \"投資の実行\",\n            subtitle: \"（手段を決定してスタート）\",\n            icon: Zap,\n            color: \"bg-blue-900\",\n            textColor: \"text-blue-900\",\n        }\n    ];\n\n    return (\n        <div className=\"min-h-screen relative overflow-hidden bg-white\">\n            {/* 装飾的な背景 */}\n            <div className=\"absolute top-0 right-0 w-1/2 h-full bg-slate-50 opacity-50 -skew-x-12 translate-x-1/4 pointer-events-none\"></div>\n\n            <div className=\"relative z-10 max-w-6xl mx-auto px-6 py-12 min-h-screen flex flex-col items-center justify-center\">\n\n                {/* ヘッダー */}\n                <div className={`w-full flex justify-between items-center mb-12 transition-all duration-700 ${showContent ? \"opacity-100\" : \"opacity-0\"}`}>\n                    <Button variant=\"ghost\" size=\"sm\" onClick={onBack} className=\"text-slate-600 hover:text-slate-900\">\n                        <ChevronLeft className=\"w-4 h-4 mr-1\" /> 戻る\n                    </Button>\n                    <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-slate-900/5 backdrop-blur rounded-full ring-1 ring-slate-900/10\">\n                        <span className=\"text-blue-600 font-bold\">Section 02</span>\n                        <span className=\"text-slate-400\">/</span>\n                        <span className=\"text-slate-900\">資産形成の3ステップ</span>\n                    </div>\n                    <Button variant=\"ghost\" size=\"sm\" onClick={onGoToAgenda} className=\"text-slate-600 hover:text-slate-900\">\n                        <FileText className=\"w-4 h-4 mr-1\" /> 目次\n                    </Button>\n                </div>\n\n                {/* メインタイトル */}\n                <div className={`text-center mb-16 transition-all duration-1000 delay-200 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                    <h1 className=\"text-4xl md:text-6xl font-black text-blue-900 mb-4 tracking-tighter flex items-center justify-center gap-4\">\n                        資産形成の3ステップ\n                    </h1>\n                    <div className=\"w-40 h-1.5 bg-blue-900 mx-auto rounded-full\"></div>\n                </div>\n\n                <div className=\"grid lg:grid-cols-2 gap-16 items-center w-full\">\n\n                    {/* ステップカードリスト */}\n                    <div className=\"space-y-6\">\n                        {steps.map((step, idx) => (\n                            <div\n                                key={idx}\n                                className={`group relative bg-white border-2 border-slate-100 rounded-3xl p-8 shadow-sm hover:shadow-xl hover:border-blue-100 transition-all duration-500 transform ${showContent ? \"opacity-100 translate-x-0\" : \"opacity-0 -translate-x-10\"}`}\n                                style={{ transitionDelay: `${400 + idx * 150}ms` }}\n                            >\n                                <div className=\"flex items-center gap-6\">\n                                    <div className=\"flex flex-col items-center shrink-0\">\n                                        <div className=\"bg-blue-900 text-white text-xs font-black px-4 py-1.5 rounded-full mb-3 tracking-widest uppercase\">\n                                            ステップ {step.number}\n                                        </div>\n                                        <div className=\"w-16 h-16 rounded-2xl bg-slate-50 flex items-center justify-center text-blue-900 group-hover:scale-110 transition-transform\">\n                                            <step.icon className=\"w-8 h-8\" />\n                                        </div>\n                                    </div>\n                                    <div className=\"flex-1 min-w-0\">\n                                        <h3 className=\"text-xl md:text-2xl font-black text-blue-900 mb-1 leading-tight break-keep\">{step.title}</h3>\n                                        <p className=\"text-slate-500 font-bold text-base md:text-lg\">{step.subtitle}</p>\n                                    </div>\n                                    <div className=\"hidden md:block opacity-0 group-hover:opacity-100 transition-opacity\">\n                                        <ArrowRight className=\"w-8 h-8 text-blue-200\" />\n                                    </div>\n                                </div>\n                                {idx < 2 && (\n                                    <div className=\"absolute -bottom-6 left-16 w-0.5 h-6 bg-slate-200\"></div>\n                                )}\n                            </div>\n                        ))}\n                    </div>\n\n                    {/* イラストレーションセクション (Mountain) */}\n                    <div className={`relative aspect-square max-w-lg mx-auto w-full transition-all duration-1000 delay-800 ${showContent ? \"opacity-100 scale-100\" : \"opacity-0 scale-95\"}`}>\n                        <div className=\"absolute inset-0 bg-blue-50/50 rounded-full blur-3xl\"></div>\n\n                        {/* 山の図解 (SVG) */}\n                        <div className=\"relative z-10 w-full h-full flex items-center justify-center\">\n                            <svg className=\"w-full h-full drop-shadow-2xl\" viewBox=\"0 0 100 100\">\n                                {/* 山 */}\n                                <path d=\"M 50 10 L 90 90 L 10 90 Z\" fill=\"#E2E8F0\" />\n                                <path d=\"M 50 10 L 50 90 L 10 90 Z\" fill=\"#CBD5E1\" />\n\n                                {/* 道 */}\n                                <path\n                                    d=\"M 50 85 Q 60 75, 45 65 Q 35 55, 55 45 Q 65 35, 50 20\"\n                                    fill=\"none\"\n                                    stroke=\"#1E3A8A\"\n                                    strokeWidth=\"2.5\"\n                                    strokeLinecap=\"round\"\n                                    className=\"animate-draw-path\"\n                                />\n\n                                {/* 旗 */}\n                                <g transform=\"translate(48, 8)\">\n                                    <rect width=\"1\" height=\"12\" fill=\"#64748B\" />\n                                    <path d=\"M 1 0 L 10 3 L 1 6 Z\" fill=\"#FACC15\" className=\"animate-pulse\" />\n                                </g>\n                            </svg>\n\n                            {/* マスコット配置 */}\n                            <div className=\"absolute top-1/2 left-0 -translate-y-1/2 animate-float-slow\">\n                                <Image src=\"/mascot/mascot_search.png\" alt=\"mascot\" width={100} height={100} className=\"drop-shadow-lg\" />\n                            </div>\n                            <div className=\"absolute bottom-4 right-4 animate-float-delayed\">\n                                <Image src=\"/mascot/mascot_cheer_blue.png\" alt=\"mascot\" width={120} height={120} className=\"drop-shadow-lg\" />\n                            </div>\n\n                            <div className=\"absolute bottom-28 left-1/2 -translate-x-1/2 bg-white/95 backdrop-blur px-8 py-3 rounded-2xl shadow-xl border border-blue-100 flex items-center gap-4 whitespace-nowrap min-w-max\">\n                                <div className=\"w-10 h-10 rounded-full bg-blue-900 flex items-center justify-center shrink-0\">\n                                    <Flag className=\"w-5 h-5 text-white\" />\n                                </div>\n                                <div className=\"flex flex-col\">\n                                    <p className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1\">Initial Goal</p>\n                                    <p className=\"font-black text-blue-900 text-base md:text-lg leading-none\">まずは「ゴール」を目指しましょう</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* ネクストアクション */}\n                <div className={`mt-20 transition-all duration-700 delay-1000 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                    <Button\n                        onClick={onNext}\n                        size=\"lg\"\n                        className=\"bg-blue-900 hover:bg-slate-800 text-white font-black h-20 px-12 rounded-full text-xl md:text-2xl shadow-2xl group transform transition-all hover:scale-105\"\n                    >\n                        ゴール設定のためにあなたのことを教えてください\n                        <ArrowRight className=\"ml-4 w-6 h-6 md:w-8 md:h-8 group-hover:translate-x-3 transition-transform\" />\n                    </Button>\n                </div>\n\n                {/* フッター branding */}\n                <div className={`mt-12 transition-opacity duration-1000 delay-1200 ${showContent ? \"opacity-40\" : \"opacity-0\"}`}>\n                    <p className=\"text-blue-950 font-black text-xl tracking-[0.4em] italic\">Global Financial School</p>\n                </div>\n            </div>\n\n            <style jsx>{`\n                .animate-draw-path {\n                    stroke-dasharray: 100;\n                    stroke-dashoffset: 100;\n                    animation: draw 2s ease-out forwards 1.5s;\n                }\n                @keyframes draw {\n                    to { stroke-dashoffset: 0; }\n                }\n            `}</style>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/components/Phase2CompanyIntro.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used.","line":7,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":21,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Users"},"fix":{"range":[176,183],"text":""},"desc":"Remove unused variable \"Users\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'GraduationCap' is defined but never used.","line":7,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":36,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"GraduationCap"},"fix":{"range":[183,198],"text":""},"desc":"Remove unused variable \"GraduationCap\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trophy' is defined but never used.","line":7,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":44,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Trophy"},"fix":{"range":[198,206],"text":""},"desc":"Remove unused variable \"Trophy\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":8,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":15,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TrendingUp"},"fix":{"range":[231,247],"text":""},"desc":"Remove unused variable \"TrendingUp\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Target' is defined but never used.","line":8,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":23,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Target"},"fix":{"range":[247,255],"text":""},"desc":"Remove unused variable \"Target\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Star' is defined but never used.","line":9,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Star"},"fix":{"range":[310,320],"text":""},"desc":"Remove unused variable \"Star\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'userData' is defined but never used.","line":20,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":54},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":210,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":210,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7085,7088],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7085,7088],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called in function \"renderSlide\" that is neither a React function component nor a custom React Hook function. React component names must start with an uppercase letter. React Hook names must start with the word \"use\".","line":291,"column":55,"nodeType":"Identifier","endLine":291,"endColumn":63},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called in function \"renderSlide\" that is neither a React function component nor a custom React Hook function. React component names must start with an uppercase letter. React Hook names must start with the word \"use\".","line":292,"column":47,"nodeType":"Identifier","endLine":292,"endColumn":55}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState, useRef } from \"react\";\nimport { UserInput } from \"@/types\";\nimport { Button } from \"@/components/ui/Button\";\nimport {\n    Building2, Users, GraduationCap, Trophy, CheckCircle, ArrowRight,\n    TrendingUp, Target, Heart, Sparkles, ChevronLeft, ChevronRight, ArrowLeft,\n    Star, Award, BookOpen, MessageCircle, FileText\n} from \"lucide-react\";\nimport Image from \"next/image\";\n\ninterface Phase2CompanyIntroProps {\n    userData?: UserInput | null;\n    onNext: () => void;\n    onBack: () => void;\n    onGoToAgenda: () => void;\n}\n\nexport default function Phase2CompanyIntro({ userData, onNext, onBack, onGoToAgenda }: Phase2CompanyIntroProps) {\n    const [currentSlide, setCurrentSlide] = useState(0);\n    const [isAutoPlaying, setIsAutoPlaying] = useState(false);\n    const [hoveredProgram, setHoveredProgram] = useState<number | null>(null);\n    const scrollContainerRef = useRef<HTMLDivElement>(null);\n\n    // スライドが切り替わったときにコンテナ内をトップにスクロール\n    useEffect(() => {\n        if (scrollContainerRef.current) {\n            scrollContainerRef.current.scrollTo({ top: 0, behavior: \"smooth\" });\n        }\n        setHoveredProgram(null);\n    }, [currentSlide]);\n    const [showContent, setShowContent] = useState(false);\n\n    useEffect(() => {\n        setShowContent(true);\n    }, []);\n\n    // スライドデータ（画像とカスタムを交互に配置）\n    const slides = [\n        {\n            type: \"company_info\",\n            title: \"講座の運営元\",\n            description: \"株式会社GFS Education\"\n        },\n        {\n            type: \"cm_videos\",\n            title: \"藤本美貴さん 出演CM放送中\",\n            description: \"お金の学校 GFS\",\n            videos: [\n                { src: \"/videos/ミキティCM.mp4\", title: \"TV CM 1\" },\n                { src: \"/videos/ミキティCM2.mp4\", title: \"TV CM 2\" },\n                { src: \"/videos/ミキティCM3.mp4\", title: \"TV CM 3\" }\n            ]\n        },\n        {\n            type: \"custom\",\n            title: \"GFSのコンセプト\",\n            icon: Heart,\n            color: \"from-rose-500 to-pink-600\",\n            characterImage: \"/slides/character_happy_new.png\",\n            content: {\n                heading: \"お金でやりたいことを諦めない世の中を創る\",\n                subheading: \"金融知識がすべての人にとって当たり前の時代を創る\",\n                points: [\n                    \"投資は一部の富裕層だけのものではありません\",\n                    \"正しい知識があれば、誰でも資産形成ができます\",\n                    \"GFSは金融教育の民主化を目指しています\"\n                ]\n            }\n        },\n        {\n            type: \"no1_achievements\",\n            title: \"オンライン投資スクール No.1\",\n            description: \"2025年 東京商工リサーチ調べ\",\n            achievements: [\n                { label: \"講師数\", rank: \"No.1\" },\n                { label: \"講義数\", rank: \"No.1\" },\n                { label: \"生徒数\", rank: \"No.1\" }\n            ],\n            students: \"60,000人\",\n            note: \"※2025年11月時点\"\n        },\n        {\n            type: \"custom\",\n            title: \"実績と信頼\",\n            icon: Award,\n            color: \"from-purple-500 to-pink-500\",\n            characterImage: \"/slides/character_chef.png\",\n            content: {\n                heading: \"数字で見るGFSの実績\",\n                subheading: \"多くの方に選ばれています\",\n                points: [\n                    \"累計受講者 50万人突破\",\n                    \"現役生徒数 60,000人を突破（2025年11月時点）\",\n                    \"生徒数・講義数・講師数 日本一\",\n                    \"投資初心者 66%が入学\",\n                    \"Great Place to Work 2年連続認定\"\n                ]\n            }\n        },\n        {\n            type: \"student_achievements\",\n            title: \"GFS生徒の実績\",\n            description: \"入学前は約66%の方は投資初心者ですが、半年~1年ほどで30万円以上の利益を出しています！\",\n            barChart: {\n                title: \"生徒（投資初心者）の入学後実績\",\n                subtitle: \"入学から1年後には220万円以上の利益を出すことができています！\",\n                data: [\n                    { period: \"半年～\", amount: 36, color: \"bg-gradient-to-t from-blue-500 to-blue-400\" },\n                    { period: \"1年～2年以内\", amount: 220, color: \"bg-gradient-to-t from-yellow-500 to-yellow-400\", highlight: true },\n                    { period: \"2年～3年以内\", amount: 300, color: \"bg-gradient-to-t from-purple-600 to-purple-500\" }\n                ],\n                note: \"※2025年8月 GFS全生徒へのアンケートをもとに集計（回答者数：1,108名）\"\n            },\n            pieChart: {\n                title: \"GFS生徒の過半数が投資初心者\",\n                data: [\n                    { label: \"投資初心者\", percentage: 66, color: \"#1e3a8a\" },\n                    { label: \"投資経験者\", percentage: 34, color: \"#60a5fa\" }\n                ]\n            }\n        },\n        {\n            type: \"custom\",\n            title: \"充実のカリキュラム\",\n            icon: BookOpen,\n            color: \"from-blue-500 to-indigo-600\",\n            characterImage: \"/slides/character_reading.png\",\n            content: {\n                heading: \"2,000以上の講義が視聴し放題\",\n                subheading: \"基礎から応用まで、正しい順序で学べる環境\",\n                points: [\n                    \"投資の基礎知識から実践的なテクニックまで\",\n                    \"株式・FX・仮想通貨など幅広い分野をカバー\",\n                    \"いつでもどこでも、自分のペースで学習可能\",\n                    \"1日15分からでOK、隙間時間を有効活用\"\n                ]\n            }\n        },\n        {\n            type: \"custom\",\n            title: \"手厚いサポート体制\",\n            icon: MessageCircle,\n            color: \"from-emerald-500 to-teal-500\",\n            characterImage: \"/slides/character_cheerleader.png\",\n            characterImage2: \"/slides/character_cheerleader2.png\",\n            content: {\n                heading: \"専任コンサルタントが全力サポート\",\n                subheading: \"一人で悩まない、仲間がいる環境\",\n                points: [\n                    \"専任コンサルタントへの相談が可能\",\n                    \"講師や投資仲間と交流できる掲示板\",\n                    \"わからないことはいつでも質問OK\",\n                    \"同じ目標を持つ仲間と切磋琢磨\"\n                ]\n            }\n        },\n        {\n            type: \"learning_method_comparison\",\n            title: \"学習の方法\",\n            subtitle: \"体系的なカリキュラムを用意しています！\",\n            selfStudy: {\n                title: \"独学の場合\",\n                problems: [\n                    \"Aさんは○○と言っている\",\n                    \"Bさんは△△と言っている\",\n                    \"Cさんは□□と言っている\"\n                ],\n                pathType: \"curved\"\n            },\n            gfsMethod: {\n                title: \"GFSの場合\",\n                subtitle: \"未経験者でも3ヶ月で投資ができる体系的学習プログラムを提供\",\n                programs: [\n                    \"スタート\\nダッシュ面談\",\n                    \"ゴール設定\",\n                    \"価値分析\\n＆\\n心理分析\",\n                    \"口座開設\"\n                ],\n                pathType: \"straight\"\n            }\n        }\n    ];\n\n    useEffect(() => {\n        if (isAutoPlaying) {\n            const timer = setInterval(() => {\n                setCurrentSlide((prev) => (prev + 1) % slides.length);\n            }, 5000);\n            return () => clearInterval(timer);\n        }\n    }, [isAutoPlaying, slides.length]);\n\n    const goToSlide = (index: number) => {\n        setCurrentSlide(index);\n        setIsAutoPlaying(false);\n    };\n\n    const nextSlide = () => {\n        setCurrentSlide((prev) => (prev + 1) % slides.length);\n        setIsAutoPlaying(false);\n    };\n\n    const prevSlide = () => {\n        setCurrentSlide((prev) => (prev - 1 + slides.length) % slides.length);\n        setIsAutoPlaying(false);\n    };\n\n    const renderSlide = (slide: any) => {\n        // 会社情報スライド（カスタムデザイン）\n        if (slide.type === \"company_info\") {\n            return (\n                <div className=\"h-full bg-gradient-to-br from-sky-100 via-blue-200 to-cyan-100 p-8 md:p-12 flex items-center relative overflow-hidden\">\n                    {/* 背景装飾 */}\n                    <div className=\"absolute inset-0 opacity-10\">\n                        <Image\n                            src=\"/slides/office_building.jpg\"\n                            alt=\"\"\n                            fill\n                            className=\"object-cover\"\n                        />\n                    </div>\n\n                    <div className=\"relative z-10 w-full grid grid-cols-1 md:grid-cols-2 gap-8 items-center max-w-6xl mx-auto\">\n                        {/* 左側: 会社情報 */}\n                        <div className=\"text-gray-800\">\n                            {/* アイコンとタイトル */}\n                            <div className=\"flex items-center gap-3 mb-6\">\n                                <Building2 className=\"w-10 h-10 md:w-12 md:h-12 text-blue-600\" />\n                                <h2 className=\"text-2xl md:text-3xl font-bold text-blue-900\">講座の運営元</h2>\n                            </div>\n\n                            {/* 会社名 */}\n                            <div className=\"mb-6\">\n                                <h3 className=\"text-3xl md:text-4xl font-black mb-4 bg-gradient-to-r from-blue-700 to-cyan-600 bg-clip-text text-transparent\">\n                                    株式会社GFS Education\n                                </h3>\n                            </div>\n\n                            {/* 住所情報 */}\n                            <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-6 mb-6 border-2 border-blue-300 shadow-lg\">\n                                <div className=\"space-y-2 text-base md:text-lg\">\n                                    <p className=\"text-blue-700 font-semibold\">〒108-0023</p>\n                                    <p className=\"font-medium text-gray-800\">東京都港区芝浦3-9-1</p>\n                                    <p className=\"font-medium text-gray-800\">芝浦ルネサイトタワー 2F, 15F</p>\n                                </div>\n                            </div>\n\n                            {/* Great Place to Work画像 */}\n                            <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border-2 border-blue-300 shadow-lg\">\n                                <div className=\"flex items-center gap-4\">\n                                    <div className=\"relative w-32 h-24 rounded-lg overflow-hidden shadow-md flex-shrink-0\">\n                                        <Image\n                                            src=\"/slides/office_gptw.jpg\"\n                                            alt=\"Great Place to Work認定\"\n                                            fill\n                                            className=\"object-cover\"\n                                        />\n                                    </div>\n                                    <div className=\"flex-1\">\n                                        <p className=\"text-lg md:text-xl font-bold text-gray-800 mb-1\">\n                                            2022年・2023年\n                                        </p>\n                                        <p className=\"text-sm md:text-base text-blue-700 font-semibold\">\n                                            「働きがいのある会社」<br />連続認定\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* 右側: CMキャラクター画像 */}\n                        <div className=\"flex items-center justify-center\">\n                            <div className=\"relative w-full max-w-md aspect-[4/3] rounded-3xl overflow-hidden shadow-2xl border-4 border-white\">\n                                <Image\n                                    src=\"/slides/cm_character.png\"\n                                    alt=\"GFSイメージキャラクター 藤本美貴さん\"\n                                    fill\n                                    className=\"object-cover\"\n                                />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n\n        // CM動画再生スライド\n        if (slide.type === \"cm_videos\") {\n            const [selectedVideo, setSelectedVideo] = useState(0);\n            const [isPlaying, setIsPlaying] = useState(false);\n\n            return (\n                <div className=\"h-full bg-gradient-to-br from-blue-50 via-sky-100 to-cyan-50 p-6 md:p-8 flex flex-col relative overflow-y-auto\">\n                    {/* 背景装飾 */}\n                    <div className=\"absolute inset-0 opacity-5\">\n                        <div className=\"absolute top-10 left-10 w-32 h-32 bg-blue-400 rounded-full blur-3xl\"></div>\n                        <div className=\"absolute bottom-10 right-10 w-40 h-40 bg-cyan-400 rounded-full blur-3xl\"></div>\n                    </div>\n\n                    <div className=\"relative z-10 w-full max-w-6xl mx-auto\">\n                        {/* ヘッダー */}\n                        <div className=\"text-center mb-8\">\n                            <h2 className=\"text-3xl md:text-4xl font-black text-blue-900 mb-3\">\n                                {slide.title}\n                            </h2>\n                            <p className=\"text-xl md:text-2xl font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent\">\n                                {slide.description}\n                            </p>\n                        </div>\n\n                        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n                            {/* 左側: 動画サムネイル */}\n                            <div className=\"md:col-span-1 space-y-4\">\n                                {slide.videos?.map((video: { src: string; title: string }, index: number) => (\n                                    <button\n                                        key={index}\n                                        onClick={() => {\n                                            setSelectedVideo(index);\n                                            setIsPlaying(false);\n                                        }}\n                                        className={`w-full rounded-2xl overflow-hidden transition-all duration-300 ${selectedVideo === index\n                                            ? \"ring-4 ring-blue-500 shadow-2xl scale-105\"\n                                            : \"ring-2 ring-gray-300 hover:ring-blue-400 hover:scale-102\"\n                                            }`}\n                                    >\n                                        <div className=\"relative aspect-video bg-gradient-to-br from-blue-200 to-cyan-200\">\n                                            <video\n                                                src={video.src}\n                                                className=\"w-full h-full object-cover\"\n                                                preload=\"metadata\"\n                                            />\n                                            <div className=\"absolute inset-0 bg-black/20 flex items-center justify-center\">\n                                                <div className=\"bg-white/90 rounded-full p-3\">\n                                                    <svg className=\"w-6 h-6 text-blue-600\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                                        <path d=\"M8 5v14l11-7z\" />\n                                                    </svg>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div className=\"bg-white p-3 text-center border-t-2 border-blue-200\">\n                                            <p className=\"font-serif font-bold text-blue-900 tracking-wide text-sm\" style={{ letterSpacing: '0.1em' }}>{video.title}</p>\n                                        </div>\n                                    </button>\n                                ))}\n                            </div>\n\n                            {/* 右側: メイン動画プレーヤー */}\n                            <div className=\"md:col-span-3\">\n                                <div className=\"bg-white rounded-3xl shadow-2xl overflow-hidden border-4 border-blue-200\">\n                                    <div className=\"relative aspect-video bg-black\">\n                                        <video\n                                            key={selectedVideo}\n                                            src={slide.videos?.[selectedVideo].src}\n                                            controls\n                                            autoPlay={isPlaying}\n                                            className=\"w-full h-full\"\n                                            onPlay={() => setIsPlaying(true)}\n                                            onPause={() => setIsPlaying(false)}\n                                        >\n                                            お使いのブラウザは動画タグをサポートしていません。\n                                        </video>\n                                    </div>\n                                    <div className=\"bg-white p-6 text-center border-t-4 border-blue-300\">\n                                        <p className=\"text-2xl font-serif font-bold text-blue-900\" style={{ letterSpacing: '0.15em' }}>\n                                            {slide.videos?.[selectedVideo].title}\n                                        </p>\n                                    </div>\n                                </div>\n\n                                {/* 累計受講者数 */}\n                                <div className=\"mt-6 bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 rounded-3xl p-8 border-4 border-amber-400 shadow-2xl text-center relative overflow-hidden\">\n                                    <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-amber-500/10 to-transparent animate-shimmer\"></div>\n\n                                    {/* 月桂樹の装飾 - 左上 */}\n                                    <div className=\"absolute left-4 top-4\">\n                                        <svg className=\"w-16 h-16 text-amber-400 opacity-70\" viewBox=\"0 0 40 40\" fill=\"currentColor\">\n                                            <path d=\"M20 5 Q15 10, 17 15 Q12 20, 14 25 Q10 28, 12 32\" stroke=\"currentColor\" strokeWidth=\"2.5\" fill=\"none\" />\n                                            <ellipse cx=\"17\" cy=\"10\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 17 10)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"14\" cy=\"18\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-25 14 18)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"12\" cy=\"26\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 12 26)\" opacity=\"0.9\" />\n                                        </svg>\n                                    </div>\n\n                                    {/* 月桂樹の装飾 - 右上 */}\n                                    <div className=\"absolute right-4 top-4\">\n                                        <svg className=\"w-16 h-16 text-amber-400 opacity-70\" viewBox=\"0 0 40 40\" fill=\"currentColor\">\n                                            <path d=\"M20 5 Q25 10, 23 15 Q28 20, 26 25 Q30 28, 28 32\" stroke=\"currentColor\" strokeWidth=\"2.5\" fill=\"none\" />\n                                            <ellipse cx=\"23\" cy=\"10\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 23 10)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"26\" cy=\"18\" rx=\"4\" ry=\"2.5\" transform=\"rotate(25 26 18)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"28\" cy=\"26\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 28 26)\" opacity=\"0.9\" />\n                                        </svg>\n                                    </div>\n\n                                    {/* 月桂樹の装飾 - 左側 */}\n                                    <div className=\"absolute left-4 top-1/2 -translate-y-1/2\">\n                                        <svg className=\"w-12 h-24 text-amber-400 opacity-70\" viewBox=\"0 0 30 60\" fill=\"currentColor\">\n                                            <path d=\"M15 5 Q10 10, 12 15 Q7 20, 9 25 Q5 30, 7 35 Q3 40, 5 45 Q1 50, 3 55\" stroke=\"currentColor\" strokeWidth=\"2.5\" fill=\"none\" />\n                                            <ellipse cx=\"12\" cy=\"10\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 12 10)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"9\" cy=\"18\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-25 9 18)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"7\" cy=\"26\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 7 26)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"5\" cy=\"34\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-25 5 34)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"3\" cy=\"42\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 3 42)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"1\" cy=\"50\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-25 1 50)\" opacity=\"0.9\" />\n                                        </svg>\n                                    </div>\n\n                                    {/* 月桂樹の装飾 - 右側 */}\n                                    <div className=\"absolute right-4 top-1/2 -translate-y-1/2\">\n                                        <svg className=\"w-12 h-24 text-amber-400 opacity-70\" viewBox=\"0 0 30 60\" fill=\"currentColor\">\n                                            <path d=\"M15 5 Q20 10, 18 15 Q23 20, 21 25 Q25 30, 23 35 Q27 40, 25 45 Q29 50, 27 55\" stroke=\"currentColor\" strokeWidth=\"2.5\" fill=\"none\" />\n                                            <ellipse cx=\"18\" cy=\"10\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 18 10)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"21\" cy=\"18\" rx=\"4\" ry=\"2.5\" transform=\"rotate(25 21 18)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"23\" cy=\"26\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 23 26)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"25\" cy=\"34\" rx=\"4\" ry=\"2.5\" transform=\"rotate(25 25 34)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"27\" cy=\"42\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 27 42)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"29\" cy=\"50\" rx=\"4\" ry=\"2.5\" transform=\"rotate(25 29 50)\" opacity=\"0.9\" />\n                                        </svg>\n                                    </div>\n\n                                    {/* 月桂樹の装飾 - 左下 */}\n                                    <div className=\"absolute left-4 bottom-4\">\n                                        <svg className=\"w-16 h-16 text-amber-400 opacity-70\" viewBox=\"0 0 40 40\" fill=\"currentColor\">\n                                            <path d=\"M12 8 Q10 13, 12 18 Q7 23, 9 28 Q5 33, 8 38\" stroke=\"currentColor\" strokeWidth=\"2.5\" fill=\"none\" />\n                                            <ellipse cx=\"12\" cy=\"14\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 12 14)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"9\" cy=\"22\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-25 9 22)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"8\" cy=\"30\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 8 30)\" opacity=\"0.9\" />\n                                        </svg>\n                                    </div>\n\n                                    {/* 月桂樹の装飾 - 右下 */}\n                                    <div className=\"absolute right-4 bottom-4\">\n                                        <svg className=\"w-16 h-16 text-amber-400 opacity-70\" viewBox=\"0 0 40 40\" fill=\"currentColor\">\n                                            <path d=\"M28 8 Q30 13, 28 18 Q33 23, 31 28 Q35 33, 32 38\" stroke=\"currentColor\" strokeWidth=\"2.5\" fill=\"none\" />\n                                            <ellipse cx=\"28\" cy=\"14\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 28 14)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"31\" cy=\"22\" rx=\"4\" ry=\"2.5\" transform=\"rotate(25 31 22)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"32\" cy=\"30\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 32 30)\" opacity=\"0.9\" />\n                                        </svg>\n                                    </div>\n\n                                    <p className=\"text-3xl md:text-4xl font-black relative z-10\">\n                                        <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-amber-400 via-yellow-300 to-amber-400\">累計受講者数</span>\n                                        {' '}\n                                        <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 via-amber-300 to-yellow-300 text-4xl md:text-5xl\">50万人</span>\n                                        {' '}\n                                        <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-amber-400 via-yellow-300 to-amber-400\">突破！</span>\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n\n        // No.1実績スライド\n        if (slide.type === \"no1_achievements\") {\n            return (\n                <div className=\"h-full bg-gradient-to-br from-blue-50 via-indigo-100 to-blue-50 p-6 md:p-8 flex flex-col relative overflow-y-auto\">\n                    {/* 背景装飾 */}\n                    <div className=\"absolute inset-0 opacity-5\">\n                        <div className=\"absolute top-20 left-20 w-40 h-40 bg-indigo-400 rounded-full blur-3xl\"></div>\n                        <div className=\"absolute bottom-20 right-20 w-48 h-48 bg-blue-400 rounded-full blur-3xl\"></div>\n                    </div>\n\n                    <div className=\"relative z-10 w-full max-w-6xl mx-auto\">\n                        {/* ヘッダー */}\n                        <div className=\"text-center mb-8\">\n                            <h2 className=\"text-3xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-700 via-indigo-600 to-blue-700 mb-3\">\n                                {slide.title}\n                            </h2>\n                            <p className=\"text-lg md:text-xl text-gray-700 font-semibold\">\n                                {slide.description}\n                            </p>\n                        </div>\n\n                        {/* 3つのNo.1バッジ */}\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8 max-w-4xl mx-auto\">\n                            {slide.achievements?.map((achievement: { label: string; rank: string }, index: number) => (\n                                <div\n                                    key={index}\n                                    className=\"group relative\"\n                                >\n                                    {/* 外側のグロー効果 */}\n                                    <div className=\"absolute -inset-4 bg-gradient-to-r from-amber-400/20 via-yellow-300/20 to-amber-400/20 rounded-full blur-xl group-hover:blur-2xl transition-all duration-300\"></div>\n\n                                    {/* メインバッジ */}\n                                    <div\n                                        className=\"relative bg-gradient-to-br from-blue-900 via-indigo-900 to-blue-950 rounded-full aspect-square p-6 flex flex-col items-center justify-center transition-all duration-300 hover:scale-105 hover:shadow-2xl border-8 border-double border-amber-400\"\n                                        style={{\n                                            boxShadow: \"0 0 40px rgba(251, 191, 36, 0.4), inset 0 0 20px rgba(251, 191, 36, 0.1)\"\n                                        }}\n                                    >\n                                        {/* 王冠アイコン */}\n                                        <div className=\"absolute -top-8 bg-gradient-to-br from-amber-300 to-amber-500 rounded-full p-4 shadow-xl border-4 border-amber-200\">\n                                            <svg className=\"w-6 h-6 text-amber-900\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                                <path d=\"M12 2L15 8L22 9L17 14L18 21L12 18L6 21L7 14L2 9L9 8L12 2Z\" />\n                                            </svg>\n                                        </div>\n\n                                        {/* 月桂樹の装飾 - 左側 */}\n                                        <div className=\"absolute left-1 top-1/2 -translate-y-1/2\">\n                                            <svg className=\"w-10 h-20 text-amber-400 opacity-70\" viewBox=\"0 0 30 60\" fill=\"currentColor\">\n                                                {/* 茎 */}\n                                                <path d=\"M15 5 Q10 10, 12 15 Q7 20, 9 25 Q5 30, 7 35 Q3 40, 5 45 Q1 50, 3 55\" stroke=\"currentColor\" strokeWidth=\"2.5\" fill=\"none\" />\n                                                {/* 葉っぱ */}\n                                                <ellipse cx=\"12\" cy=\"10\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 12 10)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"9\" cy=\"18\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-25 9 18)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"7\" cy=\"26\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 7 26)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"5\" cy=\"34\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-25 5 34)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"3\" cy=\"42\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 3 42)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"1\" cy=\"50\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-25 1 50)\" opacity=\"0.9\" />\n                                            </svg>\n                                        </div>\n\n                                        {/* 月桂樹の装飾 - 右側 */}\n                                        <div className=\"absolute right-1 top-1/2 -translate-y-1/2\">\n                                            <svg className=\"w-10 h-20 text-amber-400 opacity-70\" viewBox=\"0 0 30 60\" fill=\"currentColor\">\n                                                {/* 茎 */}\n                                                <path d=\"M15 5 Q20 10, 18 15 Q23 20, 21 25 Q25 30, 23 35 Q27 40, 25 45 Q29 50, 27 55\" stroke=\"currentColor\" strokeWidth=\"2.5\" fill=\"none\" />\n                                                {/* 葉っぱ */}\n                                                <ellipse cx=\"18\" cy=\"10\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 18 10)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"21\" cy=\"18\" rx=\"4\" ry=\"2.5\" transform=\"rotate(25 21 18)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"23\" cy=\"26\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 23 26)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"25\" cy=\"34\" rx=\"4\" ry=\"2.5\" transform=\"rotate(25 25 34)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"27\" cy=\"42\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 27 42)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"29\" cy=\"50\" rx=\"4\" ry=\"2.5\" transform=\"rotate(25 29 50)\" opacity=\"0.9\" />\n                                            </svg>\n                                        </div>\n\n                                        {/* 内側の装飾リング - グラデーション */}\n                                        <div className=\"absolute inset-3 rounded-full border-2 border-amber-300/40\"></div>\n                                        <div className=\"absolute inset-5 rounded-full border-2 border-amber-400/30\"></div>\n                                        <div className=\"absolute inset-7 rounded-full border border-yellow-300/20\"></div>\n\n                                        {/* 回転するグラデーションリング */}\n                                        <div className=\"absolute inset-2 rounded-full opacity-30\">\n                                            <div className=\"w-full h-full rounded-full bg-gradient-to-r from-transparent via-amber-300 to-transparent animate-spin\" style={{ animationDuration: '8s' }}></div>\n                                        </div>\n\n                                        {/* コンテンツ */}\n                                        <div className=\"text-center relative z-10\">\n                                            <p className=\"text-amber-100 text-xl md:text-2xl font-bold mb-2 drop-shadow-lg tracking-wide\">\n                                                {achievement.label}\n                                            </p>\n                                            <p className=\"text-amber-300 text-4xl md:text-5xl font-black tracking-wider drop-shadow-2xl\" style={{ letterSpacing: '0.05em' }}>\n                                                {achievement.rank}\n                                            </p>\n                                        </div>\n\n                                        {/* ホバー時のグロー効果 */}\n                                        <div className=\"absolute inset-0 rounded-full bg-gradient-to-br from-amber-400/0 to-amber-400/0 group-hover:from-amber-400/20 group-hover:to-amber-400/10 transition-all duration-300\"></div>\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n\n                        {/* 東京商工リサーチのテキスト */}\n                        <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-6 mb-6 border-2 border-indigo-300 shadow-lg text-center\">\n                            <p className=\"text-lg md:text-xl text-gray-800 font-semibold\">\n                                東京商工リサーチ調べで、オンライン投資スクールとして<br />\n                                <span className=\"text-indigo-700 font-black\">3つの分野で1位</span>を獲得しています\n                            </p>\n                        </div>\n\n                        {/* 受講者数 */}\n                        <div className=\"bg-gradient-to-r from-indigo-600 via-blue-600 to-indigo-600 rounded-3xl p-8 shadow-2xl border-4 border-amber-400 text-center\">\n                            <p className=\"text-white text-2xl md:text-3xl font-bold mb-2\">\n                                現役生徒数\n                            </p>\n                            <p className=\"text-amber-300 text-5xl md:text-6xl font-black mb-2\">\n                                {slide.students}\n                            </p>\n                            <p className=\"text-white text-4xl md:text-5xl font-black mb-3\">\n                                を突破！\n                            </p>\n                            <p className=\"text-amber-200 text-base md:text-lg\">\n                                {slide.note}\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n\n        // 生徒実績スライド\n        if (slide.type === \"student_achievements\") {\n            const maxAmount = Math.max(...(slide.barChart?.data.map((d: { amount: number }) => d.amount) || [300]));\n\n            return (\n                <div className=\"h-full bg-gradient-to-br from-blue-50 via-indigo-50 to-blue-50 p-6 md:p-8 flex flex-col relative overflow-y-auto\">\n                    {/* 背景装飾 */}\n                    <div className=\"absolute inset-0 opacity-5\">\n                        <div className=\"absolute top-20 right-20 w-40 h-40 bg-pink-400 rounded-full blur-3xl\"></div>\n                        <div className=\"absolute bottom-20 left-20 w-48 h-48 bg-blue-400 rounded-full blur-3xl\"></div>\n                    </div>\n\n                    <div className=\"relative z-10 w-full max-w-6xl mx-auto\">\n                        {/* ヘッダー */}\n                        <div className=\"text-center mb-6\">\n                            <h2 className=\"text-3xl md:text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-700 via-indigo-600 to-blue-700 mb-3\">\n                                {slide.title}\n                            </h2>\n                            <p className=\"text-base md:text-lg text-gray-700 font-semibold bg-blue-900 text-white px-6 py-3 rounded-lg inline-block\">\n                                {slide.description}\n                            </p>\n                        </div>\n\n                        {/* 2カラムレイアウト */}\n                        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                            {/* 左: 円グラフ */}\n                            <div className=\"bg-white/90 backdrop-blur-sm rounded-3xl p-6 shadow-xl border-2 border-indigo-200\">\n                                <div className=\"text-center mb-6\">\n                                    <h3 className=\"text-xl md:text-2xl font-bold text-gray-800\">\n                                        {slide.pieChart?.title}\n                                    </h3>\n                                </div>\n\n                                {/* 円グラフ */}\n                                <div className=\"flex items-center justify-center relative pt-8\">\n                                    {/* 左側のラベル（投資経験者 34%） */}\n                                    <div className=\"absolute -left-2 md:left-2 top-1/2 -translate-y-1/2 animate-fade-in-left z-10\" style={{ animationDelay: '2s' }}>\n                                        <div className=\"text-right pr-2 bg-white/90 backdrop-blur-sm rounded-lg p-2 shadow-md\">\n                                            <p className=\"text-xs md:text-sm font-semibold text-blue-400\">\n                                                投資経験者\n                                            </p>\n                                            <p className=\"text-2xl md:text-3xl font-black text-blue-400\">\n                                                34%\n                                            </p>\n                                        </div>\n                                    </div>\n\n                                    {/* 右側のラベル（投資初心者 66%） */}\n                                    <div className=\"absolute -right-2 md:right-2 top-1/2 -translate-y-1/2 animate-fade-in-right z-10\" style={{ animationDelay: '1.2s' }}>\n                                        <div className=\"text-left pl-2 bg-white/90 backdrop-blur-sm rounded-lg p-2 shadow-md\">\n                                            <p className=\"text-xs md:text-sm font-semibold text-blue-900\">\n                                                投資初心者\n                                            </p>\n                                            <p className=\"text-2xl md:text-3xl font-black text-blue-900\">\n                                                66%\n                                            </p>\n                                        </div>\n                                    </div>\n\n                                    {/* SVG円グラフ */}\n                                    <svg className=\"w-64 h-64 md:w-72 md:h-72\" viewBox=\"0 0 200 200\">\n                                        {/* 背景の円（投資経験者 34% - ライトブルー） */}\n                                        <circle\n                                            cx=\"100\"\n                                            cy=\"100\"\n                                            r=\"70\"\n                                            fill=\"none\"\n                                            stroke=\"#60a5fa\"\n                                            strokeWidth=\"50\"\n                                            className=\"animate-fade-in-circle\"\n                                            key={`bg-circle-${currentSlide}`}\n                                        />\n\n                                        {/* 投資初心者 66% - ネイビーブルー（上に重ねる） */}\n                                        <circle\n                                            cx=\"100\"\n                                            cy=\"100\"\n                                            r=\"70\"\n                                            fill=\"none\"\n                                            stroke=\"#1e3a8a\"\n                                            strokeWidth=\"55\"\n                                            strokeDasharray=\"440\"\n                                            strokeDashoffset=\"440\"\n                                            transform=\"rotate(-90 100 100)\"\n                                            className=\"animate-fill-pie\"\n                                            key={`main-circle-${currentSlide}`}\n                                        />\n\n                                        {/* 中央の白い円 */}\n                                        <circle\n                                            cx=\"100\"\n                                            cy=\"100\"\n                                            r=\"40\"\n                                            fill=\"white\"\n                                            className=\"animate-scale-center\"\n                                            key={`center-circle-${currentSlide}`}\n                                        />\n                                    </svg>\n                                </div>\n                            </div>\n\n                            {/* 右: 棒グラフ */}\n                            <div className=\"bg-white/90 backdrop-blur-sm rounded-3xl p-6 shadow-xl border-2 border-indigo-200\">\n                                <div className=\"text-center mb-4\">\n                                    <h3 className=\"text-xl md:text-2xl font-bold text-gray-800 mb-2\">\n                                        {slide.barChart?.title}\n                                    </h3>\n                                    <p className=\"text-sm md:text-base font-bold text-white bg-blue-900 px-4 py-2 rounded-lg inline-block\">\n                                        {slide.barChart?.subtitle}\n                                    </p>\n                                </div>\n\n                                {/* 棒グラフ */}\n                                <div className=\"relative h-80 mb-4\">\n                                    <div className=\"absolute inset-0 flex items-end justify-around px-4\">\n                                        {slide.barChart?.data.map((item: { amount: number; highlight?: boolean; color: string; period: string }, index: number) => (\n                                            <div key={index} className=\"flex flex-col items-center flex-1 mx-1 h-full\">\n                                                {/* 金額ラベル */}\n                                                <div className={`text-base md:text-xl font-black mb-2 ${item.highlight ? 'text-red-600' : 'text-pink-600'}`}>\n                                                    約{item.amount}万円\n                                                </div>\n\n                                                {/* 棒のコンテナ */}\n                                                <div className=\"flex-1 w-full flex items-end\">\n                                                    {/* 棒 */}\n                                                    <div\n                                                        key={`bar-${index}-${currentSlide}`}\n                                                        className={`w-full ${item.color} rounded-t-xl transition-all duration-1000 ease-out relative group hover:opacity-90 ${item.highlight ? 'scale-105 border-4 border-yellow-600' : ''}`}\n                                                        style={{\n                                                            height: `${(item.amount / maxAmount) * 100}%`,\n                                                            animation: `growUpSequence 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) ${index * 0.4}s both`,\n                                                            boxShadow: item.highlight ? '0 0 30px rgba(234, 179, 8, 0.8), 0 0 60px rgba(234, 179, 8, 0.4)' : '0 0 10px rgba(59, 130, 246, 0.3)',\n                                                            minHeight: '20px'\n                                                        }}\n                                                    >\n                                                        {/* ホバー時のグロー効果 */}\n                                                        <div className=\"absolute inset-0 bg-gradient-to-t from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-t-xl\"></div>\n                                                    </div>\n                                                </div>\n\n                                                {/* 期間ラベル */}\n                                                <div className=\"mt-3 text-center\">\n                                                    <div className=\"bg-blue-900 text-white px-2 py-1.5 rounded-lg text-xs font-bold whitespace-nowrap\">\n                                                        {item.period}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        ))}\n                                    </div>\n                                </div>\n\n                                {/* 注釈 */}\n                                <p className=\"text-xs text-gray-600 text-center mt-2\">\n                                    {slide.barChart?.note}\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* アニメーション用のスタイル */}\n                    <style jsx>{`\n                        @keyframes growUp {\n                            0% {\n                                height: 0 !important;\n                                opacity: 0;\n                                transform: scaleY(0);\n                            }\n                            70% {\n                                transform: scaleY(1.05);\n                            }\n                            100% {\n                                opacity: 1;\n                                transform: scaleY(1);\n                            }\n                        }\n                        \n                        .animate-grow-bar {\n                            animation: growUp 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) both;\n                            transform-origin: bottom;\n                        }\n                        \n                        @keyframes scaleIn {\n                            0% {\n                                transform: scale(0) rotate(0deg);\n                                opacity: 0;\n                            }\n                            50% {\n                                transform: scale(1.1) rotate(180deg);\n                            }\n                            100% {\n                                transform: scale(1) rotate(360deg);\n                                opacity: 1;\n                            }\n                        }\n                        \n                        .animate-scale-in {\n                            animation: scaleIn 1s ease-out both;\n                        }\n                        \n                        @keyframes fadeInLeft {\n                            0% {\n                                opacity: 0;\n                                transform: translateX(-30px) translateY(-50%);\n                            }\n                            100% {\n                                opacity: 1;\n                                transform: translateX(0) translateY(-50%);\n                            }\n                        }\n                        \n                        .animate-fade-in-left {\n                            animation: fadeInLeft 0.8s ease-out both;\n                        }\n                        \n                        @keyframes fadeInRight {\n                            0% {\n                                opacity: 0;\n                                transform: translateX(30px) translateY(-50%);\n                            }\n                            100% {\n                                opacity: 1;\n                                transform: translateX(0) translateY(-50%);\n                            }\n                        }\n                        \n                        .animate-fade-in-right {\n                            animation: fadeInRight 0.8s ease-out both;\n                        }\n                        \n                        @keyframes fadeInCircle {\n                            0% {\n                                opacity: 0;\n                                transform: scale(0.8);\n                            }\n                            100% {\n                                opacity: 1;\n                                transform: scale(1);\n                            }\n                        }\n                        \n                        .animate-fade-in-circle {\n                            animation: fadeInCircle 0.6s ease-out both;\n                        }\n                        \n                        @keyframes fillPie {\n                            0% {\n                                stroke-dashoffset: 440;\n                                opacity: 0;\n                            }\n                            10% {\n                                opacity: 1;\n                            }\n                            100% {\n                                stroke-dashoffset: ${440 - 66 * 4.4};\n                                opacity: 1;\n                            }\n                        }\n                        \n                        .animate-fill-pie {\n                            animation: fillPie 2s cubic-bezier(0.4, 0, 0.2, 1) 0.6s both;\n                        }\n                        \n                        @keyframes scaleCenter {\n                            0% {\n                                transform: scale(0);\n                                opacity: 0;\n                            }\n                            50% {\n                                transform: scale(0);\n                                opacity: 0;\n                            }\n                            100% {\n                                transform: scale(1);\n                                opacity: 1;\n                            }\n                        }\n                        \n                        .animate-scale-center {\n                            animation: scaleCenter 2s ease-out both;\n                        }\n                        \n                        @keyframes growUpSequence {\n                            0% {\n                                height: 0 !important;\n                                opacity: 0;\n                                transform: scaleY(0);\n                            }\n                            70% {\n                                transform: scaleY(1.08);\n                            }\n                            100% {\n                                opacity: 1;\n                                transform: scaleY(1);\n                            }\n                        }\n                    `}</style>\n                </div>\n            );\n        }\n\n        if (slide.type === \"learning_method_comparison\") {\n            return (\n                <div className=\"relative h-full flex flex-col bg-white p-8 overflow-y-auto scroll-smooth\" style={{ willChange: 'scroll-position' }}>\n                    {/* タイトルとサブタイトル */}\n                    <div className=\"text-center mb-8 animate-fade-in-down\">\n                        <h2 className=\"text-3xl md:text-5xl font-black text-gray-900 mb-3\">\n                            {slide.title}\n                        </h2>\n                        <p className=\"text-lg md:text-2xl font-bold text-blue-600\">\n                            {slide.subtitle}\n                        </p>\n                    </div>\n\n                    {/* 2カラム比較レイアウト */}\n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-7xl mx-auto w-full flex-1\">\n                        {/* 左側: 独学の場合 */}\n                        <div className=\"bg-white rounded-3xl p-6 md:p-8 shadow-xl border-2 border-gray-200 animate-slide-in-left flex flex-col\">\n                            {/* タイトル */}\n                            <div className=\"bg-gray-600 text-white text-center py-4 rounded-xl mb-6 shadow-lg\">\n                                <h3 className=\"text-2xl md:text-3xl font-bold\">{slide.selfStudy?.title}</h3>\n                            </div>\n\n                            {/* 困っている人のイラスト */}\n                            <div className=\"text-center mb-6 animate-bounce-slow\">\n                                <div className=\"relative w-48 h-48 md:w-56 md:h-56 mx-auto\">\n                                    <Image\n                                        src=\"/slides/confused_person_v2.png\"\n                                        alt=\"困っている人\"\n                                        fill\n                                        className=\"object-contain\"\n                                    />\n                                </div>\n                                <p className=\"text-gray-600 font-semibold text-lg mt-2\">情報が混乱...</p>\n                            </div>\n\n                            {/* フラフラ曲線と問題点の統合ビジュアル */}\n                            <div className=\"relative flex-1 min-h-[500px] flex items-center justify-center\">\n                                <svg viewBox=\"0 0 400 600\" className=\"w-full h-full max-w-md mx-auto\">\n                                    <defs>\n                                        <marker id=\"arrowhead-gray-vertical\" markerWidth=\"10\" markerHeight=\"10\"\n                                            refX=\"5\" refY=\"5\" orient=\"auto\">\n                                            <polygon points=\"0 0, 10 5, 0 10\" fill=\"#6b7280\" />\n                                        </marker>\n                                    </defs>\n\n                                    {/* フラフラ曲線 - 縦軸で大きく左右に揺れる */}\n                                    <path\n                                        d=\"M 200 50 \n                                           C 120 120, 120 150, 200 200\n                                           C 280 250, 280 280, 200 330\n                                           C 120 380, 120 410, 200 460\n                                           L 200 550\"\n                                        stroke=\"#6b7280\"\n                                        strokeWidth=\"5\"\n                                        fill=\"none\"\n                                        strokeDasharray=\"10,5\"\n                                        markerEnd=\"url(#arrowhead-gray-vertical)\"\n                                        className=\"animate-draw-path-vertical\"\n                                    />\n\n                                    {/* 現在ラベル */}\n                                    <text x=\"200\" y=\"35\" className=\"text-xl font-bold fill-gray-700\" textAnchor=\"middle\">現在</text>\n\n                                    {/* 理想ラベル */}\n                                    <text x=\"200\" y=\"585\" className=\"text-xl font-bold fill-gray-700\" textAnchor=\"middle\">理想</text>\n\n                                    {/* 問題点1 - 左側の屈曲部 */}\n                                    <g className=\"animate-fade-in-up\" style={{ animationDelay: '0.3s' }}>\n                                        <foreignObject x=\"10\" y=\"110\" width=\"150\" height=\"80\">\n                                            <div className=\"flex items-start gap-2 bg-white p-3 rounded-lg shadow-lg border-2 border-red-200\">\n                                                <span className=\"text-red-500 text-xl flex-shrink-0\">❌</span>\n                                                <p className=\"text-gray-700 font-medium text-sm\">{slide.selfStudy?.problems[0]}</p>\n                                            </div>\n                                        </foreignObject>\n                                    </g>\n\n                                    {/* 問題点2 - 右側の屈曲部 */}\n                                    <g className=\"animate-fade-in-up\" style={{ animationDelay: '0.5s' }}>\n                                        <foreignObject x=\"240\" y=\"240\" width=\"150\" height=\"80\">\n                                            <div className=\"flex items-start gap-2 bg-white p-3 rounded-lg shadow-lg border-2 border-red-200\">\n                                                <span className=\"text-red-500 text-xl flex-shrink-0\">❌</span>\n                                                <p className=\"text-gray-700 font-medium text-sm\">{slide.selfStudy?.problems[1]}</p>\n                                            </div>\n                                        </foreignObject>\n                                    </g>\n\n                                    {/* 問題点3 - 左側の屈曲部 */}\n                                    <g className=\"animate-fade-in-up\" style={{ animationDelay: '0.7s' }}>\n                                        <foreignObject x=\"10\" y=\"370\" width=\"150\" height=\"80\">\n                                            <div className=\"flex items-start gap-2 bg-white p-3 rounded-lg shadow-lg border-2 border-red-200\">\n                                                <span className=\"text-red-500 text-xl flex-shrink-0\">❌</span>\n                                                <p className=\"text-gray-700 font-medium text-sm\">{slide.selfStudy?.problems[2]}</p>\n                                            </div>\n                                        </foreignObject>\n                                    </g>\n                                </svg>\n                            </div>\n\n                        </div>\n\n                        {/* 右側: GFSの場合 */}\n                        <div className=\"bg-white rounded-3xl p-6 md:p-8 shadow-xl border-2 border-blue-300 animate-slide-in-right flex flex-col\">\n                            {/* タイトル */}\n                            <div className=\"bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-center py-4 rounded-xl mb-4 shadow-lg\">\n                                <h3 className=\"text-2xl md:text-3xl font-bold\">{slide.gfsMethod?.title}</h3>\n                            </div>\n\n                            {/* サブタイトル */}\n                            <div className=\"text-center text-blue-900 font-bold text-base md:text-lg mb-6 leading-relaxed\">\n                                <p>未経験者でも3ヶ月で投資ができる</p>\n                                <p>学習プログラムを提供</p>\n                            </div>\n\n                            {/* 笑顔の人のイラスト */}\n                            <div className=\"text-center mb-6 animate-scale-in\">\n                                <div className=\"relative w-48 h-48 md:w-56 md:h-56 mx-auto\">\n                                    <Image\n                                        src=\"/slides/happy_person_v2.png\"\n                                        alt=\"笑顔の人\"\n                                        fill\n                                        className=\"object-contain\"\n                                    />\n                                </div>\n                            </div>\n\n                            {/* まっすぐなパスとプログラムの統合ビジュアル */}\n                            <div className=\"relative flex-1 min-h-[500px] flex items-center justify-center\">\n                                <svg viewBox=\"0 0 400 600\" className=\"w-full h-full max-w-md mx-auto\">\n                                    <defs>\n                                        <marker id=\"arrowhead-blue-vertical\" markerWidth=\"10\" markerHeight=\"10\"\n                                            refX=\"5\" refY=\"5\" orient=\"auto\">\n                                            <polygon points=\"0 0, 10 5, 0 10\" fill=\"#3b82f6\" />\n                                        </marker>\n                                        <marker id=\"arrowhead-orange-vertical\" markerWidth=\"10\" markerHeight=\"10\"\n                                            refX=\"5\" refY=\"5\" orient=\"auto\">\n                                            <polygon points=\"0 0, 10 5, 0 10\" fill=\"#fb923c\" />\n                                        </marker>\n                                    </defs>\n\n                                    {/* 専任コンサル用の2本目の軸（伴走型） */}\n                                    <line\n                                        x1=\"270\" y1=\"50\"\n                                        x2=\"270\" y2=\"550\"\n                                        stroke=\"#fb923c\"\n                                        strokeWidth=\"4\"\n                                        strokeDasharray=\"8,4\"\n                                        markerEnd=\"url(#arrowhead-orange-vertical)\"\n                                        className=\"animate-draw-line-vertical\"\n                                        style={{ animationDelay: '0.2s' }}\n                                    />\n\n                                    {/* ホバー時の接続線 (オレンジ軸 -> 青軸) */}\n                                    {hoveredProgram !== null && (\n                                        <line\n                                            x1=\"270\" y1={[110, 240, 370, 500][hoveredProgram]}\n                                            x2=\"110\" y2={[110, 240, 370, 500][hoveredProgram]}\n                                            stroke=\"#fb923c\"\n                                            strokeWidth=\"3\"\n                                            strokeDasharray=\"4,2\"\n                                            className=\"animate-draw-line-horizontal\"\n                                        />\n                                    )}\n\n                                    {/* 専任コンサル軸の結節点（同期） */}\n                                    <g className=\"animate-fade-in\" style={{ animationDelay: '0.8s' }}>\n                                        <circle cx=\"270\" cy=\"110\" r=\"5\" fill=\"#fb923c\" />\n                                        <circle cx=\"270\" cy=\"240\" r=\"5\" fill=\"#fb923c\" />\n                                        <circle cx=\"270\" cy=\"370\" r=\"5\" fill=\"#fb923c\" />\n                                        <circle cx=\"270\" cy=\"500\" r=\"5\" fill=\"#fb923c\" />\n                                    </g>\n\n                                    {/* まっすぐな矢印 - 縦軸 */}\n                                    <line\n                                        x1=\"110\" y1=\"50\"\n                                        x2=\"110\" y2=\"550\"\n                                        stroke=\"#3b82f6\"\n                                        strokeWidth=\"6\"\n                                        markerEnd=\"url(#arrowhead-blue-vertical)\"\n                                        className=\"animate-draw-line-vertical\"\n                                    />\n\n                                    {/* 現在ラベル */}\n                                    <text x=\"110\" y=\"35\" className=\"text-xl font-black fill-blue-700\" textAnchor=\"middle\">現在</text>\n                                    <text x=\"270\" y=\"22\" className=\"text-xs md:text-sm font-black fill-orange-600\" textAnchor=\"middle\">\n                                        <tspan x=\"270\" dy=\"0\">専任コンサルタントによる</tspan>\n                                        <tspan x=\"270\" dy=\"1.4em\">充実したサポート</tspan>\n                                    </text>\n\n                                    {/* 理想ラベル */}\n                                    <text x=\"190\" y=\"585\" className=\"text-4xl md:text-5xl font-black fill-blue-800 drop-shadow-sm\" textAnchor=\"middle\">理想</text>\n\n                                    {/* 各プログラムステップ */}\n                                    {[\n                                        { y: 110, delay: '0.3s', desc: \"あなたに最適な学習プランを提案\" },\n                                        { y: 240, delay: '0.4s', desc: \"あなたの目標設計をサポート\" },\n                                        { y: 370, delay: '0.5s', desc: \"あなたにピッタリな\\n分析・戦略を\\n一緒に考えます\" },\n                                        { y: 500, delay: '0.6s', desc: \"疑問・不安を\\n丸ごと解決\" }\n                                    ].map((step, idx) => (\n                                        <g\n                                            key={idx}\n                                            className=\"animate-fade-in-up cursor-pointer transition-all duration-300\"\n                                            style={{ animationDelay: step.delay }}\n                                            onMouseEnter={() => setHoveredProgram(idx)}\n                                            onMouseLeave={() => setHoveredProgram(null)}\n                                        >\n                                            {/* 青い結節点 */}\n                                            <circle\n                                                cx=\"110\" cy={step.y} r={hoveredProgram === idx ? 10 : 8}\n                                                fill=\"#3b82f6\"\n                                                className=\"transition-all duration-300\"\n                                            />\n\n                                            {/* ラベルボックス */}\n                                            <foreignObject x=\"0\" y={step.y - 30} width=\"110\" height=\"60\">\n                                                <div className={`flex items-center justify-center bg-white p-1 rounded-lg border-2 transition-all duration-300 origin-center ${hoveredProgram === idx ? 'shadow-xl scale-110 border-blue-400' : 'shadow-md border-blue-200'}`}>\n                                                    <p className=\"text-blue-900 font-bold text-[10px] items-center leading-tight whitespace-pre-line text-center\">\n                                                        {slide.gfsMethod?.programs[idx]}\n                                                    </p>\n                                                </div>\n                                            </foreignObject>\n\n                                            {/* 専任コンサル詳細ボックス（ホバー時） */}\n                                            {hoveredProgram === idx && (\n                                                <g className=\"animate-fade-in\">\n                                                    <foreignObject x=\"285\" y={step.y - 30} width=\"110\" height=\"70\">\n                                                        <div className=\"bg-orange-50 border-2 border-orange-400 p-2 rounded-xl shadow-lg flex items-center justify-center relative\">\n                                                            <div className=\"absolute -left-2 top-1/2 -translate-y-1/2 w-0 h-0 border-t-8 border-t-transparent border-b-8 border-b-transparent border-r-8 border-r-orange-400\"></div>\n                                                            <p className=\"text-orange-800 font-bold text-[10px] leading-snug whitespace-pre-line text-center\">\n                                                                {step.desc}\n                                                            </p>\n                                                        </div>\n                                                    </foreignObject>\n                                                </g>\n                                            )}\n                                        </g>\n                                    ))}\n                                </svg>\n                            </div>\n\n                        </div>\n                    </div>\n\n                    {/* アニメーション用のスタイル */}\n                    <style jsx>{`\n                        @keyframes drawPath {\n                            from {\n                                stroke-dashoffset: 1000;\n                            }\n                            to {\n                                stroke-dashoffset: 0;\n                            }\n                        }\n\n                        .animate-draw-path {\n                            stroke-dasharray: 1000;\n                            animation: drawPath 2.5s ease-out 0.5s forwards;\n                        }\n\n                        @keyframes drawLine {\n                            from {\n                                stroke-dashoffset: 300;\n                            }\n                            to {\n                                stroke-dashoffset: 0;\n                            }\n                        }\n\n                        .animate-draw-line {\n                            stroke-dasharray: 300;\n                            animation: drawLine 1.5s ease-out 0.5s forwards;\n                        }\n\n                        @keyframes drawPathVertical {\n                            from {\n                                stroke-dashoffset: 1500;\n                            }\n                            to {\n                                stroke-dashoffset: 0;\n                            }\n                        }\n\n                        .animate-draw-path-vertical {\n                            stroke-dasharray: 1500;\n                            animation: drawPathVertical 3s ease-out 0.5s forwards;\n                        }\n\n                        @keyframes drawLineHorizontal {\n                            from {\n                                stroke-dashoffset: 200;\n                            }\n                            to {\n                                stroke-dashoffset: 0;\n                            }\n                        }\n\n                        .animate-draw-line-horizontal {\n                            stroke-dasharray: 200;\n                            animation: drawLineHorizontal 0.4s ease-out forwards;\n                        }\n\n                        @keyframes drawLineVertical {\n                            from {\n                                stroke-dashoffset: 500;\n                            }\n                            to {\n                                stroke-dashoffset: 0;\n                            }\n                        }\n\n                        .animate-draw-line-vertical {\n                            stroke-dasharray: 500;\n                            animation: drawLineVertical 2s ease-out 0.5s forwards;\n                        }\n\n                        @keyframes slideInLeft {\n                            from {\n                                opacity: 0;\n                                transform: translateX(-50px);\n                            }\n                            to {\n                                opacity: 1;\n                                transform: translateX(0);\n                            }\n                        }\n\n                        .animate-slide-in-left {\n                            animation: slideInLeft 0.8s ease-out forwards;\n                        }\n\n                        @keyframes slideInRight {\n                            from {\n                                opacity: 0;\n                                transform: translateX(50px);\n                            }\n                            to {\n                                opacity: 1;\n                                transform: translateX(0);\n                            }\n                        }\n\n                        .animate-slide-in-right {\n                            animation: slideInRight 0.8s ease-out forwards;\n                        }\n\n                        @keyframes bounceSlow {\n                            0%, 100% {\n                                transform: translateY(0);\n                            }\n                            50% {\n                                transform: translateY(-10px);\n                            }\n                        }\n\n                        .animate-bounce-slow {\n                            animation: bounceSlow 2s ease-in-out infinite;\n                        }\n                    `}</style>\n                </div>\n            );\n        }\n\n        if (slide.type === \"image\") {\n            return (\n                <div className=\"relative h-full flex flex-col items-center justify-center bg-white p-8\">\n                    {/* 画像をトリミングして表示 */}\n                    <div className=\"relative w-full h-full max-w-5xl\">\n                        <Image\n                            src={slide.image!}\n                            alt={slide.title}\n                            fill\n                            className=\"object-contain\"\n                            style={{ objectPosition: slide.objectPosition || \"center center\" }}\n                            priority={currentSlide === 0}\n                        />\n                    </div>\n                </div>\n            );\n        }\n\n        // カスタムスライド\n        return (\n            <div className={`relative h-full bg-gradient-to-br ${slide.color} p-8 md:p-12 flex flex-col justify-center text-white overflow-hidden`}>\n                {/* キャラクター画像1 - 右下に配置 */}\n                {slide.characterImage && (\n                    <div className=\"absolute right-4 bottom-4 w-48 h-48 md:w-64 md:h-64 opacity-30 animate-float pointer-events-none z-10\">\n                        <Image\n                            src={slide.characterImage}\n                            alt=\"キャラクター\"\n                            fill\n                            className=\"object-contain\"\n                        />\n                    </div>\n                )}\n\n                {/* キャラクター画像2 - 斜め左上にずらして配置（重ならないように） */}\n                {slide.characterImage2 && (\n                    <div className=\"absolute right-48 bottom-40 w-48 h-48 md:w-64 md:h-64 opacity-30 animate-float pointer-events-none z-20\" style={{ animationDelay: '0.5s' }}>\n                        <Image\n                            src={slide.characterImage2}\n                            alt=\"キャラクター2\"\n                            fill\n                            className=\"object-contain\"\n                        />\n                    </div>\n                )}\n\n                <div className=\"max-w-4xl mx-auto w-full relative z-10\">\n                    <div className=\"flex items-center gap-4 mb-6\">\n                        {slide.icon && <slide.icon className=\"w-12 h-12 md:w-16 md:h-16 animate-bounce-gentle\" />}\n                        <h2 className=\"text-3xl md:text-4xl font-bold\">{slide.title}</h2>\n                    </div>\n\n                    <div className=\"space-y-4\">\n                        <h3 className=\"text-2xl md:text-3xl font-bold mb-2\">\n                            {slide.content?.heading}\n                        </h3>\n                        {slide.content?.subheading && (\n                            <p className=\"text-xl md:text-2xl opacity-90 mb-6\">\n                                {slide.content.subheading}\n                            </p>\n                        )}\n                        <ul className=\"space-y-3 md:space-y-4\">\n                            {slide.content?.points.map((point: string, index: number) => (\n                                <li key={index} className=\"flex items-start gap-3 text-lg md:text-xl\">\n                                    <CheckCircle className=\"w-6 h-6 md:w-7 md:h-7 shrink-0 mt-1\" />\n                                    <span>{point}</span>\n                                </li>\n                            ))}\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        );\n    };\n\n    return (\n        <div className=\"min-h-screen relative overflow-hidden bg-gradient-to-br from-slate-50 via-blue-50 to-white\">\n            {/* 背景のマスコット画像 */}\n            <div className=\"absolute inset-0 pointer-events-none\">\n                <Image\n                    src=\"/mascot/mascot_happy.png\"\n                    alt=\"\"\n                    width={250}\n                    height={250}\n                    className=\"absolute -top-10 -right-10 opacity-10 animate-float-slow\"\n                />\n                <Image\n                    src=\"/mascot/mascot_search.png\"\n                    alt=\"\"\n                    width={200}\n                    height={200}\n                    className=\"absolute bottom-20 -left-10 opacity-10 animate-float-delayed\"\n                />\n            </div>\n\n            <div className=\"relative z-10 min-h-screen py-8 px-4\">\n                <div className=\"max-w-6xl mx-auto\">\n                    {/* 戻るボタン */}\n                    <div className=\"mb-4\">\n                        <Button\n                            variant=\"outline\"\n                            onClick={onBack}\n                            className=\"flex items-center gap-2\"\n                        >\n                            <ArrowLeft className=\"w-4 h-4\" />\n                            目次に戻る\n                        </Button>\n                    </div>\n\n                    {/* セクションヘッダー */}\n                    <div className={`text-center mb-8 transition-all duration-700 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                        <div className=\"flex justify-between items-center mb-4 max-w-4xl mx-auto px-4\">\n                            <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                onClick={onBack}\n                                className=\"text-gray-500 hover:text-primary transition-colors\"\n                            >\n                                <ChevronLeft className=\"w-4 h-4 mr-1\" />\n                                戻る\n                            </Button>\n                            <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                onClick={onGoToAgenda}\n                                className=\"text-gray-500 hover:text-primary transition-colors\"\n                            >\n                                <FileText className=\"w-4 h-4 mr-1\" />\n                                目次\n                            </Button>\n                        </div>\n                        <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-primary/10 backdrop-blur rounded-full mb-4\">\n                            <span className=\"text-primary font-bold\">Section 01</span>\n                            <span className=\"text-gray-400\">/</span>\n                            <span className=\"text-gray-600\">簡単に弊社のご紹介</span>\n                        </div>\n                        <h1 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-2\">\n                            GFSへようこそ\n                        </h1>\n                        <p className=\"text-gray-600\">\n                            まずはGFSについてご紹介させてください\n                        </p>\n                    </div>\n\n                    {/* メインスライド */}\n                    <div className={`relative mb-8 transition-all duration-700 delay-200 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                        <div className=\"bg-white rounded-3xl shadow-2xl overflow-hidden\">\n                            {/* スライドコンテンツ */}\n                            <div\n                                ref={scrollContainerRef}\n                                className=\"relative h-96 md:h-[600px] overflow-y-auto\"\n                            >\n                                {slides.map((slide, index) => (\n                                    <div\n                                        key={index}\n                                        className={`absolute inset-0 transition-all duration-700 ${index === currentSlide\n                                            ? \"opacity-100 scale-100\"\n                                            : \"opacity-0 scale-95 pointer-events-none\"\n                                            }`}\n                                    >\n                                        {renderSlide(slide)}\n                                    </div>\n                                ))}\n                            </div>\n\n                            {/* ナビゲーション */}\n                            <div className=\"flex items-center justify-between p-4 bg-gray-50 border-t\">\n                                <button\n                                    onClick={prevSlide}\n                                    className=\"p-2 rounded-full hover:bg-gray-200 transition\"\n                                    aria-label=\"前のスライド\"\n                                >\n                                    <ChevronLeft className=\"w-6 h-6 text-gray-600\" />\n                                </button>\n\n                                <div className=\"flex items-center gap-3\">\n                                    <div className=\"flex gap-2\">\n                                        {slides.map((_, index) => (\n                                            <button\n                                                key={index}\n                                                onClick={() => goToSlide(index)}\n                                                className={`transition-all ${index === currentSlide\n                                                    ? \"w-8 h-3 bg-primary rounded-full\"\n                                                    : \"w-3 h-3 bg-gray-300 rounded-full hover:bg-gray-400\"\n                                                    }`}\n                                                aria-label={`スライド${index + 1}へ`}\n                                            />\n                                        ))}\n                                    </div>\n                                </div>\n\n                                <button\n                                    onClick={nextSlide}\n                                    className=\"p-2 rounded-full hover:bg-gray-200 transition\"\n                                    aria-label=\"次のスライド\"\n                                >\n                                    <ChevronRight className=\"w-6 h-6 text-gray-600\" />\n                                </button>\n                            </div>\n                        </div>\n\n                        {/* スライドタイトルと説明 */}\n                        <div className=\"mt-4 text-center\">\n                            <h3 className=\"text-xl font-bold text-gray-800 mb-1\">\n                                {slides[currentSlide].title}\n                            </h3>\n                            {slides[currentSlide].description && (\n                                <p className=\"text-gray-600\">\n                                    {slides[currentSlide].description}\n                                </p>\n                            )}\n                        </div>\n                    </div>\n\n                    {/* 次へボタン */}\n                    <div className={`text-center transition-all duration-700 delay-700 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                        <Button\n                            onClick={onNext}\n                            size=\"lg\"\n                            className=\"min-w-64 text-lg h-14 shadow-xl animate-pulse-border\"\n                        >\n                            <Sparkles className=\"w-5 h-5\" />\n                            あなたのことを聞かせてください\n                            <ArrowRight className=\"w-5 h-5\" />\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/components/Phase3Simulation.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used.","line":7,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":39,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CardHeader"},"fix":{"range":[262,274],"text":""},"desc":"Remove unused variable \"CardHeader\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used.","line":7,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":50,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CardTitle"},"fix":{"range":[274,285],"text":""},"desc":"Remove unused variable \"CardTitle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Rocket' is defined but never used.","line":10,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":22,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Rocket"},"fix":{"range":[409,417],"text":""},"desc":"Remove unused variable \"Rocket\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'User' is defined but never used.","line":11,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"User"},"fix":{"range":[480,490],"text":""},"desc":"Remove unused variable \"User\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Wallet' is defined but never used.","line":11,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Wallet"},"fix":{"range":[490,498],"text":""},"desc":"Remove unused variable \"Wallet\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Legend' is defined but never used.","line":13,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":71,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Legend"},"fix":{"range":[617,625],"text":""},"desc":"Remove unused variable \"Legend\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showArrowButton' is assigned a value but never used.","line":32,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setShowArrowButton' is assigned a value but never used.","line":32,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":47},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/components/Phase3Simulation.tsx:40:9\n  38 |\n  39 |     useEffect(() => {\n> 40 |         setShowContent(true);\n     |         ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  41 |         // 段階的にコンテンツを表示\n  42 |         const timers = [1, 2, 3, 4].map((step, index) =>\n  43 |             setTimeout(() => setShowStep(step), (index + 1) * 800)","line":40,"column":9,"nodeType":null,"endLine":40,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'trustEndValue' is assigned a value but never used.","line":79,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":79,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'stocksEndValue' is assigned a value but never used.","line":80,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":80,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'investmentSteps' is assigned a value but never used.","line":88,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":88,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":412,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":412,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27567,27570],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27567,27570],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":544,"column":53,"nodeType":"JSXOpeningElement","endLine":544,"endColumn":179},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":548,"column":53,"nodeType":"JSXOpeningElement","endLine":548,"endColumn":176},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":552,"column":53,"nodeType":"JSXOpeningElement","endLine":552,"endColumn":176},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":556,"column":53,"nodeType":"JSXOpeningElement","endLine":556,"endColumn":176},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":735,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":735,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[55814,55817],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[55814,55817],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState, useRef } from \"react\";\nimport { UserInput, SimulationResult } from \"@/types\";\nimport { formatManYen, formatPercent } from \"@/lib/simulation\";\nimport { Button } from \"@/components/ui/Button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/Card\";\nimport {\n    TrendingUp, TrendingDown, AlertTriangle, CheckCircle, ArrowRight,\n    PiggyBank, Rocket, Target, Lightbulb, BarChart3, ChevronLeft, FileText, Sparkles,\n    User, Wallet, Lock as LockIcon, ChevronsRight\n} from \"lucide-react\";\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, ReferenceLine } from \"recharts\";\nimport Image from \"next/image\";\n\ninterface Phase3SimulationProps {\n    userData: UserInput;\n    simulationResult: SimulationResult;\n    onNext: () => void;\n    onBack: () => void;\n    onGoToAgenda: () => void;\n}\n\n\n\nexport default function Phase3Simulation({ userData, simulationResult, onNext, onBack, onGoToAgenda }: Phase3SimulationProps) {\n    const [showStep, setShowStep] = useState(0);\n    const [showContent, setShowContent] = useState(false);\n    const [showSecondHalf, setShowSecondHalf] = useState(false);\n    const [showSavingsResult, setShowSavingsResult] = useState(false);\n    const [showGapCard, setShowGapCard] = useState(false);\n    const [showArrowButton, setShowArrowButton] = useState(false);\n    const [showRequiredRate, setShowRequiredRate] = useState(false);\n    const [showRequiredGraph, setShowRequiredGraph] = useState(false);\n    const [activeInsightSlide, setActiveInsightSlide] = useState<number>(0);\n    const gapCardRef = useRef<HTMLDivElement>(null);\n\n\n    useEffect(() => {\n        setShowContent(true);\n        // 段階的にコンテンツを表示\n        const timers = [1, 2, 3, 4].map((step, index) =>\n            setTimeout(() => setShowStep(step), (index + 1) * 800)\n        );\n        return () => timers.forEach(clearTimeout);\n    }, []);\n\n    // 預金結果が表示されたら、段階的にストーリーを展開する演出\n    useEffect(() => {\n        if (showSavingsResult) {\n            // 2.5秒後に「不足金額（Reality Check）」を表示\n            const gapTimer = setTimeout(() => {\n                setShowGapCard(true);\n            }, 2500);\n\n            return () => {\n                clearTimeout(gapTimer);\n            };\n        }\n    }, [showSavingsResult]);\n\n    // 不足金額が表示されたときに強制スクロール\n    useEffect(() => {\n        if (showGapCard && gapCardRef.current) {\n            gapCardRef.current.scrollIntoView({ behavior: 'smooth', block: 'center' });\n        }\n    }, [showGapCard]);\n\n    // 全ての演出を一括スキップする\n    const handleSkipAnimation = () => {\n        setShowStep(4);\n        setShowSavingsResult(true);\n        setShowGapCard(true);\n        setShowSecondHalf(true);\n    };\n\n    const {\n        savingsEndValue,\n        trustEndValue,\n        stocksEndValue,\n        gfsEndValue,\n        requiredAnnualRate,\n        gap,\n        isGapNegative,\n        chartData\n    } = simulationResult;\n\n    const investmentSteps = [\n        {\n            title: \"ゴールを決める\",\n            description: \"まずは何のために投資するか明確にする\",\n            icon: Target,\n            color: \"from-blue-500 to-cyan-500\",\n        },\n        {\n            title: \"体系的に学ぶ\",\n            description: \"断片的ではなく、基礎から順序立てて学ぶ\",\n            icon: Lightbulb,\n            color: \"from-purple-500 to-pink-500\",\n        },\n        {\n            title: \"少額から始める\",\n            description: \"数百円から購入可能。リスクを抑えてスタート\",\n            icon: PiggyBank,\n            color: \"from-emerald-500 to-teal-500\",\n        },\n    ];\n\n    return (\n        <div className=\"min-h-screen relative overflow-hidden bg-gradient-to-br from-slate-50 via-blue-50 to-white\">\n            {/* 背景のマスコット画像 */}\n            <div className=\"absolute inset-0 pointer-events-none\">\n                <Image\n                    src=\"/mascot/mascot_search.png\"\n                    alt=\"\"\n                    width={220}\n                    height={220}\n                    className=\"absolute -top-10 -right-10 opacity-10 animate-float-slow\"\n                />\n                <Image\n                    src=\"/mascot/mascot_cheer_pink.png\"\n                    alt=\"\"\n                    width={180}\n                    height={180}\n                    className=\"absolute bottom-20 -left-10 opacity-10 animate-float-delayed\"\n                />\n            </div>\n\n            <div className=\"relative z-10 min-h-screen py-8 px-4\">\n                <div className=\"max-w-6xl mx-auto\">\n                    {/* セクションヘッダー */}\n                    <div className={`text-center mb-8 transition-all duration-700 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                        <div className=\"flex justify-between items-center mb-4 max-w-6xl mx-auto\">\n                            <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                onClick={onBack}\n                                className=\"text-blue-200 hover:text-white transition-colors\"\n                            >\n                                <ChevronLeft className=\"w-4 h-4 mr-1\" />\n                                戻る\n                            </Button>\n                            <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                onClick={onGoToAgenda}\n                                className=\"text-blue-200 hover:text-white transition-colors\"\n                            >\n                                <FileText className=\"w-4 h-4 mr-1\" />\n                                目次\n                            </Button>\n                        </div>\n                        <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-slate-900/10 backdrop-blur rounded-full mb-4 ring-1 ring-slate-900/5\">\n                            <span className=\"text-amber-600 font-bold\">Section 02</span>\n                            <span className=\"text-slate-400\">/</span>\n                            <span className=\"text-slate-900\">{userData.name}様の未来予想図</span>\n                            {!showSecondHalf && (\n                                <button\n                                    onClick={handleSkipAnimation}\n                                    title=\"演出をスキップ\"\n                                    className=\"ml-3 flex items-center gap-1 px-2.5 py-1 rounded-full bg-blue-600 text-white hover:bg-black transition-all duration-300 shadow-lg ring-2 ring-white\"\n                                >\n                                    <span className=\"text-[10px] font-black tracking-tighter\">SKIP</span>\n                                    <ChevronsRight className=\"w-4 h-4\" />\n                                </button>\n                            )}\n                        </div>\n                        <h1 className=\"text-3xl md:text-5xl font-black text-slate-950 mb-6 tracking-tight leading-tight whitespace-nowrap\">\n                            {userData.name}様の予測資産シミュレーション\n                        </h1>\n                        <p className=\"text-lg text-slate-600 font-bold max-w-2xl mx-auto leading-relaxed\">\n                            「{userData.investmentGoal}」という目標に向けた<br />\n                            資産形成のシミュレーション結果\n                        </p>\n                    </div>\n\n\n                    {/* 預金ルート：現実の直視 */}\n                    <div className={`mb-20 transition-all duration-700 ${showStep >= 1 ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                        <div className=\"flex items-center gap-2 mb-6\">\n                            <div className=\"h-px flex-1 bg-slate-200\"></div>\n                            <span className=\"text-xs font-black text-slate-400 uppercase tracking-widest italic\">Reality Check: Step 01</span>\n                            <div className=\"h-px flex-1 bg-slate-200\"></div>\n                        </div>\n\n                        {/* 必要年利の表示カード */}\n                        <div className=\"grid md:grid-cols-2 gap-6 mb-8\">\n                            <Card className=\"border-0 shadow-lg bg-white p-6 border-t-4 border-blue-500\">\n                                <p className=\"text-sm font-bold text-slate-400 mb-2\">目標金額</p>\n                                <p className=\"text-3xl font-black text-blue-900\">{formatManYen(userData.targetAmount)}</p>\n                            </Card>\n                            <Card className=\"border-0 shadow-lg bg-white p-6 border-t-4 border-slate-500\">\n                                <p className=\"text-sm font-bold text-slate-400 mb-2\">目標期間</p>\n                                <p className=\"text-3xl font-black text-slate-700\">{userData.targetPeriod}年間</p>\n                            </Card>\n                        </div>\n\n                        {/* 預金のみの結果を表示するボタン（非表示時） */}\n                        {!showSavingsResult && (\n                            <div className=\"flex flex-col items-center gap-6 py-12 animate-bounce-gentle\">\n                                <p className=\"text-slate-500 font-black text-lg tracking-widest uppercase italic\">もしも...</p>\n                                <button\n                                    onClick={() => setShowSavingsResult(true)}\n                                    className=\"group relative px-12 py-6 flex items-center justify-center bg-gradient-to-r from-slate-600 to-slate-700 rounded-2xl shadow-[0_20px_50px_rgba(0,0,0,0.15)] border border-slate-400 hover:shadow-[0_30px_70px_rgba(71,85,105,0.3)] hover:border-slate-300 transition-all duration-500 transform hover:scale-105 active:scale-95\"\n                                >\n                                    <div className=\"absolute inset-0 bg-gradient-to-b from-white/10 to-transparent opacity-0 group-hover:opacity-100 rounded-2xl transition-opacity\"></div>\n                                    <span className=\"text-white font-black text-xl tracking-wide relative z-10\">預金を{userData.targetPeriod}年間続けた場合</span>\n                                    <ArrowRight className=\"ml-3 w-6 h-6 text-white group-hover:translate-x-2 transition-all duration-500 relative z-10\" />\n                                    <div className=\"absolute -inset-2 bg-slate-400/20 rounded-2xl animate-ping-slow\"></div>\n                                </button>\n                            </div>\n                        )}\n\n                        {/* 預金のみの運用結果カード（表示時） */}\n                        {showSavingsResult && (\n                            <div className=\"animate-fade-in-up\">\n                                <Card className=\"border-0 shadow-xl overflow-hidden bg-slate-50 mb-8 border-l-8 border-slate-400\">\n                                    <div className=\"p-8 md:flex items-center justify-between gap-10\">\n                                        <div className=\"mb-6 md:mb-0\">\n                                            <div className=\"flex items-center gap-3 mb-4\">\n                                                <PiggyBank className=\"w-8 h-8 text-slate-400\" />\n                                                <h3 className=\"text-2xl font-black text-slate-700\">預金のみで運用を続けた場合</h3>\n                                            </div>\n                                            <p className=\"text-slate-500 leading-relaxed font-medium\">\n                                                超低金利の環境では、預金だけでは資産は増えていきません。<br className=\"hidden md:block\" />\n                                                むしろ物価上昇(インフレ)によって、お金の価値が目減りするリスクがあります。\n                                            </p>\n                                        </div>\n                                        <div className=\"text-center md:text-right bg-white p-6 rounded-2xl shadow-inner border border-slate-100 min-w-[280px]\">\n                                            <p className=\"text-xs font-bold text-slate-400 mb-1\">{userData.targetPeriod}年後の予測資産額</p>\n                                            <p className=\"text-5xl font-black text-slate-600 tracking-tighter\">\n                                                {formatManYen(savingsEndValue)}\n                                            </p>\n                                            <div className=\"mt-4 flex items-center justify-center md:justify-end gap-2 text-red-500 font-bold text-sm\">\n                                                <TrendingDown className=\"w-4 h-4\" />\n                                                <span>目標を達成するには不十分です</span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </Card>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* 不足額の強調：危機感のピーク */}\n                    {isGapNegative && showGapCard && (\n                        <div className=\"mb-12 animate-scale-in-bounce\" ref={gapCardRef}>\n                            <div className=\"animate-shake\">\n                                <Card className=\"border-0 shadow-2xl bg-gradient-to-br from-red-600 via-red-700 to-red-800 text-white relative overflow-hidden\">\n                                    {/* 背景装飾 */}\n                                    <div className=\"absolute top-0 right-0 p-4 opacity-10\">\n                                        <AlertTriangle className=\"w-48 h-48 -mr-10 -mt-10\" />\n                                    </div>\n                                    <CardContent className=\"py-12 px-6 md:px-12 relative z-10\">\n                                        <div className=\"flex flex-col xl:flex-row items-center justify-between gap-12\">\n                                            <div className=\"flex flex-col md:flex-row items-center gap-10 text-center md:text-left flex-1\">\n                                                <div className=\"p-8 bg-white rounded-[2rem] shadow-2xl animate-pulse shrink-0\">\n                                                    <AlertTriangle className=\"w-16 h-16 text-red-600\" />\n                                                </div>\n                                                <div className=\"flex-1\">\n                                                    <p className=\"text-xl md:text-2xl font-black mb-3 tracking-tight\">預金を続けた場合の目標に対する不足金額</p>\n                                                    <p className=\"text-red-100/80 text-base leading-relaxed font-medium\">\n                                                        「{userData.investmentGoal}」の実現において、<br />\n                                                        預金ルートでは以下の資金ギャップが生じます。\n                                                    </p>\n                                                </div>\n                                            </div>\n                                            <div className=\"text-center md:text-right bg-white/10 p-6 rounded-[2rem] backdrop-blur-md border border-white/20 min-w-fit\">\n                                                <p className=\"text-5xl md:text-7xl font-black text-white mb-1 tracking-tighter drop-shadow-xl whitespace-nowrap leading-none py-2\">\n                                                    {formatManYen(gap)}\n                                                </p>\n                                                <p className=\"text-red-100 font-bold text-xl opacity-80 italic tracking-widest\">FUNDING GAP</p>\n                                            </div>\n                                        </div>\n                                    </CardContent>\n                                    {/* マスコット：深刻 */}\n                                    <div className=\"absolute -bottom-4 left-4 pointer-events-none opacity-40\">\n                                        <Image src=\"/mascot/mascot_search.png\" alt=\"\" width={150} height={150} />\n                                    </div>\n                                </Card>\n                            </div>\n\n                            {/* スタイリッシュな展開ボタン */}\n                            {!showSecondHalf && (\n                                <div className=\"mt-16 flex flex-col items-center gap-8 animate-fade-in-scale-luxury\">\n                                    <p className=\"text-slate-500 font-black text-xl tracking-widest uppercase italic\">Solution is here</p>\n                                    <button\n                                        onClick={() => setShowSecondHalf(true)}\n                                        className=\"group relative w-32 h-32 flex items-center justify-center bg-white rounded-full shadow-[0_20px_50px_rgba(0,0,0,0.1)] border border-slate-100 hover:shadow-[0_30px_70px_rgba(59,130,246,0.2)] hover:border-blue-200 transition-all duration-500 transform hover:scale-110 active:scale-95\"\n                                    >\n                                        <div className=\"absolute inset-0 bg-gradient-to-b from-blue-50 to-transparent opacity-0 group-hover:opacity-100 rounded-full transition-opacity\"></div>\n                                        <ArrowRight className=\"w-12 h-12 text-blue-600 group-hover:translate-y-2 group-hover:rotate-90 transition-all duration-500 rotate-90\" />\n                                        <div className=\"absolute -inset-4 bg-blue-400/10 rounded-full animate-ping-slow\"></div>\n                                    </button>\n                                </div>\n                            )}\n                        </div>\n                    )}\n\n                    {/* 解決策セクション（条件付き表示） */}\n                    <div className={`transition-all duration-1000 transform ${showSecondHalf ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-20 pointer-events-none h-0 overflow-hidden\"}`}>\n                        <div className={`mb-20 transition-all duration-700 ${showSecondHalf ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                            <div className=\"flex items-center gap-2 mb-6\">\n                                <div className=\"h-px flex-1 bg-amber-200\"></div>\n                                <span className=\"text-xs font-black text-amber-500 uppercase tracking-widest italic\">The Solution: Step 02</span>\n                                <div className=\"h-px flex-1 bg-amber-200\"></div>\n                            </div>\n\n                            <Card className=\"border-0 shadow-2xl overflow-hidden ring-4 ring-amber-400 bg-white relative\">\n                                <div className=\"bg-gradient-to-r from-blue-950 via-blue-900 to-blue-800 p-8\">\n                                    <div className=\"flex items-center gap-6\">\n                                        <div className=\"w-16 h-16 rounded-3xl bg-amber-400 flex items-center justify-center shadow-[0_0_30px_rgba(251,189,35,0.4)] transform rotate-3\">\n                                            <TrendingUp className=\"w-10 h-10 text-blue-950\" />\n                                        </div>\n                                        <div>\n                                            <h3 className=\"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-black text-white tracking-tight leading-none drop-shadow-md whitespace-nowrap\">{userData.name}様が投資で運用した場合のシミュレーション</h3>\n                                            <p className=\"text-blue-100 font-bold text-lg mt-2 opacity-90\">利回り20％で運用した場合の効率的な資産形成</p>\n                                        </div>\n                                        <div className=\"ml-auto hidden md:block\">\n                                            <Image src=\"/mascot/mascot_cheer_pink.png\" alt=\"\" width={100} height={100} className=\"animate-float-slow\" />\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <CardContent className=\"p-12\">\n                                    <div className=\"text-center relative\">\n                                        {/* 背景の装飾演出 */}\n                                        <div className=\"absolute -left-12 -top-12 flex flex-col items-center gap-2 animate-in fade-in slide-in-from-left-8 duration-1000 z-20\">\n                                            <div className=\"bg-white/90 backdrop-blur shadow-2xl border border-blue-100 rounded-2xl p-4 min-w-[160px] transform transition-transform cursor-default ring-4 ring-blue-500/20\">\n                                                <p className=\"text-[10px] font-black text-blue-500 uppercase tracking-widest mb-1\">Time to Goal</p>\n                                                <p className=\"text-4xl font-black text-slate-900 leading-none\">\n                                                    {simulationResult.achievedYear ?? userData.targetPeriod}<span className=\"text-sm ml-1\">年</span>\n                                                </p>\n                                                <p className=\"text-[10px] font-bold text-slate-400 mt-1\">目標達成までの期間</p>\n                                            </div>\n                                        </div>\n                                        <div className=\"absolute -right-20 top-1/2 -translate-y-1/2 w-64 h-64 bg-blue-500/5 blur-[80px] rounded-full\"></div>\n\n                                        <p className=\"text-xl font-black text-slate-400 mb-8 uppercase tracking-[0.3em] italic\">Projected Assets at 20% Yield</p>\n                                        <div className=\"relative inline-block mb-10\">\n                                            <p className=\"text-7xl sm:text-9xl md:text-[11rem] font-black bg-gradient-to-br from-blue-900 via-blue-800 to-amber-600 bg-clip-text text-transparent tracking-tighter py-4 leading-none\">\n                                                {formatManYen(gfsEndValue)}\n                                            </p>\n                                            <div className=\"absolute -top-6 -right-20 bg-amber-400 text-blue-950 font-black px-6 py-2 rounded-2xl text-xl shadow-2xl animate-float whitespace-nowrap\">\n                                                預金に比べて+{formatManYen(gfsEndValue - savingsEndValue)}増える！\n                                            </div>\n                                        </div>\n\n\n                                        <div className=\"mt-8 text-center\">\n                                            <p className=\"text-slate-400 text-xs font-medium leading-relaxed max-w-2xl mx-auto opacity-70\">\n                                                ※本シミュレーションは独自の分析手法に基づき、資産運用の最適化を行った場合の論理的数値を算出しています。<br />\n                                                過去の実績データをベースにしていますが、将来の成果を保証するものではありません。\n                                            </p>\n                                        </div>\n                                    </div>\n                                </CardContent>\n                            </Card>\n\n                            <div className=\"mt-12 group\">\n                                <Card className=\"border-0 shadow-2xl bg-slate-950 p-10 overflow-hidden relative\">\n                                    <div className=\"absolute top-0 right-0 w-64 h-64 bg-amber-500/10 blur-[100px] rounded-full\"></div>\n                                    <div className=\"absolute bottom-0 left-0 w-64 h-64 bg-blue-500/5 blur-[100px] rounded-full\"></div>\n\n                                    <div className=\"flex items-center justify-between mb-8 relative z-10\">\n                                        <h4 className=\"text-white font-black text-xl flex items-center gap-3\">\n                                            <TrendingUp className=\"text-amber-400 w-6 h-6\" />\n                                            目標達成までの資産推移グラフ\n                                        </h4>\n                                        <span className=\"text-slate-500 text-sm font-bold uppercase tracking-widest\">Compound Interest Effect</span>\n                                    </div>\n\n                                    <div className=\"h-[400px] md:h-[550px] relative z-10\">\n                                        <ResponsiveContainer width=\"100%\" height=\"100%\">\n                                            <AreaChart data={chartData} margin={{ top: 20, right: 30, left: 0, bottom: 0 }}>\n                                                <defs>\n                                                    <linearGradient id=\"colorGfsGolden\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                        <stop offset=\"5%\" stopColor=\"#FBBD23\" stopOpacity={0.8} />\n                                                        <stop offset=\"95%\" stopColor=\"#FBBD23\" stopOpacity={0.1} />\n                                                    </linearGradient>\n                                                    <linearGradient id=\"colorTrust\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                        <stop offset=\"5%\" stopColor=\"#10B981\" stopOpacity={0.3} />\n                                                        <stop offset=\"95%\" stopColor=\"#10B981\" stopOpacity={0.0} />\n                                                    </linearGradient>\n                                                    <linearGradient id=\"colorStocks\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                        <stop offset=\"5%\" stopColor=\"#A855F7\" stopOpacity={0.3} />\n                                                        <stop offset=\"95%\" stopColor=\"#A855F7\" stopOpacity={0.0} />\n                                                    </linearGradient>\n                                                    <filter id=\"shadow\" height=\"200%\">\n                                                        <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"12\" result=\"blur\" />\n                                                        <feOffset in=\"blur\" dx=\"0\" dy=\"12\" result=\"offsetBlur\" />\n                                                        <feMerge>\n                                                            <feMergeNode />\n                                                            <feMergeNode in=\"SourceGraphic\" />\n                                                        </feMerge>\n                                                    </filter>\n                                                </defs>\n                                                <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#1E293B\" opacity={0.3} />\n                                                <XAxis dataKey=\"year\" tickFormatter={(v) => `${v}年`} stroke=\"#475569\" fontSize={12} tick={{ fill: '#64748B' }} />\n                                                <YAxis\n                                                    domain={[0, userData.targetAmount / 0.8]}\n                                                    allowDataOverflow={true}\n                                                    tickFormatter={(v) => `${(v / 10000).toLocaleString()}万`}\n                                                    stroke=\"#475569\"\n                                                    fontSize={12}\n                                                    tick={{ fill: '#64748B' }}\n                                                />\n                                                <Tooltip\n                                                    contentStyle={{ backgroundColor: '#0F172A', border: '1px solid #1E293B', borderRadius: '1.5rem', padding: '1.5rem', boxShadow: '0 20px 25px -5px rgba(0, 0, 0, 0.5)' }}\n                                                    itemStyle={{ fontWeight: 'black', fontSize: '1rem' }}\n                                                    labelStyle={{ color: '#94A3B8', marginBottom: '0.75rem', fontWeight: 'bold' }}\n                                                    formatter={(v: any, name?: string) => {\n                                                        const labelMap: Record<string, string> = {\n                                                            gfs: `投資を行った場合 (${formatPercent(simulationResult.gfsAnnualRate)})`,\n                                                            savings: '預金のみ (0.2%)'\n                                                        };\n                                                        return [`${(v / 10000).toLocaleString()}万円`, labelMap[name as string] || name];\n                                                    }}\n                                                    labelFormatter={(l) => `${l}年目`}\n                                                />\n                                                <Area\n                                                    name=\"投資を行った場合\"\n                                                    type=\"monotone\"\n                                                    dataKey=\"gfs\"\n                                                    stroke=\"#FBBD23\"\n                                                    strokeWidth={5}\n                                                    fill=\"transparent\"\n                                                    animationDuration={3000}\n                                                    filter=\"url(#shadow)\"\n                                                />\n                                                <Area\n                                                    name=\"savings\"\n                                                    type=\"monotone\"\n                                                    dataKey=\"savings\"\n                                                    stroke=\"#ef4444\"\n                                                    strokeWidth={2}\n                                                    fill=\"transparent\"\n                                                    strokeDasharray=\"8 4\"\n                                                />\n                                                <ReferenceLine y={userData.targetAmount} stroke=\"#94A3B8\" strokeWidth={1} strokeDasharray=\"12 6\" label={{ value: \"TARGET GOAL\", position: \"top\", fill: \"#94A3B8\", fontWeight: \"900\", letterSpacing: \"3px\", fontSize: \"14px\" }} />\n                                            </AreaChart>\n                                        </ResponsiveContainer>\n                                    </div>\n\n                                    <div className=\"mt-12 flex flex-wrap justify-center gap-8 relative z-10 border-t border-slate-700/50 pt-10\">\n                                        <div className=\"flex items-center gap-3 bg-slate-900/50 px-4 py-2 rounded-xl border border-amber-400/20\">\n                                            <div className=\"w-4 h-4 bg-amber-400 rounded shadow-[0_0_15px_rgba(251,189,35,0.6)]\"></div>\n                                            <span className=\"text-amber-100 font-bold text-sm\">投資を行った場合 ({formatPercent(simulationResult.gfsAnnualRate)})</span>\n                                        </div>\n                                        <div className=\"flex items-center gap-3 bg-red-500/10 px-4 py-2 rounded-xl border border-red-500/20\">\n                                            <div className=\"w-4 h-1 border-t-2 border-red-500 border-dashed\"></div>\n                                            <span className=\"text-red-500 font-bold text-sm\">預金 (0.2%)</span>\n                                        </div>\n                                    </div>\n                                </Card>\n                            </div>\n\n                            {/* 将来の資産形成についてのメッセージ */}\n                            <div className=\"mt-24 mb-16 text-center max-w-4xl mx-auto px-4\">\n                                <h2 className=\"text-3xl md:text-5xl font-black text-slate-900 mb-8 leading-tight tracking-tight\">\n                                    将来の資産形成において、一番の武器は<br className=\"hidden md:block\" />\n                                    『正しい知識』と『時間』の活用です。\n                                </h2>\n                                <p className=\"text-xl text-slate-600 font-medium leading-relaxed\">\n                                    お金を預けるだけの時代は終わり、自分自身で賢く運用する力が求められています。<br className=\"hidden md:block\" />\n                                    投資は難しいものではなく、正しく学べば誰にでも武器になります。\n                                </p>\n                            </div>\n\n                            {/* カスタムインサイトスライドセクション */}\n                            <div className=\"mb-20 max-w-5xl mx-auto px-4\">\n                                <Card className=\"border-0 shadow-[0_50px_100px_rgba(0,0,0,0.1)] rounded-[3rem] overflow-hidden bg-white h-[750px] flex flex-col\">\n                                    <div className=\"flex-1 p-8 md:p-12 flex flex-col h-full overflow-hidden\">\n                                        {/* スライド共通ヘッダー - スライド1のみ表示 */}\n                                        {activeInsightSlide === 0 && (\n                                            <div className=\"flex justify-between items-start mb-8 border-b-2 border-blue-900 pb-4 shrink-0\">\n                                                <h3 className=\"text-2xl md:text-3xl font-black text-blue-900 tracking-tight flex-1\">\n                                                    投資で年利20%は難しい？\n                                                </h3>\n                                                <div className=\"flex items-center gap-2\">\n                                                    <div className=\"w-8 h-8 rounded-lg bg-blue-900 flex items-center justify-center p-1.5\">\n                                                        <Sparkles className=\"text-white w-full h-full\" />\n                                                    </div>\n                                                    <span className=\"font-black text-blue-900 text-xl tracking-tighter\">GFS</span>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {/* スライドメイン（スクロール可能エリア） */}\n                                        <div className=\"flex-1 overflow-y-auto pr-2 custom-scrollbar p-6\">\n                                            {activeInsightSlide === 0 ? (\n                                                <div className=\"animate-in fade-in slide-in-from-right-8 duration-700 space-y-12\">\n                                                    <div className=\"text-center\">\n                                                        <h4 className=\"text-2xl md:text-4xl font-black text-blue-950 mb-3\">\n                                                            1年間で年利20%以上となった銘柄数\n                                                        </h4>\n                                                    </div>\n\n                                                    <div className=\"max-w-4xl mx-auto w-full py-4 space-y-10\">\n                                                        {/* 2023年データ */}\n                                                        <div className=\"relative flex flex-col md:flex-row items-center justify-start gap-4 md:gap-8 px-4\">\n                                                            <div className=\"bg-[#0a2357] text-white px-6 py-2 rounded-sm font-black text-xl md:text-3xl shrink-0 tracking-tighter\">\n                                                                2023年\n                                                            </div>\n                                                            <div className=\"flex items-baseline flex-nowrap gap-1 md:gap-2\">\n                                                                <span className=\"text-5xl md:text-7xl font-black text-[#0a2357] tracking-tighter\">1,500</span>\n                                                                <span className=\"text-lg md:text-xl font-black text-[#0a2357] mr-1\">銘柄</span>\n                                                                <div className=\"h-12 md:h-16 w-[2px] bg-slate-400 rotate-[25deg] mx-2 md:mx-6\"></div>\n                                                                <span className=\"text-xs md:text-base font-bold text-[#0a2357] self-center mr-1\">約</span>\n                                                                <span className=\"text-4xl md:text-6xl font-black text-[#0a2357] tracking-tighter\">4,000</span>\n                                                                <span className=\"text-lg md:text-xl font-black text-[#0a2357]\">銘柄</span>\n                                                            </div>\n                                                            <div className=\"md:absolute md:-top-10 md:right-0 bg-[#5d8233] text-white px-6 py-2 rounded-xl text-xl md:text-3xl font-black shadow-lg animate-bounce-gentle\">\n                                                                約3社に1社！\n                                                            </div>\n                                                        </div>\n\n                                                        {/* 2024年データ */}\n                                                        <div className=\"relative flex flex-col md:flex-row items-center justify-start gap-4 md:gap-8 px-4 pt-4\">\n                                                            <div className=\"bg-[#0a2357] text-white px-6 py-2 rounded-sm font-black text-xl md:text-3xl shrink-0 tracking-tighter\">\n                                                                2024年\n                                                            </div>\n                                                            <div className=\"flex items-baseline flex-nowrap gap-1 md:gap-2\">\n                                                                <span className=\"text-5xl md:text-7xl font-black text-[#0a2357] tracking-tighter\">911</span>\n                                                                <span className=\"text-lg md:text-xl font-black text-[#0a2357] mr-1\">銘柄</span>\n                                                                <div className=\"h-12 md:h-16 w-[2px] bg-slate-400 rotate-[25deg] mx-2 md:mx-6\"></div>\n                                                                <span className=\"text-xs md:text-base font-bold text-[#0a2357] self-center mr-1\">約</span>\n                                                                <span className=\"text-4xl md:text-6xl font-black text-[#0a2357] tracking-tighter\">4,000</span>\n                                                                <span className=\"text-lg md:text-xl font-black text-[#0a2357]\">銘柄</span>\n                                                            </div>\n                                                            <div className=\"md:absolute md:-top-4 md:right-0 bg-[#e86a04] text-white px-6 py-2 rounded-xl text-xl md:text-3xl font-black shadow-lg animate-bounce-gentle\">\n                                                                約4.5社に1社！\n                                                            </div>\n                                                        </div>\n\n                                                        {/* 注釈 */}\n                                                        <div className=\"text-right text-[#0a2357] text-sm md:text-lg font-bold pr-4 mt-8 opacity-80\">\n                                                            ※上記は各年の1月1日と12月31日を比較した結果\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            ) : activeInsightSlide === 1 ? (\n                                                <div className=\"w-full h-full flex items-center justify-center p-4\">\n                                                    <img src=\"/case-studies/slide2.png\" alt=\"LINEヤフー 事例\" className=\"max-w-full max-h-full object-contain rounded-2xl shadow-xl\" />\n                                                </div>\n                                            ) : activeInsightSlide === 2 ? (\n                                                <div className=\"w-full h-full flex items-center justify-center p-4\">\n                                                    <img src=\"/case-studies/slide3.png\" alt=\"サンリオ 事例\" className=\"max-w-full max-h-full object-contain rounded-2xl shadow-xl\" />\n                                                </div>\n                                            ) : activeInsightSlide === 3 ? (\n                                                <div className=\"w-full h-full flex items-center justify-center p-4\">\n                                                    <img src=\"/case-studies/slide4.png\" alt=\"スシロー 事例\" className=\"max-w-full max-h-full object-contain rounded-2xl shadow-xl\" />\n                                                </div>\n                                            ) : activeInsightSlide === 4 ? (\n                                                <div className=\"w-full h-full flex items-center justify-center p-4\">\n                                                    <img src=\"/case-studies/slide5.png\" alt=\"良品計画 事例\" className=\"max-w-full max-h-full object-contain rounded-2xl shadow-xl\" />\n                                                </div>\n                                            ) : (\n                                                <div className=\"flex flex-col items-center justify-center h-full text-center py-20\">\n                                                    <Sparkles className=\"w-12 h-12 text-blue-900/20 mb-4\" />\n                                                    <h3 className=\"text-2xl font-black text-slate-300\">スライド準備中</h3>\n                                                </div>\n                                            )}\n                                        </div>\n\n                                        {/* スライド共通フッター */}\n                                        <div className=\"mt-8 pt-6 border-t border-slate-100 flex flex-col md:flex-row justify-between items-center gap-6 shrink-0\">\n                                            {activeInsightSlide === 0 ? (\n                                                <p className=\"text-blue-900 font-bold text-sm md:text-base italic opacity-70\">\n                                                    ※上記は各年の1月1日と12月31日を比較した結果\n                                                </p>\n                                            ) : (\n                                                <div className=\"flex-1\"></div>\n                                            )}\n                                            <div className=\"flex items-center gap-4\">\n                                                <div className=\"flex gap-2 mr-4\">\n                                                    {[0, 1, 2, 3, 4].map(i => (\n                                                        <button\n                                                            key={i}\n                                                            onClick={() => setActiveInsightSlide(i)}\n                                                            className={`w-2.5 h-2.5 rounded-full transition-all duration-300 ${activeInsightSlide === i ? \"bg-blue-900 w-8\" : \"bg-slate-200 hover:bg-slate-300\"}`}\n                                                        />\n                                                    ))}\n                                                </div>\n                                                <div className=\"flex gap-3\">\n                                                    <Button\n                                                        variant=\"outline\"\n                                                        size=\"sm\"\n                                                        disabled={activeInsightSlide === 0}\n                                                        onClick={() => setActiveInsightSlide(prev => Math.max(0, prev - 1))}\n                                                        className=\"rounded-full border-2 border-slate-200 text-slate-400 hover:text-blue-900 hover:border-blue-900 transition-all p-0 w-12 h-12 shadow-sm\"\n                                                    >\n                                                        <ChevronLeft className=\"w-6 h-6\" />\n                                                    </Button>\n                                                    <Button\n                                                        variant=\"outline\"\n                                                        size=\"sm\"\n                                                        disabled={activeInsightSlide === 4}\n                                                        onClick={() => setActiveInsightSlide(prev => Math.min(4, prev + 1))}\n                                                        className=\"rounded-full border-2 border-blue-900 text-blue-900 bg-white hover:bg-blue-50 shadow-lg shadow-blue-900/10 transition-all font-black p-0 w-12 h-12\"\n                                                    >\n                                                        <ArrowRight className=\"w-6 h-6\" />\n                                                    </Button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </Card>\n                            </div>\n                        </div>\n\n                        {/* 独立した必要利回りセクション */}\n                        <div className=\"mb-12 text-center\">\n                            <div className=\"inline-flex items-center gap-3 px-6 py-2 bg-blue-50 rounded-full border border-blue-100 mb-8 shadow-sm\">\n                                <Target className=\"w-5 h-5 text-blue-600\" />\n                                <span className=\"text-blue-900 font-black tracking-widest uppercase text-sm\">Vital Condition</span>\n                            </div>\n\n                            <div className=\"max-w-4xl mx-auto px-4\">\n                                {!showRequiredRate ? (\n                                    <button\n                                        onClick={() => setShowRequiredRate(true)}\n                                        className=\"w-full bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 p-12 md:p-16 rounded-[4rem] border-8 border-white shadow-[0_40px_80px_-20px_rgba(15,23,42,0.4)] relative overflow-hidden group transition-all hover:scale-[1.01] hover:shadow-[0_50px_100px_-20px_rgba(30,58,138,0.5)] active:scale-95\"\n                                    >\n                                        <div className=\"absolute inset-0 bg-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity\"></div>\n                                        <div className=\"relative z-10\">\n                                            <div className=\"w-24 h-24 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-6 ring-4 ring-blue-500/30 animate-pulse\">\n                                                <LockIcon className=\"w-10 h-10 text-blue-400\" />\n                                            </div>\n                                            <p className=\"text-blue-100 font-black text-2xl tracking-[0.05em] mb-2 drop-shadow-lg\">\n                                                {userData.name}様の目標達成のための実際の利回りとは？\n                                            </p>\n                                            <div className=\"flex items-center justify-center gap-2 text-blue-400/80 font-bold uppercase tracking-widest text-xs\">\n                                                <Sparkles className=\"w-4 h-4\" />\n                                                <span>Reveal Required Annual Rate</span>\n                                                <Sparkles className=\"w-4 h-4\" />\n                                            </div>\n                                        </div>\n                                    </button>\n                                ) : (\n                                    <div className=\"bg-gradient-to-br from-blue-600 via-indigo-700 to-blue-800 p-12 md:p-16 rounded-[4rem] border-8 border-white shadow-[0_40px_80px_-20px_rgba(30,58,138,0.4)] relative overflow-hidden animate-in zoom-in-95 fade-in duration-700\">\n                                        {/* 装飾用背景 */}\n                                        <div className=\"absolute top-0 left-0 w-full h-full bg-[url('/mascot/mascot_search.png')] bg-no-repeat bg-[length:300px] opacity-[0.03] -rotate-12 translate-x-[-10%] translate-y-[20%]\"></div>\n                                        <div className=\"absolute top-0 right-0 w-full h-full bg-gradient-to-br from-white/10 to-transparent pointer-events-none\"></div>\n\n                                        <div className=\"relative z-10\">\n                                            <p className=\"text-blue-100 font-bold mb-6 text-xl tracking-wider\">Required Rate</p>\n                                            <div className=\"flex flex-col md:flex-row items-center justify-center gap-4 mb-6\">\n                                                <p className=\"text-8xl md:text-[11rem] font-black text-white tracking-tighter leading-none drop-shadow-2xl\">\n                                                    {formatPercent(requiredAnnualRate)}\n                                                </p>\n                                            </div>\n                                            <div className=\"inline-flex items-center gap-2 px-8 py-3 bg-white/10 backdrop-blur-md rounded-2xl border border-white/20\">\n                                                <span className=\"text-white text-xl md:text-2xl font-black\">{userData.name}様の目標達成に必要な利回り</span>\n                                            </div>\n                                        </div>\n\n                                        {/* インパクトのある光の演出 */}\n                                        <div className=\"absolute -top-20 -left-20 w-80 h-80 bg-blue-400/20 blur-[100px] rounded-full\"></div>\n                                        <div className=\"absolute -bottom-20 -right-20 w-80 h-80 bg-indigo-400/20 blur-[100px] rounded-full\"></div>\n                                    </div>\n                                )}\n\n                                <p className=\"mt-8 text-slate-500 font-bold text-lg leading-relaxed\">\n                                    この利回りを確保することが、ゴールへの最短ルートとなります。<br className=\"hidden md:block\" />\n                                    学びと実践によって、この数字を「確かな現実」へと変えていきましょう。\n                                </p>\n                            </div>\n                        </div>\n\n\n                        {!showRequiredGraph ? (\n                            <div className=\"mt-12 flex justify-center\">\n                                <button\n                                    onClick={() => setShowRequiredGraph(true)}\n                                    className=\"w-full bg-slate-950 p-12 md:p-16 rounded-[4rem] border-4 border-slate-800 shadow-[0_20px_50px_rgba(0,0,0,0.3)] relative overflow-hidden group transition-all hover:scale-[1.01] active:scale-95\"\n                                >\n                                    <div className=\"absolute inset-0 bg-blue-500/5 animate-pulse\"></div>\n                                    <div className=\"relative z-10 flex flex-col items-center gap-6\">\n                                        <div className=\"w-20 h-20 bg-blue-500/20 rounded-full flex items-center justify-center ring-4 ring-blue-500/40 animate-pulse shadow-[0_0_30px_rgba(59,130,246,0.4)]\">\n                                            <BarChart3 className=\"w-10 h-10 text-blue-400\" />\n                                        </div>\n                                        <p className=\"text-blue-100 font-black text-2xl tracking-[0.2em] drop-shadow-lg\">\n                                            グラフで表示\n                                        </p>\n                                    </div>\n                                </button>\n                            </div>\n                        ) : (\n                            <div className=\"mt-12 group animate-in zoom-in-95 fade-in duration-700\">\n                                <Card className=\"border-0 shadow-2xl bg-slate-950 p-10 overflow-hidden relative\">\n                                    <div className=\"absolute top-0 right-0 w-64 h-64 bg-blue-500/10 blur-[100px] rounded-full\"></div>\n                                    <div className=\"absolute bottom-0 left-0 w-64 h-64 bg-indigo-500/5 blur-[100px] rounded-full\"></div>\n\n                                    <div className=\"flex items-center justify-between mb-8 relative z-10\">\n                                        <h4 className=\"text-white font-black text-xl flex items-center gap-3\">\n                                            <Target className=\"text-blue-400 w-6 h-6\" />\n                                            {userData.name}様に必要な利回りでの資産推移グラフ\n                                        </h4>\n                                        <button\n                                            onClick={() => setShowRequiredGraph(false)}\n                                            className=\"bg-slate-800/50 hover:bg-slate-700 text-slate-400 hover:text-white px-4 py-2 rounded-xl text-xs font-bold transition-colors uppercase tracking-widest border border-slate-700\"\n                                        >\n                                            CLOSE\n                                        </button>\n                                    </div>\n\n                                    <div className=\"h-[400px] md:h-[550px] relative z-10\">\n                                        <ResponsiveContainer width=\"100%\" height=\"100%\">\n                                            <AreaChart data={simulationResult.fullChartData} margin={{ top: 20, right: 30, left: 0, bottom: 0 }}>\n                                                <defs>\n                                                    <linearGradient id=\"colorRequired\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                        <stop offset=\"5%\" stopColor=\"#3B82F6\" stopOpacity={0.8} />\n                                                        <stop offset=\"95%\" stopColor=\"#3B82F6\" stopOpacity={0.1} />\n                                                    </linearGradient>\n                                                    <linearGradient id=\"colorGfsGolden\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                        <stop offset=\"5%\" stopColor=\"#FBBD23\" stopOpacity={0.3} />\n                                                        <stop offset=\"95%\" stopColor=\"#FBBD23\" stopOpacity={0.0} />\n                                                    </linearGradient>\n                                                </defs>\n                                                <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#1E293B\" opacity={0.3} />\n                                                <XAxis dataKey=\"year\" tickFormatter={(v) => `${v}年`} stroke=\"#475569\" fontSize={12} tick={{ fill: '#64748B' }} />\n                                                <YAxis\n                                                    domain={[0, userData.targetAmount / 0.8]}\n                                                    allowDataOverflow={true}\n                                                    tickFormatter={(v) => `${(v / 10000).toLocaleString()}万`}\n                                                    stroke=\"#475569\"\n                                                    fontSize={12}\n                                                    tick={{ fill: '#64748B' }}\n                                                />\n                                                <Tooltip\n                                                    contentStyle={{ backgroundColor: '#0F172A', border: '1px solid #1E293B', borderRadius: '1.5rem', padding: '1.5rem', boxShadow: '0 20px 25px -5px rgba(0, 0, 0, 0.5)' }}\n                                                    itemStyle={{ fontWeight: 'black', fontSize: '1rem' }}\n                                                    labelStyle={{ color: '#94A3B8', marginBottom: '0.75rem', fontWeight: 'bold' }}\n                                                    formatter={(v: any, name?: string) => {\n                                                        const labelMap: Record<string, string> = {\n                                                            required: `目標達成に必要な年利 (${formatPercent(simulationResult.requiredAnnualRate)})`,\n                                                            gfs: '20%で投資を運用した場合',\n                                                            savings: '預金 (0.2%)'\n                                                        };\n                                                        return [`${(v / 10000).toLocaleString()}万円`, labelMap[name as string] || name];\n                                                    }}\n                                                    labelFormatter={(l) => `${l}年目`}\n                                                />\n                                                <Area\n                                                    name=\"required\"\n                                                    type=\"monotone\"\n                                                    dataKey=\"required\"\n                                                    stroke=\"#3B82F6\"\n                                                    strokeWidth={5}\n                                                    fill=\"transparent\"\n                                                    animationDuration={3000}\n                                                />\n                                                <Area\n                                                    name=\"gfs\"\n                                                    type=\"monotone\"\n                                                    dataKey=\"gfs\"\n                                                    stroke=\"#FBBD23\"\n                                                    strokeWidth={2}\n                                                    fill=\"url(#colorGfsGolden)\"\n                                                    fillOpacity={0.6}\n                                                    animationDuration={2500}\n                                                />\n                                                <Area\n                                                    name=\"savings\"\n                                                    type=\"monotone\"\n                                                    dataKey=\"savings\"\n                                                    stroke=\"#ef4444\"\n                                                    strokeWidth={2}\n                                                    fill=\"transparent\"\n                                                    strokeDasharray=\"8 4\"\n                                                />\n                                                <ReferenceLine y={userData.targetAmount} stroke=\"#94A3B8\" strokeWidth={1} strokeDasharray=\"12 6\" label={{ value: \"TARGET GOAL\", position: \"top\", fill: \"#94A3B8\", fontWeight: \"900\", letterSpacing: \"3px\", fontSize: \"14px\" }} />\n                                            </AreaChart>\n                                        </ResponsiveContainer>\n                                    </div>\n\n                                    <div className=\"mt-12 flex flex-wrap justify-center gap-8 relative z-10 border-t border-slate-700/50 pt-10\">\n                                        <div className=\"flex items-center gap-3 bg-slate-900/50 px-4 py-2 rounded-xl border border-blue-400/20\">\n                                            <div className=\"w-4 h-4 bg-blue-500 rounded shadow-[0_0_15px_rgba(59,130,246,0.6)]\"></div>\n                                            <span className=\"text-blue-100 font-bold text-sm\">目標達成に必要な年利 ({formatPercent(simulationResult.requiredAnnualRate)})</span>\n                                        </div>\n                                        <div className=\"flex items-center gap-3 bg-slate-900/50 px-4 py-2 rounded-xl border border-amber-400/20\">\n                                            <div className=\"w-4 h-4 bg-amber-400 rounded shadow-[0_0_15px_rgba(251,189,35,0.6)]\"></div>\n                                            <span className=\"text-amber-100 font-bold text-sm\">20%で投資を運用した場合</span>\n                                        </div>\n                                        <div className=\"flex items-center gap-3 bg-red-500/10 px-4 py-2 rounded-xl border border-red-500/20\">\n                                            <div className=\"w-4 h-1 border-t-2 border-red-500 border-dashed\"></div>\n                                            <span className=\"text-red-500 font-bold text-sm\">預金 (0.2%)</span>\n                                        </div>\n                                    </div>\n                                </Card>\n                            </div>\n                        )}\n\n                        <div className={`mt-24 transition-all duration-1000 ${showSecondHalf ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-20\"}`}>\n\n\n                            <Card className=\"border-0 shadow-[0_30px_60px_-15px_rgba(0,0,0,0.1)] bg-white text-slate-800 mb-16 overflow-hidden rounded-[3rem]\">\n                                <CardContent className=\"py-20 px-10 relative\">\n                                    {/* マスコット：不安・考え中 */}\n                                    <div className=\"absolute top-0 left-0 hidden lg:block p-8 transform -translate-x-4 -translate-y-1 opacity-30\">\n                                        <Image src=\"/mascot/mascot_thinking.png\" alt=\"\" width={200} height={200} className=\"animate-float-slow\" />\n                                    </div>\n\n                                    {/* マスコット：応援 */}\n                                    <div className=\"absolute bottom-0 right-0 hidden lg:block p-8 transform translate-x-4 translate-y-8 opacity-30\">\n                                        <Image src=\"/mascot/mascot_happy.png\" alt=\"\" width={220} height={220} className=\"animate-float-slow\" />\n                                    </div>\n\n                                    <div className=\"text-center relative z-10\">\n                                        <div className=\"inline-flex items-center justify-center p-5 bg-green-50 rounded-3xl mb-8\">\n                                            <CheckCircle className=\"w-14 h-14 text-green-600 animate-bounce-gentle\" />\n                                        </div>\n                                        <h3 className=\"text-3xl md:text-5xl font-black mb-12 text-slate-950 leading-tight\">\n                                            「でも、具体的に何から始めればいいの？」<br />\n                                            「どうやって失敗せずに済むの？」\n                                        </h3>\n\n                                        <Button\n                                            onClick={onNext}\n                                            size=\"lg\"\n                                            className=\"relative bg-blue-950 text-white hover:bg-black min-w-[420px] text-2xl h-20 rounded-full shadow-[0_20px_40px_-10px_rgba(0,40,100,0.3)] transform transition-all hover:scale-105 hover:shadow-[0_25px_50px_-12px_rgba(0,40,100,0.4)] group overflow-hidden\"\n                                        >\n                                            <span className=\"relative z-10\">投資ができるようになる為には？</span>\n                                            {/* 高級感を出すためのスイープ（シマー）エフェクト */}\n                                            <div className=\"absolute inset-0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700 bg-gradient-to-r from-transparent via-white/10 to-transparent pointer-events-none\" />\n                                        </Button>\n                                    </div>\n                                </CardContent>\n                            </Card>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div >\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/components/Phase4Solution.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Card' is defined but never used.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Card"},"fix":{"range":[173,178],"text":""},"desc":"Remove unused variable \"Card\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardContent' is defined but never used.","line":6,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":27,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"CardContent"},"fix":{"range":[164,221],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'GraduationCap' is defined but never used.","line":8,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":18,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"GraduationCap"},"fix":{"range":[235,249],"text":""},"desc":"Remove unused variable \"GraduationCap\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":8,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":55,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TrendingUp"},"fix":{"range":[273,285],"text":""},"desc":"Remove unused variable \"TrendingUp\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'HelpCircle' is defined but never used.","line":9,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":64,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"HelpCircle"},"fix":{"range":[346,358],"text":""},"desc":"Remove unused variable \"HelpCircle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Sparkles' is defined but never used.","line":10,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":49,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Sparkles"},"fix":{"range":[398,408],"text":""},"desc":"Remove unused variable \"Sparkles\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used.","line":10,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":56,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Users"},"fix":{"range":[408,415],"text":""},"desc":"Remove unused variable \"Users\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'simulationResult' is defined but never used.","line":22,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":68},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showContent' is assigned a value but never used.","line":23,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setActiveSection' is assigned a value but never used.","line":24,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":43},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/components/Phase4Solution.tsx:34:9\n  32 |\n  33 |     useEffect(() => {\n> 34 |         setShowContent(true);\n     |         ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  35 |     }, []);\n  36 |\n  37 |     const nextSection = () => {","line":34,"column":9,"nodeType":null,"endLine":34,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { UserInput, SimulationResult } from \"@/types\";\nimport { Button } from \"@/components/ui/Button\";\nimport { Card, CardContent } from \"@/components/ui/Card\";\nimport {\n    GraduationCap, CheckCircle, ArrowRight, TrendingUp, Target,\n    Lightbulb, ChevronLeft, FileText, AlertTriangle, HelpCircle,\n    UserX, UserCheck, Zap, Layers, Map, Sparkles, Users, X, ArrowLeftRight, Car\n} from \"lucide-react\";\nimport Image from \"next/image\";\n\ninterface Phase4SolutionProps {\n    userData: UserInput;\n    simulationResult: SimulationResult;\n    onNext: () => void;\n    onBack: () => void;\n    onGoToAgenda: () => void;\n}\n\nexport default function Phase4Solution({ userData, simulationResult, onNext, onBack, onGoToAgenda }: Phase4SolutionProps) {\n    const [showContent, setShowContent] = useState(false);\n    const [activeSection, setActiveSection] = useState(0);\n    const [showGoalDetail, setShowGoalDetail] = useState(false);\n    const [showPracticeDetail, setShowPracticeDetail] = useState(false);\n    const [showComparison, setShowComparison] = useState(false);\n    const [showLicenseMetaphor, setShowLicenseMetaphor] = useState(false);\n    const [showLearningComparison, setShowLearningComparison] = useState(false);\n    const [revealedBad, setRevealedBad] = useState(false);\n    const [revealedGood, setRevealedGood] = useState(false);\n\n    useEffect(() => {\n        setShowContent(true);\n    }, []);\n\n    const nextSection = () => {\n        onNext();\n    };\n\n    const prevSection = () => {\n        onBack();\n    };\n\n    return (\n        <div className=\"min-h-screen relative overflow-hidden bg-white\">\n            {/* ナビゲーション */}\n            <div className=\"fixed top-0 left-0 w-full z-50 bg-white/80 backdrop-blur-md border-b border-slate-100 py-4 px-6 flex justify-between items-center\">\n                <Button variant=\"ghost\" size=\"sm\" onClick={prevSection} className=\"text-slate-600\">\n                    <ChevronLeft className=\"w-4 h-4 mr-1\" /> {activeSection === 0 ? \"戻る\" : \"前へ\"}\n                </Button>\n                <div className=\"flex gap-2\">\n                    <div className=\"w-8 h-2 rounded-full bg-blue-600 transition-all duration-300\" />\n                </div>\n                <Button variant=\"ghost\" size=\"sm\" onClick={onGoToAgenda} className=\"text-slate-600\">\n                    <FileText className=\"w-4 h-4 mr-1\" /> 目次\n                </Button>\n            </div>\n\n            <div className=\"pt-24 pb-12 px-6 max-w-5xl mx-auto min-h-screen flex flex-col items-center justify-center\">\n\n                {/* SECTION 0: 3 Points (Slide 1) */}\n                {activeSection === 0 && (\n                    <div className=\"w-full animate-in fade-in slide-in-from-bottom-8 duration-1000\">\n                        <div className=\"text-center mb-12\">\n                            <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-slate-900/5 backdrop-blur rounded-full mb-6 ring-1 ring-slate-900/10\">\n                                <span className=\"text-blue-600 font-bold\">Section 03</span>\n                                <span className=\"text-slate-400\">/</span>\n                                <span className=\"text-slate-900\">{userData.name}様に合う投資</span>\n                            </div>\n                            <h2 className=\"text-3xl md:text-4xl lg:text-5xl font-black text-slate-900 leading-tight mb-8 whitespace-nowrap\">\n                                目標を達成するための本質的な3つのポイント\n                            </h2>\n                            <p className=\"text-slate-500 font-medium max-w-2xl mx-auto mb-10 text-lg\">\n                                資産運用の差を埋め、確実にゴールへ辿り着くために、<br className=\"hidden md:inline\" />プロが重要視する「成功の鉄則」をお伝えします。\n                            </p>\n                        </div>\n\n                        <div className=\"relative py-12 flex flex-col items-center\">\n                            {/* 三角形の図解 */}\n                            <div className=\"relative w-full max-w-md aspect-square\">\n                                <svg className=\"absolute inset-0 w-full h-full text-blue-900\" viewBox=\"0 0 100 100\">\n                                    <polygon points=\"50,15 85,85 15,85\" fill=\"currentColor\" />\n                                    <polygon points=\"50,28 78,80 22,80\" fill=\"white\" />\n                                </svg>\n\n                                {/* ①ゴールを決める */}\n                                <div\n                                    className=\"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center text-center w-64 cursor-pointer group/goal transform hover:-translate-y-1 transition-all duration-300\"\n                                    onClick={() => setShowGoalDetail(true)}\n                                >\n                                    <div className=\"w-20 h-20 rounded-full bg-white shadow-2xl border-4 border-slate-100 flex items-center justify-center mb-4 transition-all group/icon-container\">\n                                        <div className=\"absolute inset-0 rounded-full bg-blue-600 opacity-0 group-hover/goal:opacity-10 transition-opacity group-hover/goal:animate-ping\" />\n                                        <Target className=\"w-10 h-10 text-blue-900 group-hover/goal:text-blue-600 transition-colors\" />\n                                    </div>\n                                    <h4 className=\"text-xl font-black text-blue-900 mb-1 group-hover/goal:text-blue-600 transition-colors\">①ゴールを決める</h4>\n                                    <p className=\"text-slate-500 text-sm font-medium whitespace-nowrap\">曖昧な将来への不安を具体的な「数字」へと置換</p>\n                                    <div className=\"mt-2 text-blue-500 text-xs font-bold opacity-0 group-hover/goal:opacity-100 transition-opacity flex items-center gap-1\">\n                                        詳しく見る <ArrowRight className=\"w-3 h-3\" />\n                                    </div>\n                                </div>\n\n                                {/* ②体系的に学ぶ */}\n                                <div\n                                    className=\"absolute bottom-4 left-0 -translate-x-1/3 translate-y-1/2 flex flex-col items-center text-center w-64 cursor-pointer group/learn transform hover:-translate-y-1 transition-all duration-300\"\n                                    onClick={() => setShowLearningComparison(true)}\n                                >\n                                    <div className=\"w-20 h-20 rounded-full bg-white shadow-2xl border-4 border-slate-100 flex items-center justify-center mb-4 transition-all group/icon-container\">\n                                        <div className=\"absolute inset-0 rounded-full bg-blue-600 opacity-0 group-hover/learn:opacity-10 transition-opacity group-hover/learn:animate-ping\" />\n                                        <Layers className=\"w-10 h-10 text-blue-900 group-hover/learn:text-blue-600 transition-colors\" />\n                                    </div>\n                                    <h4 className=\"text-xl font-black text-blue-900 mb-1 group-hover/learn:text-blue-600 transition-colors\">②体系的に学ぶ</h4>\n                                    <p className=\"text-slate-500 text-sm font-medium whitespace-nowrap\">「断片的な知識」を「活かせる線」へ繋げる</p>\n                                    <div className=\"mt-2 text-blue-500 text-xs font-bold opacity-0 group-hover/learn:opacity-100 transition-opacity flex items-center gap-1\">\n                                        比較を見る <ArrowRight className=\"w-3 h-3\" />\n                                    </div>\n                                </div>\n\n                                {/* ③少額から実践する */}\n                                <div\n                                    className=\"absolute bottom-4 right-0 translate-x-1/3 translate-y-1/2 flex flex-col items-center text-center w-64 cursor-pointer group/practice transform hover:-translate-y-1 transition-all duration-300\"\n                                    onClick={() => setShowPracticeDetail(true)}\n                                >\n                                    <div className=\"w-20 h-20 rounded-full bg-white shadow-2xl border-4 border-slate-100 flex items-center justify-center mb-4 transition-all group/icon-container\">\n                                        <div className=\"absolute inset-0 rounded-full bg-blue-600 opacity-0 group-hover/practice:opacity-10 transition-opacity group-hover/practice:animate-ping\" />\n                                        <Zap className=\"w-10 h-10 text-blue-900 group-hover/practice:text-blue-600 transition-colors\" />\n                                    </div>\n                                    <h4 className=\"text-xl font-black text-blue-900 mb-1 group-hover/practice:text-blue-600 transition-colors\">③少額から実践する</h4>\n                                    <p className=\"text-slate-500 text-sm font-medium whitespace-nowrap\">リスクを抑え、まずは正しい一歩を踏み出す</p>\n                                    <div className=\"mt-2 text-blue-500 text-xs font-bold opacity-0 group-hover/practice:opacity-100 transition-opacity flex items-center gap-1\">\n                                        詳しく見る <ArrowRight className=\"w-3 h-3\" />\n                                    </div>\n                                </div>\n\n                                <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n                                    <span className=\"text-6xl font-black text-blue-900 opacity-5\">CORE</span>\n                                </div>\n                            </div>\n\n                            {/* 特殊パネルトグル (成功 vs 失敗のみが残る - 下部ボタンとラインを合わせる) */}\n                            <div className=\"absolute -bottom-48 left-4 flex flex-col gap-4\">\n                                {/* 成功 vs 失敗 (黒) */}\n                                <div className=\"group/btn relative\">\n                                    <button\n                                        onClick={() => setShowComparison(!showComparison)}\n                                        className={`w-14 h-14 rounded-full flex items-center justify-center shadow-2xl transition-all duration-500 transform hover:scale-110 active:scale-95 z-20 ${showComparison ? \"bg-blue-600 text-white rotate-45\" : \"bg-slate-900 text-white\"}`}\n                                    >\n                                        {showComparison ? <X className=\"w-8 h-8\" /> : <ArrowLeftRight className=\"w-8 h-8\" />}\n                                    </button>\n                                    {!showComparison && (\n                                        <div className=\"absolute left-18 top-1/2 -translate-y-1/2 ml-4 whitespace-nowrap bg-slate-900 text-white text-[10px] font-black px-4 py-2 rounded-lg pointer-events-none opacity-0 group-hover/btn:opacity-100 transition-all duration-300 transform translate-x-1 group-hover/btn:translate-x-0\">\n                                            失敗・成功の違いをチェック\n                                            <div className=\"absolute left-0 top-1/2 -translate-x-full -translate-y-1/2 border-8 border-transparent border-r-slate-900\" />\n                                        </div>\n                                    )}\n                                </div>\n                            </div>\n\n                            {/* 比較オーバーレイパネル (成功 vs 失敗) */}\n                            {showComparison && (\n                                <div className=\"absolute inset-0 z-[60] bg-white/95 backdrop-blur-sm rounded-[3rem] p-4 md:p-8 animate-in zoom-in-95 duration-500 overflow-y-auto border-4 border-slate-900/5 shadow-[0_40px_100px_-20px_rgba(0,0,0,0.2)]\">\n                                    <div className=\"text-center mb-8 relative\">\n                                        <button\n                                            onClick={() => setShowComparison(false)}\n                                            className=\"absolute -top-2 -right-2 w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 hover:text-slate-900 transition-all\"\n                                        >\n                                            <X className=\"w-5 h-5\" />\n                                        </button>\n                                        <h3 className=\"text-2xl font-black text-slate-900\">投資で失敗する人・成功する人</h3>\n                                        <div className=\"w-16 h-1 bg-blue-600 mx-auto mt-2\"></div>\n                                    </div>\n\n                                    <div className=\"grid md:grid-cols-2 gap-4\">\n                                        {/* 失敗する人 - BAD */}\n                                        <div\n                                            className=\"bg-slate-50 rounded-3xl p-6 border border-slate-100 relative group/card cursor-pointer\"\n                                            onClick={() => setRevealedBad(true)}\n                                        >\n                                            <div className=\"flex items-center gap-2 mb-6\">\n                                                <div className=\"w-8 h-8 bg-gray-200 rounded-lg flex items-center justify-center\">\n                                                    <UserX className=\"w-4 h-4 text-gray-500\" />\n                                                </div>\n                                                <h4 className=\"text-lg font-black text-slate-900 flex items-baseline gap-1\">\n                                                    失敗する人\n                                                    <span className=\"text-blue-400 font-black text-xl italic ml-1\">BAD</span>\n                                                </h4>\n                                            </div>\n\n                                            <div className={`space-y-2 transition-all duration-700 ${revealedBad ? 'opacity-100 blur-0' : 'opacity-20 blur-sm pointer-events-none'}`}>\n                                                {[\n                                                    \"投資のゴールがない\",\n                                                    \"他人のおすすめ銘柄を買っている\",\n                                                    \"SNSやYouTubeなど、無料の情報に頼っている\",\n                                                    \"銀行や証券会社で勧められたものを買っている\",\n                                                    \"とりあえず始めている\",\n                                                    \"時間がないを言い訳にしている\"\n                                                ].map((text, i) => (\n                                                    <li key={i} className=\"bg-white px-4 py-3 rounded-xl border border-slate-100 text-sm font-bold text-slate-600 flex items-center gap-2 list-none\">\n                                                        <div className=\"w-1.5 h-1.5 rounded-full bg-slate-300 shrink-0\" />\n                                                        {text}\n                                                    </li>\n                                                ))}\n                                            </div>\n\n                                            {!revealedBad && (\n                                                <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-slate-900/10 backdrop-blur-[2px] rounded-3xl animate-in fade-in duration-500\">\n                                                    <div className=\"bg-white px-4 py-2 rounded-full shadow-lg border border-slate-200 flex items-center gap-2 transform group-hover/card:scale-105 transition-transform\">\n                                                        <Zap className=\"w-4 h-4 text-blue-600 animate-pulse\" />\n                                                        <span className=\"text-xs font-black text-slate-900\">クリックして開示</span>\n                                                    </div>\n                                                </div>\n                                            )}\n                                        </div>\n\n                                        {/* 成功する人 - GOOD */}\n                                        <div\n                                            className=\"bg-blue-50/50 rounded-3xl p-6 border-2 border-blue-100 shadow-xl relative group/card cursor-pointer\"\n                                            onClick={() => setRevealedGood(true)}\n                                        >\n                                            <div className=\"flex items-center gap-2 mb-6\">\n                                                <div className=\"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center\">\n                                                    <UserCheck className=\"w-4 h-4 text-white\" />\n                                                </div>\n                                                <h4 className=\"text-lg font-black text-slate-900 flex items-baseline gap-1\">\n                                                    成功する人\n                                                    <span className=\"text-amber-500 font-black text-xl italic ml-1\">GOOD</span>\n                                                </h4>\n                                            </div>\n\n                                            <div className={`space-y-2 transition-all duration-700 ${revealedGood ? 'opacity-100 blur-0 translate-y-0' : 'opacity-20 blur-sm pointer-events-none'}`}>\n                                                {[\n                                                    \"自分なりの考えのもと選べている\",\n                                                    \"膨大な量の無料の情報に左右されない\",\n                                                    \"投資の目的が明確である\",\n                                                    \"人頼みの考えがない\",\n                                                    \"年利の理解ができている\",\n                                                    \"知識をつける意欲がある\"\n                                                ].map((text, i) => (\n                                                    <li key={i} className=\"bg-white px-4 py-3 rounded-xl border border-blue-100 text-sm font-black text-slate-900 flex items-center gap-2 list-none\">\n                                                        <CheckCircle className=\"w-4 h-4 text-blue-600 shrink-0\" />\n                                                        {text}\n                                                    </li>\n                                                ))}\n                                            </div>\n\n                                            {!revealedGood && (\n                                                <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-blue-600/5 backdrop-blur-[2px] rounded-3xl animate-in fade-in duration-500\">\n                                                    <div className=\"bg-white px-4 py-2 rounded-full shadow-lg border border-blue-100 flex items-center gap-2 transform group-hover/card:scale-105 transition-transform\">\n                                                        <Zap className=\"w-4 h-4 text-amber-500 animate-pulse\" />\n                                                        <span className=\"text-xs font-black text-slate-900\">クリックして開示</span>\n                                                    </div>\n                                                </div>\n                                            )}\n                                        </div>\n                                    </div>\n                                </div>\n                            )}\n\n                            {/* 学習方法比較オーバーレイ (Slide 2を統合) */}\n                            {showLearningComparison && (\n                                <div className=\"absolute inset-x-[-2rem] top-[-2rem] bottom-[-4rem] z-[70] bg-white animate-in slide-in-from-bottom duration-500 overflow-y-auto p-8 rounded-[3rem] shadow-2xl border-t-8 border-blue-600\">\n                                    <div className=\"max-w-4xl mx-auto py-8\">\n                                        <div className=\"flex justify-between items-start mb-8\">\n                                            <div className=\"text-left\">\n                                                <h3 className=\"text-3xl font-black text-slate-900 mb-2\">学習の方法による違い</h3>\n                                                <p className=\"text-slate-500 font-bold italic\">投資の結果は「学び方」で決まります</p>\n                                            </div>\n                                            <button\n                                                onClick={() => setShowLearningComparison(false)}\n                                                className=\"w-14 h-14 rounded-full bg-slate-100 flex items-center justify-center text-slate-400 hover:text-slate-900 hover:bg-slate-200 transition-all shadow-sm\"\n                                            >\n                                                <X className=\"w-8 h-8\" />\n                                            </button>\n                                        </div>\n\n                                        <div className=\"inline-block w-full px-8 py-4 bg-blue-900 text-white rounded-2xl font-black text-xl shadow-xl mb-12 text-center\">\n                                            断片的な知識を得ても、投資は失敗します！\n                                        </div>\n\n                                        <div className=\"grid md:grid-cols-2 gap-12 mt-16 pb-24\">\n                                            {/* 体系的に学んだ場合 */}\n                                            <div className=\"flex flex-col items-center\">\n                                                <h4 className=\"text-2xl font-black text-slate-800 mb-8 flex items-center gap-3\">\n                                                    <span className=\"text-blue-600 text-4xl\">基礎</span>から<br />体系的に学んだ場合\n                                                </h4>\n                                                <div className=\"relative w-full aspect-[4/3] bg-slate-50 border border-slate-100 p-8 flex flex-col items-center group overflow-hidden rounded-[2.5rem] shadow-inner\">\n                                                    <span className=\"text-xs font-black text-blue-900/40 tracking-[0.3em] uppercase mb-4\">Start</span>\n                                                    <div className=\"text-2xl font-black text-blue-900 mb-6\">スタート</div>\n                                                    <div className=\"flex justify-between w-full max-w-sm relative flex-1 h-full mb-2\">\n                                                        {[\n                                                            { colors: ['bg-blue-50', 'bg-blue-100', 'bg-blue-300'], delay: 0 },\n                                                            { colors: ['bg-green-50', 'bg-green-100', 'bg-green-300'], delay: 600 },\n                                                            { colors: ['bg-amber-50', 'bg-amber-100', 'bg-amber-300'], delay: 1200 }\n                                                        ].map((col, cIdx) => (\n                                                            <div key={cIdx} className=\"w-[30%] relative flex flex-col justify-between h-full\">\n                                                                <div className=\"absolute left-1/2 top-0 -bottom-6 w-1 -translate-x-1/2 z-20 pointer-events-none\">\n                                                                    <div className=\"absolute inset-0 bg-blue-900/10 rounded-full overflow-hidden\">\n                                                                        <div className=\"h-full bg-blue-600 animate-[grow_1s_ease-out_forwards] relative overflow-hidden\" style={{ animationDelay: `${col.delay}ms` }}>\n                                                                            <div className=\"absolute top-0 left-0 right-0 h-20 bg-gradient-to-b from-transparent via-white/80 to-transparent opacity-0 animate-[flow_3s_infinite]\" style={{ animationDelay: `${col.delay + 1000}ms` }} />\n                                                                        </div>\n                                                                    </div>\n                                                                    {/* 軸と同じテイストの下方向矢印 */}\n                                                                    <div\n                                                                        className=\"absolute -bottom-2 left-1/2 -translate-x-1/2 w-0 h-0 border-l-[6px] border-l-transparent border-r-[6px] border-r-transparent border-t-[10px] border-t-blue-600 animate-in fade-in zoom-in duration-500 fill-mode-both\"\n                                                                        style={{ animationDelay: `${col.delay + 1000}ms` }}\n                                                                    ></div>\n                                                                </div>\n                                                                {col.colors.map((color, bIdx) => (\n                                                                    <div key={bIdx} className={`w-full h-[28%] ${color} border border-slate-200 shadow-sm relative z-10`} style={{ clipPath: 'polygon(0% 0%, 100% 0%, 100% 85%, 50% 100%, 0% 85%)' }}></div>\n                                                                ))}\n                                                            </div>\n                                                        ))}\n                                                    </div>\n                                                    <div className=\"mt-8 relative group\">\n                                                        <div className=\"text-5xl font-black bg-gradient-to-r from-blue-900 via-blue-500 to-blue-900 bg-[length:200%_auto] animate-[shimmer_3s_linear_infinite] bg-clip-text text-transparent transition-all duration-500 hover:scale-105 cursor-default relative z-30\">\n                                                            ゴール\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            {/* 断片的に学んだ場合 */}\n                                            <div className=\"flex flex-col items-center\">\n                                                <h4 className=\"text-2xl font-black text-slate-800 mb-8 flex items-center gap-3\">\n                                                    <span className=\"text-slate-400 text-4xl italic\">YouTube</span>などで<br />断片的に学んだ場合\n                                                </h4>\n                                                <div className=\"relative w-full aspect-[4/3] bg-slate-50 border border-slate-100 p-8 flex flex-col items-center group overflow-hidden rounded-[2.5rem] shadow-inner\">\n                                                    <div className=\"flex w-full h-full\">\n                                                        <div className=\"flex flex-col items-center justify-start pt-12 pr-8 pl-4\">\n                                                            <span className=\"text-3xl font-black text-blue-900 leading-none [writing-mode:vertical-rl] tracking-tighter opacity-80 animate-pulse\">スタート？</span>\n                                                        </div>\n                                                        <div className=\"flex-1 flex flex-col\">\n                                                            <div className=\"flex justify-between w-full h-full relative mb-6\">\n                                                                <div className=\"absolute inset-0 z-20 pointer-events-none\">\n                                                                    <svg className=\"w-full h-full\" viewBox=\"0 0 300 180\" preserveAspectRatio=\"none\" overflow=\"visible\">\n                                                                        <path d=\"M -50 90 L 50 90 L 150 30 L 250 30 L 50 150 L 50 200\" fill=\"none\" stroke=\"#1e3a8a\" strokeWidth=\"5\" className=\"animate-[dash_10s_linear_infinite]\" strokeDasharray=\"12 12\" />\n                                                                        <path d=\"M 40 190 L 50 205 L 60 190\" fill=\"none\" stroke=\"#1e3a8a\" strokeWidth=\"5\" />\n                                                                    </svg>\n                                                                </div>\n                                                                {[\n                                                                    { colors: [null, 'bg-blue-100', 'bg-blue-300'] },\n                                                                    { colors: ['bg-green-100', null, null] },\n                                                                    { colors: ['bg-amber-100', null, null] }\n                                                                ].map((col, cIdx) => (\n                                                                    <div key={cIdx} className=\"w-[30%] relative flex flex-col justify-between h-full\">\n                                                                        {col.colors.map((color, bIdx) => (\n                                                                            <div key={bIdx} className={`w-full h-[28%] ${color ? color + ' border-slate-300 shadow-sm opacity-60' : 'border-dashed border-2 border-slate-300 bg-transparent opacity-30'} border relative z-10`}></div>\n                                                                        ))}\n                                                                    </div>\n                                                                ))}\n                                                            </div>\n                                                            <div className=\"text-3xl font-black text-blue-900 opacity-80 tracking-tighter mt-4 ml-2 animate-pulse\">ゴール？</div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                        {/* キャプション/注釈エリア */}\n                                        <div className=\"mt-12 flex items-center justify-center relative min-h-[80px]\">\n                                            {/* 車の免許の例え (黄色) - 左下に固定配置 */}\n                                            <div className=\"absolute left-4 bottom-4 group/btn\">\n                                                <button\n                                                    onClick={() => setShowLicenseMetaphor(true)}\n                                                    className=\"w-20 h-20 rounded-full bg-amber-400 text-white flex items-center justify-center shadow-2xl transition-all duration-500 transform hover:scale-110 hover:shadow-amber-200/50 active:scale-95 border-4 border-white\"\n                                                >\n                                                    <Car className=\"w-10 h-10\" />\n                                                </button>\n                                                <div className=\"absolute left-0 bottom-full mb-4 whitespace-nowrap bg-amber-500 text-white text-[10px] font-black px-4 py-2 rounded-lg pointer-events-none opacity-0 group-hover/btn:opacity-100 transition-all duration-300 transform translate-y-1 group-hover/btn:translate-y-0 shadow-xl\">\n                                                    投資と車の例え話を確認\n                                                    <div className=\"absolute left-4 top-full border-8 border-transparent border-t-amber-500\" />\n                                                </div>\n                                            </div>\n\n                                            <Button\n                                                onClick={() => setShowLearningComparison(false)}\n                                                className=\"bg-slate-900 hover:bg-black text-white font-black px-12 h-16 rounded-full shadow-lg group flex items-center gap-2\"\n                                            >\n                                                <X className=\"w-5 h-5\" />\n                                                詳細を閉じて戻る\n                                            </Button>\n                                        </div>\n                                    </div>\n                                </div>\n                            )}\n                        </div>\n\n                        <div className=\"mt-32 text-center\">\n                            <Button onClick={nextSection} size=\"lg\" className=\"bg-blue-600 hover:bg-black text-white font-black px-12 h-16 rounded-full shadow-lg group\">\n                                効率的な学習方法とは？\n                                <ArrowRight className=\"ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform\" />\n                            </Button>\n                        </div>\n                    </div>\n                )}\n            </div>\n\n            {/* Deep Dive Slide: Goal Setting */}\n            {showGoalDetail && (\n                <div\n                    className=\"fixed inset-0 z-[100] bg-slate-900/40 backdrop-blur-xl flex items-center justify-center p-4 md:p-8 animate-in fade-in duration-500\"\n                    onClick={() => setShowGoalDetail(false)}\n                >\n                    <div\n                        className=\"bg-white rounded-[3rem] overflow-hidden max-w-5xl w-full max-h-[90vh] shadow-[0_50px_100px_-20px_rgba(0,0,0,0.5)] flex flex-col md:flex-row animate-in zoom-in-95 duration-500\"\n                        onClick={(e) => e.stopPropagation()}\n                    >\n                        {/* Left: Illustration */}\n                        <div className=\"md:w-1/2 relative bg-blue-900 min-h-[300px]\">\n                            <Image\n                                src=\"/images/goal_detail.png\"\n                                alt=\"Investment Goal Metaphor\"\n                                fill\n                                className=\"object-cover opacity-90\"\n                            />\n                            <div className=\"absolute inset-0 bg-gradient-to-t from-blue-900/90 via-blue-900/40 to-transparent flex items-end p-8 md:p-12\">\n                                <div className=\"text-white\">\n                                    <div className=\"bg-blue-400 w-16 h-1 mb-6\"></div>\n                                    <h5 className=\"text-3xl font-black mb-4 leading-tight\">人生は、長い航海。</h5>\n                                    <p className=\"text-blue-100 text-lg leading-relaxed opacity-90\">\n                                        目的地のない船は、<br />\n                                        どんなに速いエンジンを持っていても、<br />\n                                        決して理想の岸には辿り着けません。\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Right: Content */}\n                        <div className=\"md:w-1/2 p-8 md:p-16 flex flex-col justify-center bg-white relative\">\n                            <button\n                                onClick={() => setShowGoalDetail(false)}\n                                className=\"absolute top-8 right-8 w-12 h-12 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-all\"\n                            >\n                                <X className=\"w-6 h-6\" />\n                            </button>\n\n                            <div className=\"mb-12\">\n                                <div className=\"inline-flex items-center gap-2 px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-xs font-bold tracking-widest uppercase mb-4\">\n                                    <Target className=\"w-3 h-3\" /> Essentials\n                                </div>\n                                <h3 className=\"text-4xl font-black text-slate-900 leading-tight\">なぜ「ゴール」が<br /><span className=\"text-blue-600\">最優先</span>なのか？</h3>\n                            </div>\n\n                            <div className=\"space-y-10\">\n                                <div className=\"flex gap-6 group\">\n                                    <div className=\"w-14 h-14 rounded-2xl bg-amber-50 flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform duration-300\">\n                                        <Lightbulb className=\"w-7 h-7 text-amber-600\" />\n                                    </div>\n                                    <div>\n                                        <h4 className=\"text-xl font-black text-slate-900 mb-2\">灯台（数字）が道標になる</h4>\n                                        <p className=\"text-slate-500 leading-relaxed\">\n                                            「将来がなんとなく不安」という深い霧を、<br />\n                                            「月5万円の不足」という具体的な<span className=\"text-slate-900 font-bold\">数字の灯台</span>に変える。\n                                            そこから初めて、正しい航路が見えてきます。\n                                        </p>\n                                    </div>\n                                </div>\n\n                                <div className=\"flex gap-6 group\">\n                                    <div className=\"w-14 h-14 rounded-2xl bg-blue-50 flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform duration-300\">\n                                        <Map className=\"w-7 h-7 text-blue-600\" />\n                                    </div>\n                                    <div>\n                                        <h4 className=\"text-xl font-black text-slate-900 mb-2\">自分に最適な「船」を選べる</h4>\n                                        <p className=\"text-slate-500 leading-relaxed\">\n                                            目的地が決まれば、リスクを取って加速すべきか、着実に守りながら進むべきか、\n                                            <span className=\"text-slate-900 font-bold\">あなただけの最適な投資手法（船）</span>が明白になります。\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <Button\n                                onClick={() => setShowGoalDetail(false)}\n                                size=\"lg\"\n                                className=\"mt-16 w-full bg-blue-600 hover:bg-black text-white font-black h-20 rounded-2xl shadow-xl shadow-blue-200 transition-all flex items-center justify-center gap-3 text-xl\"\n                            >\n                                <X className=\"w-6 h-6\" />\n                                閉じて戻る\n                            </Button>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {/* Deep Dive Slide: Driver's License Metaphor (Yellow Icon) */}\n            {showLicenseMetaphor && (\n                <div\n                    className=\"fixed inset-0 z-[100] bg-slate-900/40 backdrop-blur-xl flex items-center justify-center p-4 md:p-8 animate-in fade-in duration-500\"\n                    onClick={() => setShowLicenseMetaphor(false)}\n                >\n                    <div\n                        className=\"bg-white rounded-[3rem] overflow-hidden max-w-5xl w-full max-h-[90vh] shadow-[0_50px_100px_-20px_rgba(0,0,0,0.5)] flex flex-col md:flex-row animate-in zoom-in-95 duration-500\"\n                        onClick={(e) => e.stopPropagation()}\n                    >\n                        {/* Left: Illustration */}\n                        <div className=\"md:w-1/2 relative bg-slate-900 min-h-[300px]\">\n                            <Image\n                                src=\"/images/learning_detail.png\"\n                                alt=\"Driver's License Metaphor\"\n                                fill\n                                className=\"object-cover opacity-90\"\n                            />\n                            <div className=\"absolute inset-0 bg-gradient-to-t from-slate-900/95 via-slate-900/40 to-transparent flex items-end p-8 md:p-12\">\n                                <div className=\"text-white\">\n                                    <div className=\"bg-amber-400 w-16 h-1 mb-6\"></div>\n                                    <h5 className=\"text-3xl font-black mb-4 leading-tight text-white\">投資も「運転」と同じ。</h5>\n                                    <p className=\"text-slate-100 text-lg leading-relaxed opacity-90\">\n                                        目的地が決まっても、<br />\n                                        免許がなければハンドルは握れません。<br />\n                                        正しい知識こそが、あなたを守る免許証です。\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Right: Content */}\n                        <div className=\"md:w-1/2 p-8 md:p-16 flex flex-col justify-center bg-white relative\">\n                            <button\n                                onClick={() => setShowLicenseMetaphor(false)}\n                                className=\"absolute top-8 right-8 w-12 h-12 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-all shadow-sm\"\n                            >\n                                <X className=\"w-6 h-6\" />\n                            </button>\n\n                            <div className=\"mb-12\">\n                                <div className=\"inline-flex items-center gap-2 px-3 py-1 bg-amber-50 text-amber-600 rounded-full text-xs font-bold tracking-widest uppercase mb-4\">\n                                    <Layers className=\"w-3 h-3\" /> Skill Mastery\n                                </div>\n                                <h3 className=\"text-4xl font-black text-slate-900 leading-tight\">なぜ「体系的に」<br /><span className=\"text-amber-500\">学ぶ</span>必要があるのか？</h3>\n                            </div>\n\n                            <div className=\"space-y-10\">\n                                <div className=\"flex gap-6 group\">\n                                    <div className=\"w-14 h-14 rounded-2xl bg-amber-50/50 flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform duration-300\">\n                                        <div className=\"text-2xl font-black text-amber-600 opacity-40\">01</div>\n                                    </div>\n                                    <div>\n                                        <h4 className=\"text-xl font-black text-slate-900 mb-2\">「鉄の塊」を制御するために</h4>\n                                        <p className=\"text-slate-500 leading-relaxed font-medium\">\n                                            目的地が決まり、どれだけ遠出をしたいと思っても、免許がない状態で運転はできません。\n                                            あの<span className=\"text-slate-900 font-bold underline decoration-amber-200 underline-offset-4 decoration-4\">「鉄の塊」</span>を安全に動かすには、正しい知識が必要です。\n                                        </p>\n                                    </div>\n                                </div>\n\n                                <div className=\"flex gap-6 group\">\n                                    <div className=\"w-14 h-14 rounded-2xl bg-amber-50/50 flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform duration-300\">\n                                        <div className=\"text-2xl font-black text-amber-600 opacity-40\">02</div>\n                                    </div>\n                                    <div>\n                                        <h4 className=\"text-xl font-black text-slate-900 mb-2\">教習所での「練習」の重要性</h4>\n                                        <p className=\"text-slate-500 leading-relaxed font-medium\">\n                                            誰もが<span className=\"text-slate-900 font-bold\">教習所などで勉強し、練習を繰り返して</span>初めて安全運転ができるようになります。\n                                            投資においても、全く同じステップが必要不可欠なのです。\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <Button\n                                onClick={() => setShowLicenseMetaphor(false)}\n                                size=\"lg\"\n                                className=\"mt-16 w-full bg-slate-900 hover:bg-black text-white font-black h-20 rounded-2xl shadow-2xl transition-all flex items-center justify-center gap-3 text-xl\"\n                            >\n                                <X className=\"w-6 h-6\" />\n                                閉じて戻る\n                            </Button>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n\n            {showPracticeDetail && (\n                <div\n                    className=\"fixed inset-0 z-[100] bg-slate-900/40 backdrop-blur-xl flex items-center justify-center p-4 md:p-8 animate-in fade-in duration-500\"\n                    onClick={() => setShowPracticeDetail(false)}\n                >\n                    <div\n                        className=\"bg-white rounded-[3rem] overflow-hidden max-w-5xl w-full max-h-[90vh] shadow-[0_50px_100px_-20px_rgba(0,0,0,0.5)] flex flex-col md:flex-row animate-in zoom-in-95 duration-500\"\n                        onClick={(e) => e.stopPropagation()}\n                    >\n                        {/* Image/Illustration side */}\n                        <div className=\"md:w-[45%] relative bg-slate-50 p-6 flex items-center justify-center border-b md:border-b-0 md:border-r border-slate-100\">\n                            <div className=\"relative w-full h-full flex flex-col\">\n                                <div className=\"flex-1 relative min-h-[250px] shadow-2xl rounded-2xl overflow-hidden border border-slate-200\">\n                                    <Image\n                                        src=\"/images/mini_stock_services.png\"\n                                        alt=\"Mini Stock Services Comparison\"\n                                        fill\n                                        className=\"object-contain bg-white p-4\"\n                                    />\n                                </div>\n                                <div className=\"mt-6 p-6 bg-blue-50 rounded-2xl border border-blue-100 flex items-start gap-3\">\n                                    <AlertTriangle className=\"w-6 h-6 text-blue-600 shrink-0 mt-1\" />\n                                    <div>\n                                        <p className=\"text-blue-900 font-black text-lg mb-1\">株は1株から買える時代です</p>\n                                        <p className=\"text-blue-700/80 text-sm font-medium leading-relaxed\">\n                                            かつては数十万円必要だった株式投資も、今はスマホ一つで「数百円」から始められます。\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Right: Content */}\n                        <div className=\"md:w-[55%] p-8 md:p-14 flex flex-col justify-center bg-white relative text-left\">\n                            <button\n                                onClick={() => setShowPracticeDetail(false)}\n                                className=\"absolute top-8 right-8 w-12 h-12 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-all shadow-sm\"\n                            >\n                                <X className=\"w-6 h-6\" />\n                            </button>\n\n                            <div className=\"mb-10 text-left\">\n                                <div className=\"inline-flex items-center gap-2 px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-xs font-bold tracking-widest uppercase mb-4\">\n                                    <Zap className=\"w-3 h-3 text-blue-500 fill-blue-500\" /> Start Small\n                                </div>\n                                <h3 className=\"text-4xl font-black text-slate-900 leading-tight\">なぜ「少額」から<br /><span className=\"text-blue-600\">実践</span>するのか？</h3>\n                            </div>\n\n                            <div className=\"space-y-8\">\n                                <div className=\"p-6 rounded-2xl bg-slate-50 border border-slate-100 group hover:border-blue-200 hover:bg-blue-50/30 transition-all cursor-default\">\n                                    <h4 className=\"text-xl font-black text-slate-900 mb-3 flex items-center gap-2\">\n                                        <div className=\"w-2 h-2 rounded-full bg-blue-500\" />\n                                        致命傷を避け、一歩を踏み出す\n                                    </h4>\n                                    <p className=\"text-slate-600 leading-relaxed\">\n                                        最初から大きなリスクを取る必要はありません。数百円から始めて<span className=\"text-slate-900 font-bold\">「まずは正しい一歩」</span>を踏み出す。\n                                        多くの証券会社が提供するミニ株なら、それが可能です。\n                                    </p>\n                                </div>\n\n                                <div className=\"p-6 rounded-2xl bg-slate-50 border border-slate-100 group hover:border-blue-200 hover:bg-blue-50/30 transition-all cursor-default\">\n                                    <h4 className=\"text-xl font-black text-slate-900 mb-3 flex items-center gap-2\">\n                                        <div className=\"w-2 h-2 rounded-full bg-blue-500\" />\n                                        「自分事」として学ぶための最適解\n                                    </h4>\n                                    <p className=\"text-slate-600 leading-relaxed\">\n                                        教科書を100回読むより、100円の株を1株買う方が遥かに学びになります。\n                                        自分のお金が動く感覚こそが、<span className=\"text-slate-900 font-bold\">市場と向き合う「真の経験値」</span>へと変わります。\n                                    </p>\n                                </div>\n                            </div>\n\n                            <Button\n                                onClick={() => setShowPracticeDetail(false)}\n                                size=\"lg\"\n                                className=\"mt-12 w-full bg-slate-900 text-white font-black h-20 rounded-2xl shadow-xl hover:bg-black transition-all text-xl\"\n                            >\n                                閉じて戻る\n                            </Button>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            <style jsx>{`\n                @keyframes grow {\n                    from { height: 0; }\n                    to { height: 100%; }\n                }\n                @keyframes shimmer {\n                    from { background-position: 0% center; }\n                    to { background-position: 200% center; }\n                }\n                @keyframes flow {\n                    0% { transform: translateY(-100%); opacity: 0; }\n                    20% { opacity: 1; }\n                    80% { opacity: 1; }\n                    100% { transform: translateY(400%); opacity: 0; }\n                }\n                @keyframes dash {\n                    to { stroke-dashoffset: -100; }\n                }\n            `}</style>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/components/Phase5Closing.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Map' is defined but never used.","line":11,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":54,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Map"},"fix":{"range":[458,463],"text":""},"desc":"Remove unused variable \"Map\"."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/components/Phase5Closing.tsx:30:9\n  28 |\n  29 |     useEffect(() => {\n> 30 |         setShowContent(true);\n     |         ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  31 |     }, []);\n  32 |\n  33 |     const handleInterest = (value: \"yes\" | \"no\") => {","line":30,"column":9,"nodeType":null,"endLine":30,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { UserInput, SimulationResult } from \"@/types\";\nimport { formatManYen } from \"@/lib/simulation\";\nimport { Button } from \"@/components/ui/Button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/Card\";\nimport {\n    CheckCircle, Star, Crown, Sparkles, MessageCircle,\n    ExternalLink, ThumbsUp, ThumbsDown, CreditCard,\n    Shield, Zap, BookOpen, ChevronLeft, FileText, Map, ArrowRight\n} from \"lucide-react\";\nimport Image from \"next/image\";\n\ninterface Phase5ClosingProps {\n    userData: UserInput;\n    simulationResult: SimulationResult;\n    onBack: () => void;\n    onGoToAgenda: () => void;\n}\n\nexport default function Phase5Closing({ userData, simulationResult, onBack, onGoToAgenda }: Phase5ClosingProps) {\n    const [interest, setInterest] = useState<\"yes\" | \"no\" | null>(null);\n    const [showPlan, setShowPlan] = useState(false);\n    const [showContent, setShowContent] = useState(false);\n    const [selectedPlan, setSelectedPlan] = useState<string | null>(null);\n    const [activeStep, setActiveStep] = useState(0); // 0: GFS Intro, 1: Proposal\n\n    useEffect(() => {\n        setShowContent(true);\n    }, []);\n\n    const handleInterest = (value: \"yes\" | \"no\") => {\n        setInterest(value);\n        if (value === \"yes\") {\n            setShowPlan(true);\n        }\n    };\n\n    const plans = [\n        {\n            name: \"スタンダードプラン\",\n            icon: BookOpen,\n            color: \"from-blue-500 to-blue-600\",\n            normalPrice: \"698,000円\",\n            specialPrice: \"398,000円\",\n            features: [\n                \"全講義の視聴\",\n                \"専任コンサルタントへの相談\",\n                \"講師や投資仲間と交流できる掲示板\",\n            ],\n        },\n        {\n            name: \"ゴールドプラン\",\n            icon: Star,\n            color: \"from-amber-400 to-yellow-500\",\n            normalPrice: \"1,058,000円\",\n            specialPrice: \"578,000円\",\n            features: [\n                \"全講義の視聴\",\n                \"専任コンサルタントへの相談\",\n                \"相場分析力アップゼミ（ブンゼミ）\",\n                \"銘柄分析ツール（GFSの眼）\",\n            ],\n            highlight: false,\n        },\n        {\n            name: \"プラチナプラン\",\n            icon: Crown,\n            color: \"from-slate-600 to-slate-800\",\n            normalPrice: \"1,498,000円\",\n            specialPrice: \"908,000円\",\n            features: [\n                \"ゴールドプランの全機能\",\n                \"個別株実践勉強ゼミ\",\n                \"年利50%以上を目指す環境\",\n                \"VIP限定のライブセミナー\",\n            ],\n            highlight: true,\n        },\n    ];\n\n    const paymentMethods = [\n        {\n            title: \"一括払い\",\n            description: \"最安値で入学できる。最初の投資資金に回せる\",\n            icon: Zap,\n        },\n        {\n            title: \"分割払い\",\n            description: \"クレジットカードで後から分割可能\",\n            icon: CreditCard,\n        },\n    ];\n\n    return (\n        <div className=\"min-h-screen relative overflow-hidden bg-gradient-to-br from-slate-50 via-blue-50 to-white\">\n            {/* 背景のマスコット画像 */}\n            <div className=\"absolute inset-0 pointer-events-none\">\n                <Image\n                    src=\"/mascot/mascot_cheer_pink.png\"\n                    alt=\"\"\n                    width={220}\n                    height={220}\n                    className=\"absolute -top-10 -left-10 opacity-10 animate-float-slow\"\n                />\n                <Image\n                    src=\"/mascot/mascot_happy.png\"\n                    alt=\"\"\n                    width={200}\n                    height={200}\n                    className=\"absolute top-1/4 -right-10 opacity-10 animate-float-delayed\"\n                />\n                <Image\n                    src=\"/mascot/mascot_phone.png\"\n                    alt=\"\"\n                    width={180}\n                    height={180}\n                    className=\"absolute -bottom-10 left-1/3 opacity-10 animate-bounce-gentle\"\n                />\n            </div>\n\n            <div className=\"relative z-10 min-h-screen pt-20 pb-8 px-4\">\n                <div className=\"max-w-6xl mx-auto\">\n                    {activeStep === 0 && (\n                        <div className=\"w-full animate-in zoom-in fade-in duration-1000\">\n                            <div className=\"bg-slate-900 rounded-[4rem] p-12 md:p-20 text-white shadow-[0_50px_100px_rgba(0,0,0,0.3)] relative overflow-hidden text-center\">\n                                <div className=\"absolute top-0 right-0 w-1/2 h-full bg-blue-600/10 skew-x-12 translate-x-1/2 pointer-events-none\"></div>\n\n                                <div className=\"flex justify-between items-center mb-8 w-full max-w-6xl mx-auto\">\n                                    <Button\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        onClick={onBack}\n                                        className=\"text-slate-400 hover:text-white transition-colors\"\n                                    >\n                                        <ChevronLeft className=\"w-4 h-4 mr-1\" />\n                                        戻る\n                                    </Button>\n                                    <Button\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        onClick={onGoToAgenda}\n                                        className=\"text-slate-400 hover:text-white transition-colors\"\n                                    >\n                                        <FileText className=\"w-4 h-4 mr-1\" />\n                                        目次\n                                    </Button>\n                                </div>\n\n                                <div className=\"relative z-10\">\n                                    <div className=\"inline-flex items-center gap-2 px-6 py-2 bg-blue-500/10 backdrop-blur rounded-full mb-8 ring-1 ring-blue-500/20\">\n                                        <span className=\"text-blue-400 font-bold\">Section 04</span>\n                                        <span className=\"text-white/20\">/</span>\n                                        <span className=\"text-blue-100 font-medium\">投資の学びとは？</span>\n                                    </div>\n\n\n                                    <h3 className=\"text-3xl md:text-5xl font-black mb-12 leading-tight\">\n                                        <span className=\"bg-gradient-to-r from-blue-400 to-blue-200 bg-clip-text text-transparent whitespace-nowrap\">GFSを使って一緒に見ていこう！</span>\n                                    </h3>\n\n                                    <div className=\"max-w-2xl mx-auto mb-16 px-4\">\n                                        <a\n                                            href=\"https://gfs.tokyo/\"\n                                            target=\"_blank\"\n                                            rel=\"noopener noreferrer\"\n                                            className=\"group relative block w-full overflow-hidden rounded-[2.5rem] bg-white p-[1px] transition-all duration-500 hover:scale-[1.02] hover:shadow-[0_40px_80px_rgba(0,0,0,0.1)] shadow-xl\"\n                                        >\n                                            <div className=\"relative bg-white rounded-[2.5rem] p-8 md:p-10 flex flex-col items-center justify-center border border-slate-100\">\n                                                <div className=\"flex items-center gap-6 mb-4\">\n                                                    <div className=\"w-24 h-24 flex items-center justify-center translate-y-1\">\n                                                        <Image src=\"/images/gfs_logo_navy.png\" alt=\"GFS\" width={100} height={100} className=\"object-contain\" />\n                                                    </div>\n                                                    <div className=\"text-left border-l-2 border-blue-900/10 pl-6\">\n                                                        <p className=\"text-sm font-black text-blue-900/40 tracking-[0.4em] uppercase mb-2\">Official Website</p>\n                                                        <div className=\"text-2xl md:text-3xl font-black tracking-tight text-blue-900 flex flex-col leading-[1.1] gap-1\">\n                                                            <span>Global</span>\n                                                            <span>Financial</span>\n                                                            <span>School</span>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div className=\"w-full h-[1px] bg-gradient-to-r from-transparent via-blue-900/10 to-transparent my-6\"></div>\n                                                <div className=\"flex items-center gap-3 text-blue-900/60 group-hover:text-blue-900 transition-colors font-bold\">\n                                                    <span className=\"text-lg tracking-wide\">実際の学習環境を見にいく</span>\n                                                    <ArrowRight className=\"w-6 h-6 group-hover:translate-x-2 transition-transform\" />\n                                                </div>\n                                            </div>\n                                        </a>\n                                    </div>\n\n                                    <Button\n                                        onClick={onGoToAgenda}\n                                        className=\"bg-slate-950 text-blue-400 hover:bg-black font-black h-20 px-12 md:px-16 text-2xl rounded-full shadow-[0_30px_60px_rgba(0,0,0,0.3)] border border-blue-900/30 group transition-all\"\n                                    >\n                                        目次へ戻る\n                                    </Button>\n\n                                    <p className=\"mt-12 text-blue-400 font-black text-xl tracking-[0.3em] opacity-40 italic\">Global Financial School</p>\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {activeStep === 1 && (\n                        <div className=\"animate-in fade-in slide-in-from-right-8 duration-700\">\n                            {/* セクションヘッダー */}\n                            <div className={`text-center mb-8 transition-all duration-700 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                                <div className=\"flex justify-between items-center mb-4 max-w-6xl mx-auto\">\n                                    <Button\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        onClick={() => setActiveStep(0)}\n                                        className=\"text-slate-600 hover:text-slate-900 transition-colors\"\n                                    >\n                                        <ChevronLeft className=\"w-4 h-4 mr-1\" />\n                                        戻る\n                                    </Button>\n                                    <Button\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        onClick={onGoToAgenda}\n                                        className=\"text-slate-600 hover:text-slate-900 transition-colors\"\n                                    >\n                                        <FileText className=\"w-4 h-4 mr-1\" />\n                                        目次\n                                    </Button>\n                                </div>\n                                <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-slate-900/5 backdrop-blur rounded-full mb-4 ring-1 ring-slate-900/10\">\n                                    <span className=\"text-amber-600 font-bold\">Section 04</span>\n                                    <span className=\"text-slate-400\">/</span>\n                                    <span className=\"text-slate-900\">あなた専用の投資戦略と今後のお話</span>\n                                </div>\n                                <h1 className=\"text-3xl md:text-5xl font-black text-slate-900 mb-2\">\n                                    {userData.name}様へのご提案\n                                </h1>\n                                <p className=\"text-slate-500 font-medium\">\n                                    「{userData.investmentGoal}」を実現するための最後のステップ\n                                </p>\n                            </div>\n\n                            {/* サマリーカード */}\n                            <Card className={`border-0 shadow-xl mb-8 bg-gradient-to-r from-primary to-blue-600 text-white transition-all duration-700 delay-200 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                                <CardContent className=\"py-6\">\n                                    <div className=\"grid md:grid-cols-3 gap-6 text-center\">\n                                        <div>\n                                            <p className=\"text-sm opacity-80 mb-1\">目標</p>\n                                            <p className=\"text-xl font-bold\">{userData.investmentGoal}</p>\n                                        </div>\n                                        <div>\n                                            <p className=\"text-sm opacity-80 mb-1\">{userData.targetPeriod}年後の予測資産</p>\n                                            <p className=\"text-2xl font-bold\">{formatManYen(simulationResult.gfsEndValue)}</p>\n                                        </div>\n                                        <div>\n                                            <p className=\"text-sm opacity-80 mb-1\">預金との差額</p>\n                                            <p className=\"text-2xl font-bold text-amber-300\">\n                                                +{formatManYen(simulationResult.gfsEndValue - simulationResult.savingsEndValue)}\n                                            </p>\n                                        </div>\n                                    </div>\n                                </CardContent>\n                            </Card>\n\n                            {/* 興味確認 */}\n                            {!interest && (\n                                <Card className={`border-0 shadow-xl mb-8 transition-all duration-700 delay-300 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                                    <CardHeader className=\"text-center\">\n                                        <CardTitle className=\"text-2xl\">私たちのサービスに興味はありますか？</CardTitle>\n                                    </CardHeader>\n                                    <CardContent className=\"pb-8\">\n                                        <div className=\"flex flex-col sm:flex-row gap-4 justify-center max-w-lg mx-auto\">\n                                            <Button\n                                                onClick={() => handleInterest(\"yes\")}\n                                                size=\"lg\"\n                                                className=\"flex-1 h-14 text-lg animate-pulse-border\"\n                                            >\n                                                <ThumbsUp className=\"w-5 h-5\" />\n                                                はい、興味があります\n                                            </Button>\n                                            <Button\n                                                onClick={() => handleInterest(\"no\")}\n                                                size=\"lg\"\n                                                variant=\"outline\"\n                                                className=\"flex-1 h-14 text-lg bg-white\"\n                                            >\n                                                <ThumbsDown className=\"w-5 h-5\" />\n                                                もう少し検討したい\n                                            </Button>\n                                        </div>\n                                    </CardContent>\n                                </Card>\n                            )}\n\n                            {/* プラン詳細（YESの場合） */}\n                            {showPlan && (\n                                <div className=\"animate-fade-in space-y-8\">\n                                    <h2 className=\"text-2xl font-bold text-white text-center flex items-center justify-center gap-2\">\n                                        <Sparkles className=\"w-6 h-6 text-amber-400\" />\n                                        受講料について\n                                    </h2>\n\n                                    {/* プランカード */}\n                                    <div className=\"grid md:grid-cols-3 gap-6\">\n                                        {plans.map((plan, index) => (\n                                            <Card\n                                                key={index}\n                                                className={`border-0 shadow-xl relative overflow-hidden cursor-pointer transition-all duration-300 hover:scale-105 ${plan.highlight ? \"ring-2 ring-amber-400\" : \"\"\n                                                    } ${selectedPlan === plan.name ? \"ring-4 ring-primary\" : \"\"}`}\n                                                onClick={() => setSelectedPlan(plan.name)}\n                                            >\n                                                {plan.highlight && (\n                                                    <div className=\"absolute top-0 right-0 bg-amber-400 text-xs font-bold text-slate-900 px-3 py-1 rounded-bl-xl\">\n                                                        おすすめ\n                                                    </div>\n                                                )}\n                                                <CardHeader className={`bg-gradient-to-r ${plan.color} text-white`}>\n                                                    <div className=\"flex items-center gap-3\">\n                                                        <plan.icon className=\"w-8 h-8\" />\n                                                        <CardTitle className=\"text-lg text-white\">{plan.name}</CardTitle>\n                                                    </div>\n                                                </CardHeader>\n                                                <CardContent className=\"pt-6\">\n                                                    <div className=\"text-center mb-4\">\n                                                        <p className=\"text-sm text-gray-400 line-through\">{plan.normalPrice}</p>\n                                                        <p className=\"text-3xl font-black text-primary\">{plan.specialPrice}</p>\n                                                        <p className=\"text-xs text-gray-500\">税込・受講期間1年</p>\n                                                    </div>\n                                                    <ul className=\"space-y-2\">\n                                                        {plan.features.map((feature, i) => (\n                                                            <li key={i} className=\"flex items-start gap-2\">\n                                                                <CheckCircle className=\"w-4 h-4 text-primary shrink-0 mt-0.5\" />\n                                                                <span className=\"text-xs text-gray-700\">{feature}</span>\n                                                            </li>\n                                                        ))}\n                                                    </ul>\n                                                </CardContent>\n                                            </Card>\n                                        ))}\n                                    </div>\n\n                                    {/* 決済方法 */}\n                                    <Card className=\"border-0 shadow-xl\">\n                                        <CardHeader>\n                                            <CardTitle className=\"flex items-center gap-2\">\n                                                <CreditCard className=\"w-5 h-5\" />\n                                                お支払い方法\n                                            </CardTitle>\n                                        </CardHeader>\n                                        <CardContent>\n                                            <div className=\"grid md:grid-cols-2 gap-4\">\n                                                {paymentMethods.map((method, index) => (\n                                                    <div\n                                                        key={index}\n                                                        className=\"flex items-start gap-4 p-4 bg-gray-50 rounded-xl hover:bg-blue-50 transition\"\n                                                    >\n                                                        <div className=\"w-10 h-10 rounded-xl bg-primary flex items-center justify-center shrink-0\">\n                                                            <method.icon className=\"w-5 h-5 text-white\" />\n                                                        </div>\n                                                        <div>\n                                                            <h4 className=\"font-bold text-gray-800\">{method.title}</h4>\n                                                            <p className=\"text-sm text-gray-600\">{method.description}</p>\n                                                        </div>\n                                                    </div>\n                                                ))}\n                                            </div>\n                                        </CardContent>\n                                    </Card>\n\n                                    {/* 安心保証 */}\n                                    <Card className=\"border-0 shadow-xl bg-gradient-to-r from-emerald-50 to-teal-50\">\n                                        <CardContent className=\"py-6\">\n                                            <div className=\"flex items-center gap-4\">\n                                                <div className=\"w-14 h-14 rounded-2xl bg-emerald-500 flex items-center justify-center shrink-0\">\n                                                    <Shield className=\"w-7 h-7 text-white\" />\n                                                </div>\n                                                <div>\n                                                    <h4 className=\"font-bold text-gray-800 text-lg\">安心の保証制度</h4>\n                                                    <p className=\"text-gray-600\">\n                                                        入学後8日間であれば無条件にて全額返金保証を行っております\n                                                    </p>\n                                                </div>\n                                            </div>\n                                        </CardContent>\n                                    </Card>\n\n                                    {/* CTA */}\n                                    <Card className=\"border-0 shadow-xl bg-gradient-to-r from-amber-50 to-yellow-50\">\n                                        <CardContent className=\"py-8 text-center\">\n                                            <h3 className=\"text-2xl font-bold text-gray-800 mb-4\">\n                                                今すぐGFSで投資の学習を始めましょう\n                                            </h3>\n                                            <p className=\"text-gray-600 mb-6\">\n                                                LINEでお気軽にご相談ください\n                                            </p>\n                                            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n                                                <Button size=\"lg\" className=\"min-w-48 h-14 text-lg\">\n                                                    <MessageCircle className=\"w-5 h-5\" />\n                                                    LINEで相談する\n                                                </Button>\n                                                <Button size=\"lg\" variant=\"outline\" className=\"min-w-48 h-14 text-lg bg-white\">\n                                                    <ExternalLink className=\"w-5 h-5\" />\n                                                    公式サイトを見る\n                                                </Button>\n                                            </div>\n                                        </CardContent>\n                                    </Card>\n                                </div>\n                            )}\n\n                            {/* NOの場合 */}\n                            {interest === \"no\" && (\n                                <Card className=\"border-0 shadow-xl mb-8 animate-fade-in\">\n                                    <CardContent className=\"py-10 text-center\">\n                                        <div className=\"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-6\">\n                                            <MessageCircle className=\"w-10 h-10 text-primary\" />\n                                        </div>\n                                        <h3 className=\"text-2xl font-bold text-gray-800 mb-4\">\n                                            ご検討いただきありがとうございます\n                                        </h3>\n                                        <p className=\"text-gray-600 mb-6 max-w-md mx-auto\">\n                                            何かご不明点やご質問がございましたら、お気軽にご相談ください。\n                                            <br />\n                                            {userData.name}様の「{userData.investmentGoal}」の実現を心より応援しております。\n                                        </p>\n                                        <Button size=\"lg\" className=\"min-w-48 h-14 text-lg\">\n                                            <MessageCircle className=\"w-5 h-5\" />\n                                            質問・相談する\n                                        </Button>\n                                    </CardContent>\n                                </Card>\n                            )}\n\n                            {/* フッター */}\n                            <div className={`text-center mt-8 transition-all duration-700 ${showContent ? \"opacity-100\" : \"opacity-0\"}`}>\n                                <Button onClick={onBack} variant=\"ghost\" className=\"text-blue-300\">\n                                    <ChevronLeft className=\"w-4 h-4 mr-1\" />\n                                    前の画面に戻る\n                                </Button>\n                                <p className=\"text-blue-200/50 text-sm mt-4\">\n                                    今日はありがとうございました\n                                </p>\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/components/SupportPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/components/ui/Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/components/ui/Card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/components/ui/Input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/constants/supportData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/lib/simulation.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'STOCKS_RATE_MAX' is assigned a value but never used.","line":11,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'OPTIMAL_RATE_MAX' is assigned a value but never used.","line":15,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'yield30EndValue' is assigned a value but never used.","line":182,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":182,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'yield20EndValue' is assigned a value but never used.","line":183,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":183,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { UserInput, SimulationResult, ChartDataPoint } from \"@/types\";\n\n// 預金金利（日本の普通預金の一般的な金利）\nconst SAVINGS_ANNUAL_RATE = 0.002; // 0.2%\n\n// 預金＆積立（投資信託等）\nconst TRUST_ANNUAL_RATE = 0.04; // 4%\n\n// 預金＆個別株投資（現実的な範囲）\nconst STOCKS_RATE_MIN = 0.07; // 7%\nconst STOCKS_RATE_MAX = 0.10; // 10%\n\n// 最適な資産形成（学びと組み合わせた現実的な目標）\nconst OPTIMAL_RATE_MIN = 0.12; // 12%\nconst OPTIMAL_RATE_MAX = 0.15; // 15%\n\n/**\n * 全角数字を半角数字に変換し、数字以外の文字（カンマ等）を除去\n */\nexport function toHalfWidth(str: string): string {\n    return str.replace(/[０-９]/g, (s) => {\n        return String.fromCharCode(s.charCodeAt(0) - 0xFEE0);\n    }).replace(/[^0-9]/g, \"\"); // 数字以外を除去\n}\n\n/**\n * カンマ区切りなどの入力を数値に変換\n */\nexport function parseNumericInput(value: string): number {\n    const cleanValue = toHalfWidth(value);\n    return parseInt(cleanValue) || 0;\n}\n\n/**\n * 複利計算（月次積立対応）: \n * FV = PV * (1+r)^n + PMT * [((1+r/12)^(12n) - 1) / (r/12)]\n */\nexport function calculateFutureValue(\n    principal: number,\n    annualRate: number,\n    years: number,\n    monthlySavings: number = 0\n): number {\n    const r = annualRate;\n    const n = years;\n    const p = principal;\n    const s = monthlySavings;\n\n    // 元本の複利\n    const fvPrincipal = p * Math.pow(1 + r, n);\n\n    if (r === 0) return p + s * 12 * n;\n\n    // 積立の複利（月利計算）\n    const monthlyRate = r / 12;\n    const totalMonths = n * 12;\n    const fvSavings = s * (Math.pow(1 + monthlyRate, totalMonths) - 1) / monthlyRate;\n\n    return fvPrincipal + fvSavings;\n}\n\n/**\n * 目標金額に達するために必要な年利を算出（二分探索）\n */\nexport function calculateRequiredRate(\n    principal: number,\n    targetAmount: number,\n    years: number,\n    monthlySavings: number\n): number {\n    let low = 0;\n    let high = 2.0; // 最大200%まで探索\n    let iterations = 0;\n\n    while (iterations < 100) {\n        const mid = (low + high) / 2;\n        const fv = calculateFutureValue(principal, mid, years, monthlySavings);\n\n        if (Math.abs(fv - targetAmount) < 1) return mid;\n\n        if (fv < targetAmount) {\n            low = mid;\n        } else {\n            high = mid;\n        }\n        iterations++;\n    }\n    return low;\n}\n\n/**\n * シミュレーション結果を生成\n */\nexport function generateSimulation(input: UserInput): SimulationResult {\n    const { initialBudget = 0, targetAmount, targetPeriod, monthlySavings = 0 } = input;\n\n    // 非負の値を保証\n    const principal = Math.max(0, initialBudget);\n    const savings = Math.max(0, monthlySavings);\n\n    // インプットがどちらも空（または0）の場合は NaN 防止のためデフォルト値を設定するか計算をスキップ\n    if (principal === 0 && savings === 0) {\n        // 全て0の空データ（デフォルト値）を返す\n        return {\n            savingsEndValue: 0,\n            savingsAnnualRate: SAVINGS_ANNUAL_RATE,\n            trustEndValue: 0,\n            trustAnnualRate: TRUST_ANNUAL_RATE,\n            stocksEndValue: 0,\n            stocksAnnualRate: STOCKS_RATE_MIN,\n            gfsEndValue: 0,\n            gfsAnnualRate: OPTIMAL_RATE_MIN,\n            yield30EndValue: 0,\n            yield30AnnualRate: 0.3,\n            achievedYear: null,\n            isAchieved: false,\n            requiredAnnualRate: 0,\n            requiredTrustAnnualRate: 0,\n            requiredStocksAnnualRate: 0,\n            gap: targetAmount,\n            isGapNegative: true,\n            chartData: Array.from({ length: targetPeriod + 1 }, (_, i) => ({\n                year: i,\n                savings: 0,\n                trust: 0,\n                stocks: 0,\n                gfs: 0,\n                yield30: 0,\n                required: 0,\n                requiredTrust: 0,\n                requiredStocks: 0,\n                target: targetAmount\n            })),\n            fullChartData: Array.from({ length: targetPeriod + 1 }, (_, i) => ({\n                year: i,\n                savings: 0,\n                trust: 0,\n                stocks: 0,\n                gfs: 0,\n                yield30: 0,\n                required: 0,\n                requiredTrust: 0,\n                requiredStocks: 0,\n                target: targetAmount\n            })),\n        };\n    }\n\n    // 目標達成に必要な利回りを算出\n    const rawRequiredRate = calculateRequiredRate(principal, targetAmount, targetPeriod, savings);\n\n    /**\n     * ユーザー要望：目標到達金額は少し過ぎて数万〜数十万くらいなら端数が出てもいい\n     * 0.1%単位で切り上げた後、さらにわずかなランダムバッファ（0.02%〜0.05%）を加えることで、\n     * 常に「少しだけ目標を上回る」自然な数値を生成する\n     */\n    /**\n     * 【重要】ユーザー要望：メインの計算基準を20%運用に変更\n     * 目標達成に必要な利率は参考値として保持し、メインの表示は20%運用時の数値とする\n     */\n    const TARGET_RATE_20 = 0.2;\n    const roundedRate = Math.ceil(rawRequiredRate * 1000) / 1000;\n    const randomBuffer = (Math.floor(Math.random() * 4) + 2) / 10000; // 0.0002 ~ 0.0005\n    const requiredAnnualRate = Math.round((roundedRate + randomBuffer) * 10000) / 10000;\n    /**\n     * 比率は積立と個別株でランダムに揺らぎを持たせる（35%〜45%の範囲）\n     * 基数となる利率は20%とする\n     */\n    const trustRatio = (Math.floor(Math.random() * 11) + 35) / 100; // 0.35 ~ 0.45\n    const trustAnnualRate = Math.round(TARGET_RATE_20 * trustRatio * 10000) / 10000;\n\n    const requiredTrustAnnualRate = Math.round(requiredAnnualRate * trustRatio * 10000) / 10000;\n    const requiredStocksAnnualRate = Math.round((requiredAnnualRate - requiredTrustAnnualRate) * 10000) / 10000;\n    const stocksAnnualRate = Math.round((TARGET_RATE_20 - trustAnnualRate) * 10000) / 10000;\n\n    // ユーザー要望：20%運用をメインの表示基準にする\n    const YIELD_20 = 0.2;\n    const gfsAnnualRate = YIELD_20;\n\n    // 運用ルート（互換性のために保持しつつ、20%も追加）\n    const YIELD_30 = 0.3;\n    const yield30EndValue = calculateFutureValue(principal, YIELD_30, targetPeriod, savings);\n    const yield20EndValue = calculateFutureValue(principal, YIELD_20, targetPeriod, savings); // 追加\n\n    // 達成年の特定\n    let achievedYear: number | null = null;\n    let isAchieved = false;\n\n    // グラフ用データ生成\n    const fullChartData: ChartDataPoint[] = [];\n    for (let year = 0; year <= targetPeriod; year++) {\n        const valSavings = Math.round(calculateFutureValue(principal, SAVINGS_ANNUAL_RATE, year, savings));\n\n        // ユーザー要望：積立と個別株を「足すと」目標に届くように、目標達成曲線をランダムな比率で分割\n        const valGfs = Math.round(calculateFutureValue(principal, gfsAnnualRate, year, savings));\n        const valTrust = Math.round(valGfs * trustRatio);\n        const valStocks = valGfs - valTrust; // 合計が一致するように引き算で算出\n\n        const valYield30 = Math.round(calculateFutureValue(principal, YIELD_30, year, savings));\n        const valRequired = Math.round(calculateFutureValue(principal, requiredAnnualRate, year, savings));\n        const valRequiredTrust = Math.round(valRequired * trustRatio);\n        const valRequiredStocks = valRequired - valRequiredTrust;\n\n        fullChartData.push({\n            year,\n            savings: valSavings,\n            trust: valTrust,\n            stocks: valStocks,\n            gfs: valGfs,\n            yield30: valYield30,\n            required: valRequired,\n            requiredTrust: valRequiredTrust,\n            requiredStocks: valRequiredStocks,\n            target: targetAmount,\n        });\n\n        if (achievedYear === null && valGfs >= targetAmount) {\n            achievedYear = year;\n            isAchieved = true;\n        }\n    }\n\n    // 期間内に達成する場合、グラフ期間を短縮。達成時の値を成果とする。\n    const displayYear = (isAchieved && achievedYear !== null) ? achievedYear : targetPeriod;\n\n    const chartData = (isAchieved && achievedYear !== null)\n        ? fullChartData.slice(0, achievedYear + 1)\n        : fullChartData;\n\n    // 各成果の最終値（短縮された場合は達成時、そうでなければ目標期間時）\n    const lastPoint = fullChartData[displayYear];\n\n    // Gap分析（預金 vs 目標）\n    const finalSavingsEndValue = lastPoint.savings;\n    const gap = Math.max(0, targetAmount - finalSavingsEndValue);\n    const isGapNegative = gap > 0;\n\n    return {\n        savingsEndValue: finalSavingsEndValue,\n        savingsAnnualRate: SAVINGS_ANNUAL_RATE,\n        trustEndValue: lastPoint.trust,\n        trustAnnualRate: trustAnnualRate,\n        stocksEndValue: lastPoint.stocks,\n        stocksAnnualRate: stocksAnnualRate,\n        gfsEndValue: lastPoint.gfs,\n        gfsAnnualRate: gfsAnnualRate,\n        yield30EndValue: lastPoint.yield30,\n        yield30AnnualRate: YIELD_30,\n        achievedYear,\n        isAchieved,\n        requiredAnnualRate,\n        requiredTrustAnnualRate,\n        requiredStocksAnnualRate,\n        gap: Math.round(gap),\n        isGapNegative,\n        chartData,\n        fullChartData,\n    };\n}\n\n/**\n * 金額を日本円フォーマットで表示\n */\nexport function formatCurrency(amount: number): string {\n    return new Intl.NumberFormat('ja-JP', {\n        style: 'currency',\n        currency: 'JPY',\n        maximumFractionDigits: 0,\n    }).format(amount);\n}\n\n/**\n * 金額を万円単位で表示\n */\nexport function formatManYen(amount: number): string {\n    const manYen = amount / 10000;\n    if (manYen >= 10000) {\n        return `${(manYen / 10000).toFixed(1)}億円`;\n    }\n    return `${Math.round(manYen).toLocaleString()}万円`;\n}\n\n/**\n * パーセンテージ表示\n */\nexport function formatPercent(rate: number): string {\n    return `${(rate * 100).toFixed(1)}%`;\n}\n/**\n * 金額を日本語の単位（円、千、万、億、兆、京）でフォーマット\n */\nexport function formatJapaneseAmount(amount: number): string {\n    if (amount === 0) return \"0円\";\n\n    const units = [\n        { label: \"京\", value: 1e16 },\n        { label: \"兆\", value: 1e12 },\n        { label: \"億\", value: 1e8 },\n        { label: \"万\", value: 1e4 },\n        { label: \"千\", value: 1e3 }\n    ];\n\n    let result = \"\";\n    let remaining = amount;\n\n    for (const unit of units) {\n        if (remaining >= unit.value) {\n            const count = Math.floor(remaining / unit.value);\n            result += `${count.toLocaleString()}${unit.label}`;\n            remaining %= unit.value;\n        }\n    }\n\n    if (remaining > 0 || result === \"\") {\n        result += remaining.toLocaleString();\n    }\n\n    return result + \"円\";\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/lib/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/gfs_project_backup/src/types/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/app/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/app/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SupportPanel' is defined but never used.","line":13,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":20,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"SupportPanel"},"fix":{"range":[579,632],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isSupportOpen' is assigned a value but never used.","line":47,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setIsSupportOpen' is assigned a value but never used.","line":47,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showPersistentPanels' is assigned a value but never used.","line":162,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":162,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { UserInput, SimulationResult, Phase } from \"@/types\";\nimport { generateSimulation } from \"@/lib/simulation\";\nimport Agenda from \"@/components/Agenda\";\nimport Phase1Hearing from \"@/components/Phase1Hearing\";\nimport Phase2CompanyIntro from \"@/components/Phase2CompanyIntro\";\nimport Phase3Simulation from \"@/components/Phase3Simulation\";\nimport Phase4Solution from \"@/components/Phase4Solution\";\nimport Phase5Closing from \"@/components/Phase5Closing\";\nimport Phase1ThreeSteps from \"@/components/Phase1ThreeSteps\";\nimport SupportPanel from \"@/components/SupportPanel\";\nimport HearingMemo from \"@/components/HearingMemo\";\nimport { Sparkles, ZoomIn, ZoomOut, Maximize2 } from \"lucide-react\";\nimport Image from \"next/image\";\n\nexport default function Home() {\n  // フェーズ順序: agenda -> company -> hearing -> simulation -> solution -> closing\n  const [phase, setPhase] = useState<Phase>(\"agenda\");\n  const [subStep, setSubStep] = useState<number | string>(0);\n  const [userData, setUserData] = useState<UserInput | null>(null);\n  const [simulationResult, setSimulationResult] = useState<SimulationResult | null>(null);\n\n  // 他のタブ（サポートパネル等）にフェーズ情報を同期\n  useEffect(() => {\n    const channel = new BroadcastChannel(\"gfs-sync\");\n\n    const broadcastState = () => {\n      channel.postMessage({ type: \"SYNC_STATE\", phase, subStep, simulationResult, userData });\n    };\n\n    channel.onmessage = (event) => {\n      if (event.data?.type === \"REQUEST_SYNC\") {\n        broadcastState();\n      } else if (event.data?.type === \"SYNC_STATE\") {\n        if (event.data.userData) setUserData(event.data.userData);\n        if (event.data.simulationResult) setSimulationResult(event.data.simulationResult);\n      }\n    };\n\n    broadcastState();\n\n    return () => channel.close();\n  }, [phase, subStep, simulationResult, userData]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSupportOpen, setIsSupportOpen] = useState(false);\n  const [isHearingMemoOpen, setIsHearingMemoOpen] = useState(false);\n  const [sideMemoText, setSideMemoText] = useState(\"\");\n  const [zoomScale, setZoomScale] = useState(1);\n\n  // ズーム制御\n  const handleZoomIn = () => setZoomScale(prev => Math.min(prev + 0.1, 2.0));\n  const handleZoomOut = () => setZoomScale(prev => Math.max(prev - 0.1, 0.5));\n  const handleResetZoom = () => setZoomScale(1);\n\n  // ショートカットキー\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if ((e.ctrlKey || e.metaKey) && e.key === \"0\") {\n        e.preventDefault();\n        handleResetZoom();\n      }\n      if ((e.ctrlKey || e.metaKey) && e.key === \"=\") {\n        e.preventDefault();\n        handleZoomIn();\n      }\n      if ((e.ctrlKey || e.metaKey) && e.key === \"-\") {\n        e.preventDefault();\n        handleZoomOut();\n      }\n    };\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, []);\n\n  // フェーズが切り替わったときにトップにスクロール\n  useEffect(() => {\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  }, [phase]);\n\n  const handleAgendaStart = () => {\n    setPhase(\"company\"); // 会社紹介から開始\n  };\n\n  const handleCompanyNext = () => {\n    setPhase(\"threeSteps\"); // 資産形成の3ステップへ\n  };\n\n  const handleThreeStepsNext = () => {\n    setPhase(\"hearing\"); // 次にヒアリング\n  };\n\n  const handleHearingComplete = async (data: UserInput) => {\n    setUserData(data);\n\n    // ヒアリング未入力（名前が空）の場合はシミュレーションを飛ばして解決策へ\n    if (!data.name.trim()) {\n      setPhase(\"solution\");\n      return;\n    }\n\n    setIsLoading(true);\n\n    // シミュレーション計算（擬似遅延付き）\n    await new Promise(resolve => setTimeout(resolve, 2500));\n    const result = generateSimulation(data);\n    setSimulationResult(result);\n\n    setIsLoading(false);\n    setPhase(\"simulation\");\n  };\n\n  const goToPhase = (targetPhase: Phase) => {\n    setPhase(targetPhase);\n    setSubStep(0); // フェーズ切り替え時にサブステップをリセット\n  };\n\n  // ローディング画面\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-white relative overflow-hidden\">\n        {/* 背景マスコット */}\n        <div className=\"absolute inset-0 pointer-events-none\">\n          <Image\n            src=\"/mascot/mascot_search.png\"\n            alt=\"\"\n            width={200}\n            height={200}\n            className=\"absolute top-10 left-10 opacity-20 animate-float-slow\"\n          />\n          <Image\n            src=\"/mascot/mascot_phone.png\"\n            alt=\"\"\n            width={180}\n            height={180}\n            className=\"absolute bottom-10 right-10 opacity-20 animate-float-delayed\"\n          />\n        </div>\n\n        <div className=\"text-center space-y-8 animate-fade-in relative z-10\">\n          <div className=\"relative\">\n            <div className=\"w-32 h-32 rounded-full border-4 border-blue-200 border-t-primary animate-spin mx-auto\" />\n            <div className=\"absolute inset-0 flex items-center justify-center\">\n              <Sparkles className=\"w-12 h-12 text-primary animate-pulse\" />\n            </div>\n          </div>\n          <div className=\"space-y-3\">\n            <h2 className=\"text-3xl font-bold text-gray-800\">分析中...</h2>\n          </div>\n          <div className=\"flex gap-2 justify-center\">\n            {[0, 1, 2, 3, 4].map(i => (\n              <div key={i} className=\"w-3 h-3 bg-primary rounded-full animate-bounce\" style={{ animationDelay: `${i * 0.1}s` }} />\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // 以降のフェーズは共通のサイドパネルを持つ\n  const showPersistentPanels = [\"simulation\", \"solution\", \"closing\"].includes(phase);\n\n  return (\n    <div className=\"relative min-h-screen bg-slate-50 overflow-x-hidden\">\n      {/* ズームコントローラー (左側固定) */}\n      <div className=\"fixed left-6 bottom-10 z-[100] flex flex-col gap-2 animate-in slide-in-from-left duration-700\">\n        <div className=\"bg-white/80 backdrop-blur-xl border border-slate-200 p-2 rounded-2xl shadow-2xl flex flex-col items-center gap-3\">\n          <button\n            onClick={handleZoomIn}\n            className=\"p-3 bg-slate-50 hover:bg-blue-50 text-slate-600 hover:text-blue-600 rounded-xl transition-all active:scale-90 group\"\n            title=\"ズームイン\"\n          >\n            <ZoomIn className=\"w-5 h-5 group-hover:scale-110 transition-transform\" />\n          </button>\n\n          <div className=\"h-[1px] w-8 bg-slate-100\" />\n\n          <button\n            onClick={handleResetZoom}\n            className=\"w-10 h-10 flex items-center justify-center text-[10px] font-black text-slate-400 hover:text-blue-600 transition-colors\"\n            title=\"リセット\"\n          >\n            {Math.round(zoomScale * 100)}%\n          </button>\n\n          <div className=\"h-[1px] w-8 bg-slate-100\" />\n\n          <button\n            onClick={handleZoomOut}\n            className=\"p-3 bg-slate-50 hover:bg-red-50 text-slate-600 hover:text-red-500 rounded-xl transition-all active:scale-90 group\"\n            title=\"ズームアウト\"\n          >\n            <ZoomOut className=\"w-5 h-5 group-hover:scale-110 transition-transform\" />\n          </button>\n        </div>\n\n        <button\n          onClick={handleResetZoom}\n          className=\"p-3 bg-slate-900/10 hover:bg-slate-900/20 text-slate-600 rounded-xl transition-all backdrop-blur-sm group\"\n          title=\"フィット\"\n        >\n          <Maximize2 className=\"w-5 h-5 opacity-50 group-hover:opacity-100\" />\n        </button>\n      </div>\n\n      {/* メインコンテンツラップ (ズーム適用) */}\n      <div\n        className=\"transition-transform duration-300 ease-out origin-top-left\"\n        style={{\n          transform: `scale(${zoomScale})`,\n          width: `${100 / zoomScale}%`,\n          height: `${100 / zoomScale}%`,\n          minHeight: '100vh'\n        }}\n      >\n        {phase === \"agenda\" && (\n          <Agenda onStart={handleAgendaStart} onGoToPhase={goToPhase} userData={userData} />\n        )}\n\n        {phase === \"company\" && (\n          <Phase2CompanyIntro\n            userData={userData}\n            onNext={handleCompanyNext}\n            onBack={() => goToPhase(\"agenda\")}\n            onGoToAgenda={() => goToPhase(\"agenda\")}\n          />\n        )}\n\n        {phase === \"threeSteps\" && (\n          <Phase1ThreeSteps\n            onNext={handleThreeStepsNext}\n            onBack={() => goToPhase(\"company\")}\n            onGoToAgenda={() => goToPhase(\"agenda\")}\n          />\n        )}\n\n        {phase === \"hearing\" && (\n          <Phase1Hearing\n            onSubmit={handleHearingComplete}\n            onBack={() => goToPhase(\"threeSteps\")}\n            onGoToAgenda={() => goToPhase(\"agenda\")}\n          />\n        )}\n\n        {/* Persistent Panels (Support Panel is now handled via separate window in HearingMemo) */}\n\n        <HearingMemo\n          userData={userData}\n          simulationResult={simulationResult}\n          isOpen={isHearingMemoOpen}\n          onToggle={() => setIsHearingMemoOpen(!isHearingMemoOpen)}\n          memoText={sideMemoText}\n          onMemoChange={setSideMemoText}\n          isHearingComplete={[\"agenda\", \"company\", \"threeSteps\", \"hearing\", \"simulation\", \"solution\", \"closing\"].includes(phase)}\n        />\n\n        {phase === \"simulation\" && (\n          <Phase3Simulation\n            userData={userData || { name: \"\", age: 0, investmentGoal: \"\", targetAmount: 0, targetPeriod: 0, initialBudget: 0, monthlySavings: 0, currentAssets: 0, monthlyInvestment: 0 }}\n            simulationResult={simulationResult || undefined}\n            onNext={() => goToPhase(\"solution\")}\n            onBack={() => goToPhase(\"hearing\")}\n            onGoToAgenda={() => goToPhase(\"agenda\")}\n            onSubStepChange={setSubStep}\n          />\n        )}\n\n        {phase === \"solution\" && (\n          <Phase4Solution\n            userData={userData || { name: \"\", age: 0, investmentGoal: \"\", targetAmount: 0, targetPeriod: 0, initialBudget: 0, monthlySavings: 0, currentAssets: 0, monthlyInvestment: 0 }}\n            simulationResult={simulationResult || undefined}\n            onNext={() => goToPhase(\"closing\")}\n            onBack={() => {\n              // ヒアリング未入力の場合はシミュレーションを飛ばしてヒアリングへ戻る\n              if (!userData || !userData.name.trim()) {\n                goToPhase(\"hearing\");\n              } else {\n                goToPhase(\"simulation\");\n              }\n            }}\n            onGoToAgenda={() => goToPhase(\"agenda\")}\n            onSubStepChange={setSubStep}\n          />\n        )}\n\n        {phase === \"closing\" && (\n          <Phase5Closing\n            userData={userData || { name: \"\", age: 0, investmentGoal: \"\", targetAmount: 0, targetPeriod: 0, initialBudget: 0, monthlySavings: 0, currentAssets: 0, monthlyInvestment: 0 }}\n            simulationResult={simulationResult || undefined}\n            onBack={() => goToPhase(\"solution\")}\n            onGoToAgenda={() => goToPhase(\"agenda\")}\n            onSubStepChange={setSubStep}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/app/support-panel/page.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/app/support-panel/page.tsx:25:9\n  23 |             monthlyInvestment: Number(searchParams.get(\"monthlyInvestment\")) || 0,\n  24 |         };\n> 25 |         setUserData(data as UserInput);\n     |         ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  26 |\n  27 |         // Update document title for the popup\n  28 |         document.title = \"GFS Investment Support\";","line":25,"column":9,"nodeType":null,"endLine":25,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState, Suspense } from \"react\";\nimport { useSearchParams } from \"next/navigation\";\nimport SupportPanel from \"@/components/SupportPanel\";\nimport { UserInput } from \"@/types\";\n\nfunction SupportPanelContent() {\n    const searchParams = useSearchParams();\n    const [userData, setUserData] = useState<UserInput | null>(null);\n\n    useEffect(() => {\n        // Build userData from query params\n        const data: Partial<UserInput> = {\n            name: searchParams.get(\"name\") || \"あなた\",\n            age: Number(searchParams.get(\"age\")) || 30,\n            occupation: searchParams.get(\"occupation\") || \"\",\n            familyStructure: searchParams.get(\"familyStructure\") || \"\",\n            investmentGoal: searchParams.get(\"investmentGoal\") || \"\",\n            experience: searchParams.get(\"experience\") || \"未経験\",\n            knowledgeLevel: searchParams.get(\"knowledgeLevel\") || \"初心者\",\n            currentAssets: Number(searchParams.get(\"currentAssets\")) || 0,\n            monthlyInvestment: Number(searchParams.get(\"monthlyInvestment\")) || 0,\n        };\n        setUserData(data as UserInput);\n\n        // Update document title for the popup\n        document.title = \"GFS Investment Support\";\n    }, [searchParams]);\n\n    if (!userData) return null;\n\n    return (\n        <div className=\"h-screen bg-slate-50\">\n            <SupportPanel\n                userData={userData}\n                isOpen={true}\n                onToggle={() => window.close()}\n                isStandalone={true}\n            />\n        </div>\n    );\n}\n\nexport default function SupportPanelPage() {\n    return (\n        <Suspense fallback={<div className=\"h-screen flex items-center justify-center\">Loading Support...</div>}>\n            <SupportPanelContent />\n        </Suspense>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/Agenda.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageCircle' is defined but never used.","line":5,"column":55,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":68,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"MessageCircle"},"fix":{"range":[161,176],"text":""},"desc":"Remove unused variable \"MessageCircle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Sparkles' is defined but never used.","line":5,"column":94,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":102,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Sparkles"},"fix":{"range":[200,210],"text":""},"desc":"Remove unused variable \"Sparkles\"."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/Agenda.tsx:21:25\n  19 |\n  20 |     useEffect(() => {\n> 21 |         if (!isPreview) setIsVisible(true);\n     |                         ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  22 |     }, [isPreview]);\n  23 |\n  24 |     const sections = [","line":21,"column":25,"nodeType":null,"endLine":21,"endColumn":37}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Button } from \"@/components/ui/Button\";\nimport { ArrowRight, Building2, BarChart3, Lightbulb, MessageCircle, FileText, ChevronRight, Sparkles } from \"lucide-react\";\nimport Image from \"next/image\";\n\nimport { UserInput, Phase } from \"@/types\";\n\ninterface AgendaProps {\n    onStart?: () => void;\n    onGoToPhase?: (phase: Phase) => void;\n    userData: UserInput | null;\n    isPreview?: boolean;\n}\n\nexport default function Agenda({ onStart, onGoToPhase, userData, isPreview = false }: AgendaProps) {\n    const [isVisible, setIsVisible] = useState(isPreview);\n\n    useEffect(() => {\n        if (!isPreview) setIsVisible(true);\n    }, [isPreview]);\n\n    const sections = [\n        {\n            id: \"01\",\n            title: \"簡単に弊社のご紹介\",\n            subtitle: \"GFSについて\",\n            time: \"約7分\",\n            icon: Building2,\n            color: \"from-blue-500 to-cyan-500\",\n            phase: \"company\" as Phase,\n        },\n        {\n            id: \"02\",\n            title: userData ? `${userData.name}様の未来予想図` : \"あなたの目標を教えてください\",\n            subtitle: \"理想のゴールを一緒に描きましょう\",\n            time: \"約11分\",\n            icon: FileText,\n            color: \"from-emerald-500 to-teal-500\",\n            phase: \"threeSteps\" as Phase,\n        },\n        {\n            id: \"03\",\n            title: userData ? `${userData.name}様に合う投資` : \"あなたに合う投資\",\n            subtitle: \"自分にピッタリな投資手段を考えよう\",\n            time: \"約14分\",\n            icon: BarChart3,\n            color: \"from-purple-500 to-pink-500\",\n            phase: \"solution\" as Phase,\n        },\n        {\n            id: \"04\",\n            title: \"投資の学びとは？GFSを使って一緒に見ていこう！\",\n            subtitle: \"投資をできるようになろう！\",\n            time: \"約18分\",\n            icon: Lightbulb,\n            color: \"from-amber-500 to-orange-500\",\n            phase: \"closing\" as Phase,\n        },\n    ];\n\n    return (\n        <div className=\"min-h-screen relative overflow-hidden bg-gradient-to-br from-slate-50 via-blue-50 to-white\">\n            {/* 背景のマスコット画像（薄く配置） */}\n            <div className=\"absolute inset-0 pointer-events-none\">\n                <Image\n                    src=\"/mascot/mascot_cheer_blue.png\"\n                    alt=\"\"\n                    width={180}\n                    height={180}\n                    className=\"absolute top-10 -left-10 opacity-20 animate-float-slow\"\n                />\n                <Image\n                    src=\"/mascot/mascot_happy.png\"\n                    alt=\"\"\n                    width={160}\n                    height={160}\n                    className=\"absolute top-1/3 -right-10 opacity-20 animate-float-delayed\"\n                />\n                <Image\n                    src=\"/mascot/mascot_search.png\"\n                    alt=\"\"\n                    width={140}\n                    height={140}\n                    className=\"absolute bottom-20 left-10 opacity-20 animate-bounce-gentle\"\n                />\n                <Image\n                    src=\"/mascot/mascot_phone.png\"\n                    alt=\"\"\n                    width={150}\n                    height={150}\n                    className=\"absolute -bottom-10 right-1/4 opacity-20 animate-float-slow\"\n                />\n            </div>\n\n            {/* 装飾的な背景要素 */}\n            <div className=\"absolute top-0 left-0 w-96 h-96 bg-blue-200 rounded-full blur-3xl opacity-20\" />\n            <div className=\"absolute bottom-0 right-0 w-80 h-80 bg-amber-200 rounded-full blur-3xl opacity-20\" />\n\n            {/* GFSロゴ */}\n            <div className={`absolute top-8 left-8 z-20 transition-all duration-1000 ${isVisible ? \"opacity-100 translate-y-0\" : \"opacity-0 -translate-y-10\"}`}>\n                <div className=\"flex items-center gap-3\">\n                    <Image src=\"/images/gfs_logo_navy.png\" alt=\"GFS\" width={80} height={80} className=\"object-contain\" />\n                    <div className=\"h-8 w-[1px] bg-slate-200 ml-1\" />\n                    <span className=\"text-[10px] font-black text-slate-400 uppercase tracking-[0.3em] bg-white/50 backdrop-blur-sm px-2 py-1 rounded\">Consulting AI</span>\n                </div>\n            </div>\n\n            {/* メインコンテンツ */}\n            <div className=\"relative z-10 min-h-screen flex flex-col items-center justify-center p-4 md:p-8\">\n                {/* タイトル */}\n                <div\n                    className={`text-center mb-10 transition-all duration-1000 ${isVisible ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"\n                        }`}\n                >\n                    <div className=\"inline-flex items-center gap-3 mb-4\">\n                        <div className=\"w-14 h-14 rounded-2xl bg-gradient-to-br from-primary to-blue-600 flex items-center justify-center shadow-lg\">\n                            <FileText className=\"w-7 h-7 text-white\" />\n                        </div>\n                        <h1 className=\"text-5xl md:text-6xl font-black text-gray-800 tracking-tight\">\n                            本日の流れ\n                        </h1>\n                    </div>\n                </div>\n\n                <div className=\"w-full max-w-2xl space-y-4 mb-12\">\n                    {sections.map((section, index) => {\n                        const isSection02Branch = section.id === \"02\" && userData;\n\n                        if (isSection02Branch) {\n                            return (\n                                <div\n                                    key={section.id}\n                                    className={`bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden\n                                        ${isVisible ? \"opacity-100 translate-x-0\" : \"opacity-0 -translate-x-10\"}\n                                    `}\n                                    style={{ transitionDelay: `${index * 100}ms` }}\n                                >\n                                    {/* ヘッダー部分 */}\n                                    <div className=\"flex items-center p-5 pb-4 border-b border-gray-50\">\n                                        <div className={`w-14 h-14 rounded-xl bg-gradient-to-br ${section.color} flex items-center justify-center shrink-0 shadow-md`}>\n                                            <section.icon className=\"w-7 h-7 text-white\" />\n                                        </div>\n                                        <div className=\"flex-1 ml-5\">\n                                            <div className=\"flex items-center gap-3 mb-1\">\n                                                <span className=\"text-sm font-bold text-gray-400\">Section {section.id}</span>\n                                                <span className=\"text-sm text-gray-300\">|</span>\n                                                <span className=\"text-sm text-gray-400\">{section.time}</span>\n                                            </div>\n                                            <h3 className=\"text-2xl font-bold text-gray-800\">\n                                                {section.title}\n                                            </h3>\n                                        </div>\n                                    </div>\n\n                                    {/* 分岐選択エリア */}\n                                    <div className=\"flex divide-x divide-gray-100 bg-slate-50/30\">\n                                        <button\n                                            onClick={() => onGoToPhase?.(\"hearing\")}\n                                            className=\"flex-1 p-6 hover:bg-white transition-all text-center group/btn relative\"\n                                        >\n                                            <div className=\"absolute top-0 left-0 w-full h-1 bg-slate-200 opacity-0 group-hover/btn:opacity-100 transition-opacity\" />\n                                            <p className=\"text-[11px] font-black text-slate-400 mb-1 tracking-widest uppercase\">Redefine Goal</p>\n                                            <p className=\"text-lg font-black text-slate-800 group-hover/btn:text-primary transition-colors\">\n                                                もう一度目標を教えてください\n                                            </p>\n                                        </button>\n                                        <button\n                                            onClick={() => onGoToPhase?.(\"simulation\")}\n                                            className=\"flex-1 p-6 hover:bg-white transition-all text-center group/btn relative\"\n                                        >\n                                            <div className=\"absolute top-0 left-0 w-full h-1 bg-blue-500 opacity-0 group-hover/btn:opacity-100 transition-opacity\" />\n                                            <p className=\"text-[11px] font-black text-blue-500 mb-1 tracking-widest uppercase\">Quick View</p>\n                                            <p className=\"text-lg font-black text-slate-800 group-hover/btn:text-blue-600 transition-colors\">\n                                                シミュレーション結果を見る\n                                            </p>\n                                        </button>\n                                    </div>\n                                </div>\n                            );\n                        }\n\n                        return (\n                            <div\n                                key={section.id}\n                                className={`group bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-500 cursor-pointer border border-gray-100 overflow-hidden\n                                    ${isVisible ? \"opacity-100 translate-x-0\" : \"opacity-0 -translate-x-10\"}\n                                `}\n                                style={{ transitionDelay: `${index * 100}ms` }}\n                                onClick={() => onGoToPhase?.(section.phase)}\n                            >\n                                <div className=\"flex items-center p-5\">\n                                    {/* 番号とアイコン */}\n                                    <div className={`w-14 h-14 rounded-xl bg-gradient-to-br ${section.color} flex items-center justify-center shrink-0 shadow-md group-hover:scale-110 transition-transform`}>\n                                        <section.icon className=\"w-7 h-7 text-white\" />\n                                    </div>\n\n                                    {/* テキスト */}\n                                    <div className=\"flex-1 ml-5\">\n                                        <div className=\"flex items-center gap-3 mb-1\">\n                                            <span className=\"text-sm font-bold text-gray-400\">Section {section.id}</span>\n                                            <span className=\"text-sm text-gray-300\">|</span>\n                                            <span className=\"text-sm text-gray-400\">{section.time}</span>\n                                        </div>\n                                        <h3 className=\"text-2xl font-bold text-gray-800 group-hover:text-primary transition-colors leading-tight\">\n                                            {section.id === \"04\" ? (\n                                                <>\n                                                    投資の学びとは？<br />\n                                                    <span className=\"text-lg font-medium text-gray-500\">GFSを使って一緒に見ていこう！</span>\n                                                </>\n                                            ) : (\n                                                section.title\n                                            )}\n                                        </h3>\n                                        <p className=\"text-base text-gray-500\">{section.subtitle}</p>\n                                    </div>\n\n                                    {/* 矢印 */}\n                                    <ChevronRight className=\"w-6 h-6 text-gray-300 group-hover:text-primary group-hover:translate-x-1 transition-all\" />\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n\n                {/* 開始ボタン */}\n                <div\n                    className={`transition-all duration-1000 delay-700 ${isVisible ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"\n                        }`}\n                >\n                    <Button\n                        onClick={onStart}\n                        size=\"lg\"\n                        className=\"min-w-64 text-xl h-20 shadow-2xl hover:scale-105 transition-transform bg-gradient-to-r from-primary to-blue-600 hover:from-blue-600 hover:to-blue-700 font-black px-12\"\n                    >\n                        GFSへようこそ！\n                        <ArrowRight className=\"w-8 h-8\" />\n                    </Button>\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/HearingMemo.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Save' is defined but never used.","line":5,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":55,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Save"},"fix":{"range":[155,161],"text":""},"desc":"Remove unused variable \"Save\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Check' is defined but never used.","line":5,"column":57,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":62,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Check"},"fix":{"range":[161,168],"text":""},"desc":"Remove unused variable \"Check\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ExternalLink' is defined but never used.","line":5,"column":74,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":86,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ExternalLink"},"fix":{"range":[178,192],"text":""},"desc":"Remove unused variable \"ExternalLink\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'HelpCircle' is defined but never used.","line":5,"column":88,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":98,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"HelpCircle"},"fix":{"range":[192,204],"text":""},"desc":"Remove unused variable \"HelpCircle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronRight' is defined but never used.","line":5,"column":100,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":112,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ChevronRight"},"fix":{"range":[204,218],"text":""},"desc":"Remove unused variable \"ChevronRight\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"cn"},"fix":{"range":[358,391],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2235,2238],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2235,2238],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport { User, Target, Wallet, FileText, PenLine, Save, Check, Sparkles, ExternalLink, HelpCircle, ChevronRight, Maximize2 } from \"lucide-react\";\nimport { UserInput, SimulationResult } from \"@/types\";\nimport { formatPercent } from \"@/lib/simulation\";\nimport { cn } from \"@/lib/utils\";\n\ninterface HearingMemoProps {\n    userData: UserInput | null;\n    simulationResult: SimulationResult | null;\n    isOpen: boolean;\n    onToggle: () => void;\n    memoText: string;\n    onMemoChange: (text: string) => void;\n    isHearingComplete: boolean;\n}\n\nexport default function HearingMemo({\n    userData,\n    simulationResult,\n    isOpen,\n    onToggle,\n    memoText,\n    onMemoChange,\n    isHearingComplete\n}: HearingMemoProps) {\n    const [activeTab, setActiveTab] = useState<\"summary\" | \"memo\">(\"memo\");\n    const [isRateVisible, setIsRateVisible] = useState(false);\n\n    const openSupportWindow = () => {\n        const params = new URLSearchParams({\n            name: userData?.name || \"\",\n            age: String(userData?.age || \"\"),\n            occupation: userData?.occupation || \"\",\n            familyStructure: userData?.familyStructure || \"\",\n            investmentGoal: userData?.investmentGoal || \"\",\n            experience: userData?.experience || \"\",\n            knowledgeLevel: userData?.knowledgeLevel || \"\",\n            currentAssets: String(userData?.currentAssets || 0),\n            monthlyInvestment: String(userData?.monthlyInvestment || 0),\n        });\n\n        const width = 500;\n        const height = 900;\n        const left = 0;\n        const top = 0;\n\n        window.open(\n            `/support-panel?${params.toString()}`,\n            \"GFSSupportPanel\",\n            `width=${width},height=${height},left=${left},top=${top},resizable=yes,scrollbars=yes,status=no,location=no,toolbar=no,menubar=no`\n        );\n    };\n\n    const openPiPSupport = async () => {\n        if (!('documentPictureInPicture' in window)) {\n            alert(\"このブラウザはAlways-on-Topモードに対応していません。通常の別ウィンドウ表示をご利用ください。\");\n            openSupportWindow();\n            return;\n        }\n\n        try {\n            const pipWindow = await (window as any).documentPictureInPicture.requestWindow({\n                width: 500,\n                height: 800,\n            });\n\n            // スタイルのコピー（より堅牢な方法）\n            const allStyleSheets = Array.from(document.styleSheets);\n            allStyleSheets.forEach((styleSheet) => {\n                try {\n                    if (styleSheet.href) {\n                        const link = document.createElement(\"link\");\n                        link.rel = \"stylesheet\";\n                        link.href = styleSheet.href;\n                        pipWindow.document.head.appendChild(link);\n                    } else {\n                        const cssRules = Array.from(styleSheet.cssRules)\n                            .map((rule) => rule.cssText)\n                            .join(\"\");\n                        const style = document.createElement(\"style\");\n                        style.textContent = cssRules;\n                        pipWindow.document.head.appendChild(style);\n                    }\n                } catch (e) {\n                    console.warn(\"Could not copy stylesheet\", e);\n                }\n            });\n\n            // HTML/Bodyのスタイルを設定してコンテンツを表示可能にする\n            const styleElement = document.createElement(\"style\");\n            styleElement.textContent = `\n                html, body, #pip-root {\n                    height: 100%;\n                    margin: 0;\n                    padding: 0;\n                    overflow: hidden;\n                    background-color: #f8fafc;\n                }\n            `;\n            pipWindow.document.head.appendChild(styleElement);\n\n            const container = pipWindow.document.createElement(\"div\");\n            container.id = \"pip-root\";\n            pipWindow.document.body.appendChild(container);\n\n            // ウィンドウを左側に寄せる試み（ブラウザにより制限がある場合があります）\n            try {\n                // PiPウィンドウの初期位置指定はできないため、オープン後に移動を試みる\n                // 注意: 一部のブラウザではmoveToが制限されているか、ユーザー操作に依存します\n                setTimeout(() => {\n                    pipWindow.moveTo(0, 0);\n                }, 100);\n            } catch (e) {\n                console.warn(\"Could not move PiP window\", e);\n            }\n\n            // 動的インポートを使用してSupportPanelをインクルード\n            const { default: SupportPanel } = await import(\"@/components/SupportPanel\");\n            const root = createRoot(container);\n            root.render(\n                <div className=\"h-screen bg-slate-50 overflow-hidden\">\n                    <SupportPanel\n                        userData={userData as UserInput}\n                        isOpen={true}\n                        onToggle={() => pipWindow.close()}\n                        isStandalone={true}\n                    />\n                </div>\n            );\n\n            // ウィンドウが閉じられた時のクリーンアップ\n            pipWindow.addEventListener(\"pagehide\", () => {\n                root.unmount();\n            });\n\n        } catch (err) {\n            console.error(err);\n            openSupportWindow();\n        }\n    };\n\n    // Force memo tab if hearing is not complete\n    useEffect(() => {\n        if (!isHearingComplete) {\n            setActiveTab(\"memo\");\n            setIsRateVisible(false); // Reset visibility when hearing is fresh\n        }\n    }, [isHearingComplete]);\n\n    return (\n        <div\n            className={`fixed top-1/2 -translate-y-1/2 right-0 z-50 transition-all duration-500 transform ${isOpen ? \"translate-x-0\" : \"translate-x-[calc(100%-40px)]\"}`}\n        >\n            <div className=\"flex items-stretch shadow-2xl h-[70vh]\">\n                {/* 開閉ボタン（縦の帯） */}\n                <button\n                    onClick={onToggle}\n                    className={`w-10 bg-slate-900 text-white flex flex-col items-center justify-center gap-4 py-8 rounded-l-2xl hover:bg-slate-800 transition-colors cursor-pointer group`}\n                >\n                    <FileText className={`w-5 h-5 transition-transform duration-500 ${isOpen ? \"rotate-0 scale-110\" : \"rotate-0\"}`} />\n                    <span className=\"[writing-mode:vertical-rl] font-black text-[10px] tracking-[0.3em] uppercase opacity-70 group-hover:opacity-100\">\n                        {isOpen ? \"Close Panel\" : \"Side Memo\"}\n                    </span>\n                </button>\n\n                {/* メモ内容 */}\n                <div className=\"w-80 bg-white/95 backdrop-blur-xl border-l border-slate-200 flex flex-col overflow-hidden\">\n                    {/* GFS Content & Support Window Link - Compact & Stylish */}\n                    <div className=\"px-4 py-3 border-b border-slate-100 bg-slate-50/30 flex gap-2\">\n                        <a\n                            href=\"https://gfs.tokyo/\"\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            className=\"flex-1 flex items-center justify-center gap-2 py-2.5 px-3 bg-white border border-slate-100 rounded-xl hover:bg-blue-50/50 hover:border-blue-200 transition-all group/link shadow-sm\"\n                        >\n                            <Sparkles className=\"w-3 h-3 text-blue-600\" />\n                            <span className=\"text-[9px] font-black text-slate-600 tracking-tight\">GFS CONTENTS</span>\n                        </a>\n\n                        <button\n                            onClick={openPiPSupport}\n                            className=\"flex-1 flex items-center justify-center gap-3 py-3 px-4 bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition-all group/support shadow-xl shadow-slate-200 border-b-4 border-slate-700 active:border-b-0 active:translate-y-1\"\n                        >\n                            <div className=\"w-8 h-8 rounded-lg bg-blue-600/20 flex items-center justify-center group-hover/support:bg-blue-600/30 transition-colors\">\n                                <Maximize2 className=\"w-4 h-4 text-blue-400 group-hover/support:scale-110 transition-transform\" />\n                            </div>\n                            <div className=\"flex flex-col items-start\">\n                                <span className=\"text-[10px] font-black tracking-[0.1em] text-white\">PRESENTER MODE</span>\n                                <span className=\"text-[8px] font-bold tracking-tight text-slate-400\">Always on Top Assistant</span>\n                            </div>\n                        </button>\n                    </div>\n\n                    {/* Tabs Header */}\n                    <div className=\"p-4 border-b border-slate-100 bg-slate-50/50 flex gap-2\">\n                        {isHearingComplete && (\n                            <button\n                                onClick={() => setActiveTab(\"summary\")}\n                                className={`flex-1 flex items-center justify-center gap-2 py-2 rounded-xl text-[10px] font-black tracking-wider transition-all ${activeTab === \"summary\" ? \"bg-slate-900 text-white shadow-lg\" : \"text-slate-400 hover:bg-slate-200\"}`}\n                            >\n                                <FileText className=\"w-3.5 h-3.5\" />\n                                SUMMARY\n                            </button>\n                        )}\n                        <button\n                            onClick={() => setActiveTab(\"memo\")}\n                            className={`flex-1 flex items-center justify-center gap-2 py-2 rounded-xl text-[10px] font-black tracking-wider transition-all ${activeTab === \"memo\" ? \"bg-blue-600 text-white shadow-lg shadow-blue-200\" : \"text-slate-400 hover:bg-slate-200\"}`}\n                        >\n                            <PenLine className=\"w-3.5 h-3.5\" />\n                            PRIVATE MEMO\n                        </button>\n                    </div>\n\n                    <div className=\"flex-1 overflow-y-auto p-6 custom-scrollbar\">\n                        {activeTab === \"summary\" && isHearingComplete && userData ? (\n                            <div className=\"space-y-8 animate-in fade-in duration-300\">\n                                <div>\n                                    <h3 className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2\">\n                                        <User className=\"w-3.5 h-3.5\" /> Profile\n                                    </h3>\n                                    <div className=\"space-y-4\">\n                                        <div className=\"p-4 bg-slate-50 rounded-xl\">\n                                            <p className=\"text-[9px] font-bold text-slate-400 mb-1\">お名前 / 年齢</p>\n                                            <p className=\"text-lg font-black text-slate-900\">{userData.name} 様 <span className=\"text-xs font-medium text-slate-500\">({userData.age}歳)</span></p>\n                                        </div>\n                                        <div className=\"p-4 bg-slate-50 rounded-xl\">\n                                            <p className=\"text-[9px] font-bold text-slate-400 mb-1\">職業 / 家族構成</p>\n                                            <p className=\"text-sm font-bold text-slate-800\">\n                                                {userData.occupation || \"未入力\"}\n                                                {userData.familyStructure && ` / ${userData.familyStructure}`}\n                                            </p>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div>\n                                    <h3 className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2\">\n                                        <Target className=\"w-3.5 h-3.5\" /> Goal & Experience\n                                    </h3>\n                                    <div className=\"space-y-4\">\n                                        <div className=\"p-4 bg-blue-50/50 rounded-xl border border-blue-100\">\n                                            <p className=\"text-[9px] font-bold text-blue-400 mb-1\">将来の目標</p>\n                                            <p className=\"text-sm font-bold text-slate-800 leading-relaxed\">「{userData.investmentGoal}」</p>\n                                        </div>\n                                        <div className=\"p-4 bg-slate-50 rounded-xl\">\n                                            <p className=\"text-[9px] font-bold text-slate-400 mb-1\">投資経験 / 知識</p>\n                                            <div className=\"flex flex-wrap gap-2 mt-2\">\n                                                <span className=\"px-2 py-1 bg-white border border-slate-200 rounded text-[9px] font-bold text-slate-600\">{userData.experience}</span>\n                                                <span className=\"px-2 py-1 bg-white border border-slate-200 rounded text-[9px] font-bold text-slate-600\">知識レベル: {userData.knowledgeLevel}</span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div>\n                                    <h3 className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2\">\n                                        <Wallet className=\"w-3.5 h-3.5\" /> Assets\n                                    </h3>\n                                    <div className=\"space-y-3\">\n                                        <div className=\"p-4 bg-emerald-50/50 rounded-xl border border-emerald-100\">\n                                            <p className=\"text-[9px] font-bold text-emerald-600 mb-1\">現在の投資可能額</p>\n                                            <p className=\"text-xl font-black text-slate-900\">{(userData.currentAssets / 10000).toLocaleString()}<span className=\"text-[10px] ml-1\">万円</span></p>\n                                        </div>\n                                        <div className=\"p-4 bg-slate-50 rounded-xl\">\n                                            <p className=\"text-[9px] font-bold text-slate-400 mb-1\">月々の投資可能額</p>\n                                            <p className=\"text-lg font-black text-slate-900\">{(userData.monthlyInvestment / 10000).toLocaleString()}<span className=\"text-[10px] ml-1\">万円</span></p>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                {simulationResult && (\n                                    <div className=\"pt-4 border-t border-slate-100\">\n                                        <button\n                                            onClick={() => setIsRateVisible(true)}\n                                            className={`w-full p-4 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl shadow-lg transition-all duration-300 flex items-center justify-between gap-3 group ${!isRateVisible ? \"cursor-pointer hover:scale-[1.02] active:scale-95 shadow-blue-100/50\" : \"cursor-default shadow-blue-200/50\"}`}\n                                        >\n                                            <div className=\"flex items-center gap-2\">\n                                                <Target className=\"w-4 h-4 text-white/80\" />\n                                                <p className=\"text-[11px] font-black text-white tracking-widest leading-none\">\n                                                    {userData?.name}様に必要な年利\n                                                </p>\n                                            </div>\n                                            <p className=\"text-xl font-black text-white tracking-tighter shrink-0\">\n                                                {isRateVisible ? formatPercent(simulationResult.requiredAnnualRate) : \"??.?\"}\n                                                <span className=\"text-xs ml-0.5 opacity-70\">%</span>\n                                            </p>\n                                        </button>\n                                        <p className=\"mt-2 text-center text-[9px] font-black text-slate-400 italic\">\n                                            {isRateVisible ? `GOAL: ${formatPercent(simulationResult.requiredAnnualRate)}` : \"CLICK TO REVEAL TARGET\"}\n                                        </p>\n                                    </div>\n                                )}\n                            </div>\n                        ) : (\n                            <div className=\"h-full flex flex-col animate-in fade-in duration-300\">\n                                <div className=\"flex justify-between items-center mb-4\">\n                                    <h3 className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-2\">\n                                        <PenLine className=\"w-3.5 h-3.5\" /> Side Note\n                                    </h3>\n                                </div>\n                                <textarea\n                                    value={memoText}\n                                    onChange={(e) => onMemoChange(e.target.value)}\n                                    placeholder=\"自由にメモを残してください...\"\n                                    className=\"flex-1 w-full bg-blue-50/30 rounded-2xl p-4 text-sm font-bold text-slate-700 placeholder:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-100 resize-none leading-relaxed custom-scrollbar\"\n                                />\n                                <p className=\"mt-4 text-[9px] font-medium text-slate-400 italic\">\n                                    ※入力した内容は一時的なものです（再起動でリセットされます）\n                                </p>\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n            <style jsx global>{`\n                .custom-scrollbar::-webkit-scrollbar {\n                    width: 4px;\n                }\n                .custom-scrollbar::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .custom-scrollbar::-webkit-scrollbar-thumb {\n                    background: #e2e8f0;\n                    border-radius: 10px;\n                }\n                .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n                    background: #cbd5e1;\n                }\n            `}</style>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/Phase1Hearing.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used.","line":8,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":50,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CardTitle"},"fix":{"range":[320,331],"text":""},"desc":"Remove unused variable \"CardTitle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardDescription' is defined but never used.","line":8,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":67,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CardDescription"},"fix":{"range":[331,348],"text":""},"desc":"Remove unused variable \"CardDescription\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":9,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":39,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Clock"},"fix":{"range":[411,418],"text":""},"desc":"Remove unused variable \"Clock\"."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/Phase1Hearing.tsx:43:25\n  41 |\n  42 |     useEffect(() => {\n> 43 |         if (!isPreview) setShowContent(true);\n     |                         ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  44 |     }, [isPreview]);\n  45 |\n  46 |     // ステップが切り替わったときにトップにスクロール","line":43,"column":25,"nodeType":null,"endLine":43,"endColumn":39},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/Phase1Hearing.tsx:56:13\n  54 |     useEffect(() => {\n  55 |         if (isPreview && typeof subStep === 'number' && subStep !== step) {\n> 56 |             setStep(subStep);\n     |             ^^^^^^^ Avoid calling setState() directly within an effect\n  57 |         }\n  58 |     }, [subStep, isPreview, step]);\n  59 |","line":56,"column":13,"nodeType":null,"endLine":56,"endColumn":20}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { UserInput } from \"@/types\";\nimport { toHalfWidth, formatJapaneseAmount, parseNumericInput } from \"@/lib/simulation\";\nimport { Button } from \"@/components/ui/Button\";\nimport { Input } from \"@/components/ui/Input\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/Card\";\nimport { User, Calendar, Target, Clock, Wallet, Sparkles, ArrowRight, CheckCircle, ChevronLeft, FileText } from \"lucide-react\";\nimport Image from \"next/image\";\n\ninterface Phase1HearingProps {\n    onSubmit: (data: UserInput) => void;\n    onBack: () => void;\n    onGoToAgenda: () => void;\n    onSubStepChange?: (subStep: number | string) => void;\n    subStep?: number | string;\n    isPreview?: boolean;\n}\n\nexport default function Phase1Hearing({ onSubmit, onBack, onGoToAgenda, onSubStepChange, subStep, isPreview = false }: Phase1HearingProps) {\n    const [step, setStep] = useState(isPreview && typeof subStep === 'number' ? subStep : 0);\n    const [showContent, setShowContent] = useState(isPreview);\n    const [formData, setFormData] = useState<UserInput>({\n        name: \"\",\n        age: 35,\n        investmentGoal: \"\",\n        targetAmount: 30000000,\n        targetPeriod: 10,\n        initialBudget: 1000000,\n        monthlySavings: 30000,\n        occupation: \"\",\n        familyStructure: \"\",\n        investmentExperience: [],\n        experience: \"未入力\",\n        knowledgeLevel: \"初級\",\n        currentAssets: 1000000,\n        monthlyInvestment: 30000,\n    });\n    const [errors, setErrors] = useState<Partial<Record<keyof UserInput, string>>>({});\n\n    useEffect(() => {\n        if (!isPreview) setShowContent(true);\n    }, [isPreview]);\n\n    // ステップが切り替わったときにトップにスクロール\n    useEffect(() => {\n        if (!isPreview) {\n            window.scrollTo({ top: 0, behavior: \"smooth\" });\n        }\n    }, [step, isPreview]);\n\n    // Sync from prop (for preview mode)\n    useEffect(() => {\n        if (isPreview && typeof subStep === 'number' && subStep !== step) {\n            setStep(subStep);\n        }\n    }, [subStep, isPreview, step]);\n\n    const questions = [\n        {\n            title: \"お名前を教えてください\",\n            subtitle: \"本日はよろしくお願いいたします\",\n            icon: User,\n        },\n        {\n            title: \"基本的なプロフィールを教えてください\",\n            subtitle: \"より具体的なアドバイスのためにご協力ください\",\n            icon: Target,\n        },\n        {\n            title: \"目標金額と期間を教えてください\",\n            subtitle: \"具体的な数字があると計画が立てやすくなります\",\n            icon: Calendar,\n        },\n        {\n            title: \"現在の投資可能額を教えてください\",\n            subtitle: \"無理のない金額からスタートすることが大切です\",\n            icon: Wallet,\n        },\n    ];\n\n    const validateStep = (stepIndex: number): boolean => {\n        const newErrors: Partial<Record<keyof UserInput, string>> = {};\n\n        switch (stepIndex) {\n            case 0:\n                if (!formData.name.trim()) newErrors.name = \"お名前を入力してください\";\n                break;\n            case 1:\n                if (formData.age < 18 || formData.age > 100) newErrors.age = \"有効な年齢を入力してください\";\n                if (!formData.investmentGoal.trim()) newErrors.investmentGoal = \"投資で達成したいことを入力してください\";\n                if (!formData.occupation?.trim()) newErrors.occupation = \"職業を入力してください\";\n                break;\n            case 2:\n                if (formData.targetAmount < 100000) newErrors.targetAmount = \"目標金額を入力してください\";\n                if (formData.targetPeriod < 1 || formData.targetPeriod > 100) newErrors.targetPeriod = \"1〜100年の間で入力してください\";\n                break;\n            case 3:\n                if (formData.initialBudget < 0) newErrors.initialBudget = \"有効な数値を入力してください\";\n                if (formData.monthlySavings < 0) newErrors.monthlySavings = \"有効な数値を入力してください\";\n                if (formData.initialBudget === 0 && formData.monthlySavings === 0) {\n                    newErrors.initialBudget = \"初期予算または毎月の積立額のどちらかを入力してください\";\n                }\n                break;\n        }\n\n        setErrors(newErrors);\n        return Object.keys(newErrors).length === 0;\n    };\n\n    const handleNext = () => {\n        if (validateStep(step)) {\n            if (step < 3) {\n                const next = step + 1;\n                setStep(next);\n                onSubStepChange?.(next);\n            } else {\n                handleSubmit();\n            }\n        }\n    };\n\n    const handleBack = () => {\n        if (step > 0) {\n            const prev = step - 1;\n            setStep(prev);\n            onSubStepChange?.(prev);\n        } else {\n            onBack();\n        }\n    };\n\n    const handleSubmit = () => {\n        onSubmit(formData);\n    };\n\n    const goalSuggestions = [\n        \"早めにFIREして自由に暮らしたい\",\n        \"老後の資金問題を解決したい\",\n        \"子供のために資金を準備したい\",\n        \"マイホームを建てたい\",\n        \"海外旅行に行きたい\",\n        \"配当金で生活費を賄いたい\",\n    ];\n\n    const renderStepContent = () => {\n        const currentQuestion = questions[step];\n\n        return (\n            <div className=\"space-y-6\">\n                {/* ステップヘッダー */}\n                <div className=\"text-center\">\n                    <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-primary to-blue-600 text-white mb-4 animate-bounce-gentle shadow-xl\">\n                        <currentQuestion.icon className=\"w-8 h-8\" />\n                    </div>\n                    <h2 className=\"text-2xl font-bold text-gray-800 mb-2\">{currentQuestion.title}</h2>\n                    <p className=\"text-gray-500\">{currentQuestion.subtitle}</p>\n                </div>\n\n                {/* フォームコンテンツ */}\n                <div className=\"space-y-4\">\n                    {step === 0 && (\n                        <div className=\"max-w-md mx-auto\">\n                            <Input\n                                label=\"お名前\"\n                                placeholder=\"例：田中 太郎\"\n                                value={formData.name}\n                                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                                error={errors.name}\n                                className=\"text-lg py-4\"\n                            />\n                        </div>\n                    )}\n\n                    {step === 1 && (\n                        <div className=\"max-w-2xl mx-auto space-y-6\">\n                            <div className=\"grid md:grid-cols-2 gap-6\">\n                                <Input\n                                    label=\"ご年齢\"\n                                    type=\"text\"\n                                    inputMode=\"numeric\"\n                                    placeholder=\"35\"\n                                    value={formData.age}\n                                    onChange={(e) => setFormData({ ...formData, age: parseInt(toHalfWidth(e.target.value)) || 0 })}\n                                    error={errors.age}\n                                />\n                                <Input\n                                    label=\"職業\"\n                                    placeholder=\"例：会社員、公務員、経営者\"\n                                    value={formData.occupation}\n                                    onChange={(e) => setFormData({ ...formData, occupation: e.target.value })}\n                                    error={errors.occupation}\n                                />\n                            </div>\n                            <Input\n                                label=\"家族構成\"\n                                placeholder=\"例：独身、既婚（子供1名）\"\n                                value={formData.familyStructure}\n                                onChange={(e) => setFormData({ ...formData, familyStructure: e.target.value })}\n                            />\n\n                            <div className=\"space-y-3\">\n                                <label className=\"text-sm font-bold text-gray-700\">投資経験・興味（複数選択可）</label>\n                                <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-3\">\n                                    {[\"個別株\", \"投資信託\", \"NISA\", \"iDeCo\", \"仮想通貨\", \"FX\", \"不動産投資\"].map((exp) => (\n                                        <label key={exp} className={`flex items-center gap-2 p-3 rounded-xl border-2 transition-all cursor-pointer ${formData.investmentExperience?.includes(exp) ? \"border-primary bg-blue-50 text-primary\" : \"border-slate-100 hover:border-slate-200\"}`}>\n                                            <input\n                                                type=\"checkbox\"\n                                                className=\"hidden\"\n                                                checked={formData.investmentExperience?.includes(exp)}\n                                                onChange={(e) => {\n                                                    const current = formData.investmentExperience || [];\n                                                    let next: string[];\n                                                    if (e.target.checked) {\n                                                        next = [...current, exp];\n                                                    } else {\n                                                        next = current.filter(item => item !== exp);\n                                                    }\n                                                    setFormData({\n                                                        ...formData,\n                                                        investmentExperience: next,\n                                                        experience: next.length > 0 ? next.join('・') : \"未入力\"\n                                                    });\n                                                }}\n                                            />\n                                            <span className=\"font-bold text-sm\">{exp}</span>\n                                        </label>\n                                    ))}\n                                </div>\n                            </div>\n\n                            <div>\n                                <Input\n                                    label=\"投資で利益が出たらやりたいこと\"\n                                    placeholder=\"例：50歳でFIREして世界一周旅行\"\n                                    value={formData.investmentGoal}\n                                    onChange={(e) => setFormData({ ...formData, investmentGoal: e.target.value })}\n                                    error={errors.investmentGoal}\n                                />\n                                <div className=\"mt-3 flex flex-wrap gap-2\">\n                                    {goalSuggestions.map((suggestion, index) => (\n                                        <button\n                                            key={index}\n                                            type=\"button\"\n                                            onClick={() => setFormData({ ...formData, investmentGoal: suggestion })}\n                                            className=\"text-xs px-3 py-1.5 bg-blue-50 text-primary rounded-full hover:bg-blue-100 transition-colors\"\n                                        >\n                                            {suggestion}\n                                        </button>\n                                    ))}\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {step === 2 && (\n                        <div className=\"max-w-2xl mx-auto\">\n                            <div className=\"grid md:grid-cols-2 gap-6\">\n                                <div>\n                                    <Input\n                                        label=\"目標金額（円）\"\n                                        type=\"text\"\n                                        inputMode=\"numeric\"\n                                        placeholder=\"30000000\"\n                                        value={formData.targetAmount ? formData.targetAmount.toLocaleString() : \"\"}\n                                        onChange={(e) => setFormData({ ...formData, targetAmount: parseNumericInput(e.target.value) })}\n                                        error={errors.targetAmount}\n                                    />\n                                    <p className=\"text-sm text-gray-500 mt-1\">\n                                        ={\" \"}\n                                        <span className=\"font-bold text-primary\">\n                                            {formatJapaneseAmount(formData.targetAmount)}\n                                        </span>\n                                    </p>\n                                </div>\n                                <div>\n                                    <Input\n                                        label=\"達成期間（年）\"\n                                        type=\"text\"\n                                        inputMode=\"numeric\"\n                                        placeholder=\"10\"\n                                        value={formData.targetPeriod}\n                                        onChange={(e) => setFormData({ ...formData, targetPeriod: parseInt(toHalfWidth(e.target.value)) || 0 })}\n                                        error={errors.targetPeriod}\n                                    />\n                                    <p className=\"text-sm text-gray-500 mt-1\">\n                                        {formData.age + formData.targetPeriod}歳のときに達成\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {step === 3 && (\n                        <div className=\"max-w-2xl mx-auto space-y-8\">\n                            <div className=\"grid md:grid-cols-2 gap-8\">\n                                <div>\n                                    <Input\n                                        label=\"現在出せる投資資金（円）\"\n                                        type=\"text\"\n                                        inputMode=\"numeric\"\n                                        placeholder=\"1000000\"\n                                        value={formData.initialBudget ? formData.initialBudget.toLocaleString() : \"\"}\n                                        onChange={(e) => {\n                                            const val = parseNumericInput(e.target.value);\n                                            setFormData({ ...formData, initialBudget: val, currentAssets: val });\n                                        }}\n                                        error={errors.initialBudget}\n                                    />\n                                    <p className=\"text-sm text-gray-500 mt-1\">\n                                        ={\" \"}\n                                        <span className=\"font-bold text-primary\">\n                                            {formatJapaneseAmount(formData.initialBudget)}\n                                        </span>\n                                    </p>\n                                </div>\n                                <div>\n                                    <Input\n                                        label=\"毎月の積立金額（円）\"\n                                        type=\"text\"\n                                        inputMode=\"numeric\"\n                                        placeholder=\"30000\"\n                                        value={formData.monthlySavings ? formData.monthlySavings.toLocaleString() : \"\"}\n                                        onChange={(e) => {\n                                            const val = parseNumericInput(e.target.value);\n                                            setFormData({ ...formData, monthlySavings: val, monthlyInvestment: val });\n                                        }}\n                                        error={errors.monthlySavings}\n                                    />\n                                    <p className=\"text-sm text-gray-500 mt-1\">\n                                        年間で{\" \"}\n                                        <span className=\"font-bold text-primary\">\n                                            {formatJapaneseAmount(formData.monthlySavings * 12)}\n                                        </span>\n                                        の積立\n                                    </p>\n                                </div>\n                            </div>\n                            <div className=\"p-4 bg-amber-50 rounded-xl border border-amber-200\">\n                                <p className=\"text-sm text-amber-800\">\n                                    💡 最初は月5,000円〜でも大丈夫です。スキルに応じて増やしていくのが成功のコツです\n                                </p>\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n        );\n    };\n\n    return (\n        <div className=\"min-h-screen relative overflow-hidden bg-gradient-to-br from-slate-50 via-blue-50 to-white\">\n            {/* 背景のマスコット画像 */}\n            <div className=\"absolute inset-0 pointer-events-none overflow-visible\">\n                <Image\n                    src=\"/mascot/mascot_cheer_blue.png\"\n                    alt=\"\"\n                    width={200}\n                    height={200}\n                    className=\"absolute top-4 left-4 opacity-10 animate-float-slow\"\n                />\n                <Image\n                    src=\"/mascot/mascot_happy.png\"\n                    alt=\"\"\n                    width={180}\n                    height={180}\n                    className=\"absolute top-1/3 -right-10 opacity-10 animate-float-delayed\"\n                />\n                <Image\n                    src=\"/mascot/mascot_phone.png\"\n                    alt=\"\"\n                    width={150}\n                    height={150}\n                    className=\"absolute -bottom-10 left-1/4 opacity-10 animate-bounce-gentle\"\n                />\n            </div>\n\n            <div className=\"relative z-10 min-h-screen flex items-center justify-center py-8 px-4\">\n                <div className=\"w-full max-w-3xl\">\n                    {/* セクションヘッダー */}\n                    <div className={`text-center mb-6 transition-all duration-700 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                        <div className=\"flex justify-between items-center mb-4 max-w-3xl mx-auto\">\n                            <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                onClick={onBack}\n                                className=\"text-slate-600 hover:text-slate-900 transition-colors\"\n                            >\n                                <ChevronLeft className=\"w-4 h-4 mr-1\" />\n                                戻る\n                            </Button>\n                            <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                onClick={onGoToAgenda}\n                                className=\"text-slate-600 hover:text-slate-900 transition-colors\"\n                            >\n                                <FileText className=\"w-4 h-4 mr-1\" />\n                                目次\n                            </Button>\n                        </div>\n                        <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-slate-900/5 backdrop-blur rounded-full mb-4 ring-1 ring-slate-900/10\">\n                            <span className=\"text-slate-900 font-medium\">あなたのことを教えてください</span>\n                        </div>\n                    </div>\n\n                    {/* メインカード */}\n                    <Card className={`border-0 shadow-2xl transition-all duration-700 delay-200 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                        <CardHeader className=\"text-center pb-2\">\n                            {/* ステップインジケーター */}\n                            <div className=\"flex justify-center gap-3 mb-6\">\n                                {[0, 1, 2, 3].map((i) => (\n                                    <div key={i} className=\"flex items-center gap-3\">\n                                        <div\n                                            className={`w-10 h-10 rounded-full flex items-center justify-center font-bold transition-all ${i < step\n                                                ? \"bg-primary text-white\"\n                                                : i === step\n                                                    ? \"bg-primary text-white ring-4 ring-primary/30 animate-pulse\"\n                                                    : \"bg-gray-200 text-gray-400\"\n                                                }`}\n                                        >\n                                            {i < step ? <CheckCircle className=\"w-5 h-5\" /> : i + 1}\n                                        </div>\n                                        {i < 3 && (\n                                            <div className={`w-12 h-1 rounded ${i < step ? \"bg-primary\" : \"bg-gray-200\"}`} />\n                                        )}\n                                    </div>\n                                ))}\n                            </div>\n                        </CardHeader>\n                        <CardContent className=\"pb-8\">\n                            {renderStepContent()}\n\n                            {/* ナビゲーションボタン */}\n                            <div className=\"flex justify-between mt-8 max-w-md mx-auto\">\n                                {step > 0 && (\n                                    <Button variant=\"outline\" onClick={handleBack}>\n                                        戻る\n                                    </Button>\n                                )}\n                                <Button\n                                    variant=\"ghost\"\n                                    onClick={handleSubmit}\n                                    className=\"text-slate-400 hover:text-slate-600 font-bold\"\n                                >\n                                    スキップ\n                                </Button>\n                                <Button\n                                    onClick={handleNext}\n                                    className={`${step === 0 ? \"flex-1 ml-4\" : \"flex-1 ml-4\"} animate-pulse-border`}\n                                >\n                                    {step < 3 ? (\n                                        <>\n                                            次へ\n                                            <ArrowRight className=\"w-4 h-4\" />\n                                        </>\n                                    ) : (\n                                        <>\n                                            <Sparkles className=\"w-4 h-4\" />\n                                            分析を開始する\n                                        </>\n                                    )}\n                                </Button>\n                            </div>\n                        </CardContent>\n                    </Card>\n\n                    {/* 入力サマリー */}\n                    {step > 0 && (\n                        <div className={`mt-6 p-4 bg-white/60 backdrop-blur rounded-xl border border-white/40 shadow-sm transition-all duration-500 ${showContent ? \"opacity-100\" : \"opacity-0\"}`}>\n                            <p className=\"text-slate-900 text-sm leading-relaxed\">\n                                {formData.name && <span className=\"text-amber-600 font-bold\">{formData.name}</span>}\n                                {formData.name && \"様 \"}\n                                {formData.age > 0 && <span className=\"font-medium\">({formData.age}歳)</span>}\n                                {formData.investmentGoal && (\n                                    <span className=\"block mt-1 font-medium\">\n                                        目標: 「{formData.investmentGoal}」\n                                        {formData.occupation && ` / 職業: ${formData.occupation}`}\n                                        {formData.investmentExperience && formData.investmentExperience.length > 0 && ` / 経験: ${formData.investmentExperience.join('・')}`}\n                                    </span>\n                                )}\n                            </p>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/Phase1ThreeSteps.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/Phase1ThreeSteps.tsx:19:25\n  17 |\n  18 |     useEffect(() => {\n> 19 |         if (!isPreview) setShowContent(true);\n     |                         ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  20 |     }, [isPreview]);\n  21 |\n  22 |     const steps = [","line":19,"column":25,"nodeType":null,"endLine":19,"endColumn":39}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Button } from \"@/components/ui/Button\";\nimport { ArrowRight, ChevronLeft, FileText, Target, TrendingUp, Zap, Flag } from \"lucide-react\";\nimport Image from \"next/image\";\n\ninterface Phase1ThreeStepsProps {\n    onNext?: () => void;\n    onBack?: () => void;\n    onGoToAgenda?: () => void;\n    isPreview?: boolean;\n}\n\nexport default function Phase1ThreeSteps({ onNext, onBack, onGoToAgenda, isPreview = false }: Phase1ThreeStepsProps) {\n    const [showContent, setShowContent] = useState(isPreview);\n\n    useEffect(() => {\n        if (!isPreview) setShowContent(true);\n    }, [isPreview]);\n\n    const steps = [\n        {\n            number: \"1\",\n            title: \"ゴールを決める\",\n            subtitle: \"（計画を立てよう）\",\n            icon: Target,\n            color: \"bg-blue-900\",\n            textColor: \"text-blue-900\",\n        },\n        {\n            number: \"2\",\n            title: \"適切な投資手段の決定\",\n            subtitle: \"（年利を考えてみる）\",\n            icon: TrendingUp,\n            color: \"bg-blue-900\",\n            textColor: \"text-blue-900\",\n        },\n        {\n            number: \"3\",\n            title: \"投資の実行\",\n            subtitle: \"（手段を決定してスタート）\",\n            icon: Zap,\n            color: \"bg-blue-900\",\n            textColor: \"text-blue-900\",\n        }\n    ];\n\n    return (\n        <div className=\"min-h-screen relative overflow-hidden bg-white\">\n            {/* GFSロゴ */}\n            <div className={`absolute top-8 left-8 z-30 transition-all duration-1000 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 -translate-y-10\"}`}>\n                <div className=\"flex items-center gap-3\">\n                    <Image src=\"/images/gfs_logo_navy.png\" alt=\"GFS\" width={80} height={80} className=\"object-contain\" />\n                    <div className=\"h-8 w-[1px] bg-slate-200 ml-1\" />\n                    <span className=\"text-[10px] font-black text-slate-400 uppercase tracking-[0.3em] bg-white/50 backdrop-blur-sm px-2 py-1 rounded\">Consulting AI</span>\n                </div>\n            </div>\n\n            {/* 装飾的な背景 */}\n            <div className=\"absolute top-0 right-0 w-1/2 h-full bg-slate-50 opacity-50 -skew-x-12 translate-x-1/4 pointer-events-none\"></div>\n\n            <div className=\"relative z-10 max-w-6xl mx-auto px-6 py-12 min-h-screen flex flex-col items-center justify-center\">\n\n                {/* ヘッダー */}\n                <div className={`w-full flex justify-between items-center mb-12 transition-all duration-700 ${showContent ? \"opacity-100\" : \"opacity-0\"}`}>\n                    <Button variant=\"ghost\" size=\"sm\" onClick={() => onBack?.()} className=\"text-slate-600 hover:text-slate-900\">\n                        <ChevronLeft className=\"w-4 h-4 mr-1\" /> 戻る\n                    </Button>\n                    <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-slate-900/5 backdrop-blur rounded-full ring-1 ring-slate-900/10\">\n                        <span className=\"text-blue-600 font-bold\">Section 02</span>\n                        <span className=\"text-slate-400\">/</span>\n                        <span className=\"text-slate-900\">資産形成の3ステップ</span>\n                    </div>\n                    <Button variant=\"ghost\" size=\"sm\" onClick={() => onGoToAgenda?.()} className=\"text-slate-600 hover:text-slate-900\">\n                        <FileText className=\"w-4 h-4 mr-1\" /> 目次\n                    </Button>\n                </div>\n\n                {/* メインタイトル */}\n                <div className={`text-center mb-16 transition-all duration-1000 delay-200 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                    <h1 className=\"text-4xl md:text-6xl font-black text-blue-900 mb-4 tracking-tighter flex items-center justify-center gap-4\">\n                        資産形成の3ステップ\n                    </h1>\n                    <div className=\"w-40 h-1.5 bg-blue-900 mx-auto rounded-full\"></div>\n                </div>\n\n                <div className=\"grid lg:grid-cols-2 gap-16 items-center w-full\">\n\n                    {/* ステップカードリスト */}\n                    <div className=\"space-y-6\">\n                        {steps.map((step, idx) => (\n                            <div\n                                key={idx}\n                                className={`group relative bg-white border-2 border-slate-100 rounded-3xl p-8 shadow-sm hover:shadow-xl hover:border-blue-100 transition-all duration-500 transform ${showContent ? \"opacity-100 translate-x-0\" : \"opacity-0 -translate-x-10\"}`}\n                                style={{ transitionDelay: `${400 + idx * 150}ms` }}\n                            >\n                                <div className=\"flex items-center gap-6\">\n                                    <div className=\"flex flex-col items-center shrink-0\">\n                                        <div className=\"bg-blue-900 text-white text-xs font-black px-4 py-1.5 rounded-full mb-3 tracking-widest uppercase\">\n                                            ステップ {step.number}\n                                        </div>\n                                        <div className=\"w-16 h-16 rounded-2xl bg-slate-50 flex items-center justify-center text-blue-900 group-hover:scale-110 transition-transform\">\n                                            <step.icon className=\"w-8 h-8\" />\n                                        </div>\n                                    </div>\n                                    <div className=\"flex-1 min-w-0\">\n                                        <h3 className=\"text-xl md:text-2xl font-black text-blue-900 mb-1 leading-tight break-keep\">{step.title}</h3>\n                                        <p className=\"text-slate-500 font-bold text-base md:text-lg\">{step.subtitle}</p>\n                                    </div>\n                                    <div className=\"hidden md:block opacity-0 group-hover:opacity-100 transition-opacity\">\n                                        <ArrowRight className=\"w-8 h-8 text-blue-200\" />\n                                    </div>\n                                </div>\n                                {idx < 2 && (\n                                    <div className=\"absolute -bottom-6 left-16 w-0.5 h-6 bg-slate-200\"></div>\n                                )}\n                            </div>\n                        ))}\n                    </div>\n\n                    {/* イラストレーションセクション (Mountain) */}\n                    <div className={`relative aspect-square max-w-lg mx-auto w-full transition-all duration-1000 delay-800 ${showContent ? \"opacity-100 scale-100\" : \"opacity-0 scale-95\"}`}>\n                        <div className=\"absolute inset-0 bg-blue-50/50 rounded-full blur-3xl\"></div>\n\n                        {/* 山の図解 (SVG) */}\n                        <div className=\"relative z-10 w-full h-full flex items-center justify-center\">\n                            <svg className=\"w-full h-full drop-shadow-2xl\" viewBox=\"0 0 100 100\">\n                                {/* 山 */}\n                                <path d=\"M 50 10 L 90 90 L 10 90 Z\" fill=\"#E2E8F0\" />\n                                <path d=\"M 50 10 L 50 90 L 10 90 Z\" fill=\"#CBD5E1\" />\n\n                                {/* 道 */}\n                                <path\n                                    d=\"M 50 85 Q 60 75, 45 65 Q 35 55, 55 45 Q 65 35, 50 20\"\n                                    fill=\"none\"\n                                    stroke=\"#1E3A8A\"\n                                    strokeWidth=\"2.5\"\n                                    strokeLinecap=\"round\"\n                                    className=\"animate-draw-path\"\n                                />\n\n                                {/* 旗 */}\n                                <g transform=\"translate(48, 8)\">\n                                    <rect width=\"1\" height=\"12\" fill=\"#64748B\" />\n                                    <path d=\"M 1 0 L 10 3 L 1 6 Z\" fill=\"#FACC15\" className=\"animate-pulse\" />\n                                </g>\n                            </svg>\n\n                            {/* マスコット配置 */}\n                            <div className=\"absolute top-1/2 left-0 -translate-y-1/2 animate-float-slow\">\n                                <Image src=\"/mascot/mascot_search.png\" alt=\"mascot\" width={100} height={100} className=\"drop-shadow-lg\" />\n                            </div>\n                            <div className=\"absolute bottom-4 right-4 animate-float-delayed\">\n                                <Image src=\"/mascot/mascot_cheer_blue.png\" alt=\"mascot\" width={120} height={120} className=\"drop-shadow-lg\" />\n                            </div>\n\n                            <div className=\"absolute bottom-28 left-1/2 -translate-x-1/2 bg-white/95 backdrop-blur px-8 py-3 rounded-2xl shadow-xl border border-blue-100 flex items-center gap-4 whitespace-nowrap min-w-max\">\n                                <div className=\"w-10 h-10 rounded-full bg-blue-900 flex items-center justify-center shrink-0\">\n                                    <Flag className=\"w-5 h-5 text-white\" />\n                                </div>\n                                <div className=\"flex flex-col\">\n                                    <p className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1\">Initial Goal</p>\n                                    <p className=\"font-black text-blue-900 text-base md:text-lg leading-none\">まずは「ゴール」を目指しましょう</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* ネクストアクション */}\n                <div className={`mt-20 transition-all duration-700 delay-1000 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                    <Button\n                        onClick={() => onNext?.()}\n                        size=\"lg\"\n                        className=\"bg-blue-900 hover:bg-slate-800 text-white font-black h-20 px-12 rounded-full text-xl md:text-2xl shadow-2xl group transform transition-all hover:scale-105\"\n                    >\n                        ゴール設定のためにあなたのことを教えてください\n                        <ArrowRight className=\"ml-4 w-6 h-6 md:w-8 md:h-8 group-hover:translate-x-3 transition-transform\" />\n                    </Button>\n                </div>\n\n                {/* フッター branding */}\n                <div className={`mt-12 transition-opacity duration-1000 delay-1200 ${showContent ? \"opacity-40\" : \"opacity-0\"}`}>\n                    <p className=\"text-blue-950 font-black text-xl tracking-[0.4em] italic\">Global Financial School</p>\n                </div>\n            </div>\n\n            <style jsx>{`\n                .animate-draw-path {\n                    stroke-dasharray: 100;\n                    stroke-dashoffset: 100;\n                    animation: draw 2s ease-out forwards 1.5s;\n                }\n                @keyframes draw {\n                    to { stroke-dashoffset: 0; }\n                }\n            `}</style>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/Phase2CompanyIntro.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used.","line":7,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":21,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Users"},"fix":{"range":[176,183],"text":""},"desc":"Remove unused variable \"Users\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'GraduationCap' is defined but never used.","line":7,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":36,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"GraduationCap"},"fix":{"range":[183,198],"text":""},"desc":"Remove unused variable \"GraduationCap\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trophy' is defined but never used.","line":7,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":44,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Trophy"},"fix":{"range":[198,206],"text":""},"desc":"Remove unused variable \"Trophy\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used.","line":7,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":57,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CheckCircle"},"fix":{"range":[206,219],"text":""},"desc":"Remove unused variable \"CheckCircle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":8,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":15,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TrendingUp"},"fix":{"range":[231,247],"text":""},"desc":"Remove unused variable \"TrendingUp\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Target' is defined but never used.","line":8,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":23,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Target"},"fix":{"range":[247,255],"text":""},"desc":"Remove unused variable \"Target\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowLeft' is defined but never used.","line":8,"column":69,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":78,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ArrowLeft"},"fix":{"range":[299,310],"text":""},"desc":"Remove unused variable \"ArrowLeft\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Star' is defined but never used.","line":9,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Star"},"fix":{"range":[310,320],"text":""},"desc":"Remove unused variable \"Star\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Award' is defined but never used.","line":9,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":16,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Award"},"fix":{"range":[320,327],"text":""},"desc":"Remove unused variable \"Award\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'userData' is defined but never used.","line":23,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":54},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setIsAutoPlaying' is assigned a value but never used.","line":25,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":43},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/Phase2CompanyIntro.tsx:38:9\n  36 |             scrollContainerRef.current.scrollTo({ top: 0, behavior: \"smooth\" });\n  37 |         }\n> 38 |         setHoveredProgram(null);\n     |         ^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  39 |     }, [currentSlide, isPreview]);\n  40 |     const [showContent, setShowContent] = useState(false);\n  41 |","line":38,"column":9,"nodeType":null,"endLine":38,"endColumn":26},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/Phase2CompanyIntro.tsx:43:9\n  41 |\n  42 |     useEffect(() => {\n> 43 |         setShowContent(true);\n     |         ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  44 |     }, []);\n  45 |\n  46 |     // Sync from prop (for preview mode)","line":43,"column":9,"nodeType":null,"endLine":43,"endColumn":23},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/Phase2CompanyIntro.tsx:49:13\n  47 |     useEffect(() => {\n  48 |         if (isPreview && typeof subStep === 'number' && subStep !== currentSlide) {\n> 49 |             setCurrentSlide(subStep);\n     |             ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  50 |         }\n  51 |     }, [subStep, isPreview, currentSlide]);\n  52 |","line":49,"column":13,"nodeType":null,"endLine":49,"endColumn":28},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":216,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":216,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7449,7452],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7449,7452],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState, useRef } from \"react\";\nimport { UserInput } from \"@/types\";\nimport { Button } from \"@/components/ui/Button\";\nimport {\n    Building2, Users, GraduationCap, Trophy, CheckCircle, ArrowRight,\n    TrendingUp, Target, Heart, Sparkles, ChevronLeft, ChevronRight, ArrowLeft,\n    Star, Award, BookOpen, MessageCircle, FileText, Maximize2, X\n} from \"lucide-react\";\nimport Image from \"next/image\";\n\ninterface Phase2CompanyIntroProps {\n    userData?: UserInput | null;\n    onNext?: () => void;\n    onBack?: () => void;\n    onGoToAgenda?: () => void;\n    onSubStepChange?: (subStep: number) => void;\n    subStep?: number;\n    isPreview?: boolean;\n}\n\nexport default function Phase2CompanyIntro({ userData, onNext, onBack, onGoToAgenda, onSubStepChange, subStep, isPreview = false }: Phase2CompanyIntroProps) {\n    const [currentSlide, setCurrentSlide] = useState(isPreview && typeof subStep === 'number' ? subStep : 0);\n    const [isAutoPlaying, setIsAutoPlaying] = useState(false);\n    const [hoveredProgram, setHoveredProgram] = useState<number | null>(null);\n    const [showExteriorOverlay, setShowExteriorOverlay] = useState(false);\n    const [isFullScreen, setIsFullScreen] = useState(false);\n    const [selectedVideoIndex, setSelectedVideoIndex] = useState(0);\n    const [isVideoPlaying, setIsVideoPlaying] = useState(false);\n    const scrollContainerRef = useRef<HTMLDivElement>(null);\n\n    // スライドが切り替わったときにコンテナ内をトップにスクロール\n    useEffect(() => {\n        if (!isPreview && scrollContainerRef.current) {\n            scrollContainerRef.current.scrollTo({ top: 0, behavior: \"smooth\" });\n        }\n        setHoveredProgram(null);\n    }, [currentSlide, isPreview]);\n    const [showContent, setShowContent] = useState(false);\n\n    useEffect(() => {\n        setShowContent(true);\n    }, []);\n\n    // Sync from prop (for preview mode)\n    useEffect(() => {\n        if (isPreview && typeof subStep === 'number' && subStep !== currentSlide) {\n            setCurrentSlide(subStep);\n        }\n    }, [subStep, isPreview, currentSlide]);\n\n    const goToSlide = (index: number) => {\n        setCurrentSlide(index);\n        onSubStepChange?.(index);\n    };\n\n    const nextSlide = () => {\n        if (currentSlide < slides.length - 1) {\n            const next = currentSlide + 1;\n            setCurrentSlide(next);\n            onSubStepChange?.(next);\n        } else {\n            onNext?.();\n        }\n    };\n\n    const prevSlide = () => {\n        if (currentSlide > 0) {\n            const prev = currentSlide - 1;\n            setCurrentSlide(prev);\n            onSubStepChange?.(prev);\n        } else {\n            onBack?.();\n        }\n    };\n\n    // スライドデータ（画像とカスタムを交互に配置）\n    const slides = [\n        {\n            type: \"company_info\",\n            title: \"講座の運営元\",\n            description: \"株式会社GFS Education\"\n        },\n        {\n            type: \"cm_videos\",\n            title: \"藤本美貴さん 出演CM放送中\",\n            description: \"お金の学校 GFS\",\n            videos: [\n                { src: \"/videos/ミキティCM.mp4\", title: \"TV CM 1\" },\n                { src: \"/videos/ミキティCM2.mp4\", title: \"TV CM 2\" },\n                { src: \"/videos/ミキティCM3.mp4\", title: \"TV CM 3\" }\n            ]\n        },\n        {\n            type: \"custom\",\n            title: \"GFSのコンセプト\",\n            icon: Heart,\n            color: \"from-rose-500 to-pink-600\",\n            characterImage: \"/slides/character_happy_new.png\",\n            content: {\n                heading: \"お金でやりたいことを諦めない世の中を創る\",\n                subheading: \"金融知識がすべての人にとって当たり前の時代を創る\",\n                points: [\n                    \"投資は一部の富裕層だけのものではありません\",\n                    \"正しい知識があれば、誰でも資産形成ができます\",\n                    \"GFSは金融教育の民主化を目指しています\"\n                ]\n            }\n        },\n        {\n            type: \"no1_achievements\",\n            title: \"オンライン投資スクール No.1\",\n            description: \"2025年 東京商工リサーチ調べ\",\n            achievements: [\n                { label: \"講師数\", rank: \"No.1\" },\n                { label: \"講義数\", rank: \"No.1\" },\n                { label: \"生徒数\", rank: \"No.1\" }\n            ],\n            students: \"60,000人\",\n            note: \"※2025年11月時点\"\n        },\n        {\n            type: \"student_achievements\",\n            title: \"GFS生徒の実績\",\n            description: \"入学前は約66%の方は投資初心者ですが、半年~1年ほどで30万円以上の利益を出しています！\",\n            barChart: {\n                title: \"生徒（投資初心者）の入学後実績\",\n                subtitle: \"入学から1年後には220万円以上の利益を出すことができています！\",\n                data: [\n                    { period: \"半年～\", amount: 36, color: \"bg-gradient-to-t from-blue-500 to-blue-400\" },\n                    { period: \"1年～2年以内\", amount: 220, color: \"bg-gradient-to-t from-yellow-500 to-yellow-400\", highlight: true },\n                    { period: \"2年～3年以内\", amount: 300, color: \"bg-gradient-to-t from-purple-600 to-purple-500\" }\n                ],\n                note: \"※2025年8月 GFS全生徒へのアンケートをもとに集計（回答者数：1,108名）\"\n            },\n            pieChart: {\n                title: \"GFS生徒の過半数が投資初心者\",\n                data: [\n                    { label: \"投資初心者\", percentage: 66, color: \"#1e3a8a\" },\n                    { label: \"投資経験者\", percentage: 34, color: \"#60a5fa\" }\n                ]\n            }\n        },\n        {\n            type: \"custom\",\n            title: \"充実のカリキュラム\",\n            icon: BookOpen,\n            color: \"from-blue-500 to-indigo-600\",\n            characterImage: \"/slides/character_reading.png\",\n            content: {\n                heading: \"2,000以上の講義が視聴し放題\",\n                subheading: \"基礎から応用まで、正しい順序で学べる環境\",\n                points: [\n                    \"投資の基礎知識から実践的なテクニックまで\",\n                    \"株式・FX・仮想通貨など幅広い分野をカバー\",\n                    \"いつでもどこでも、自分のペースで学習可能\",\n                    \"1日15分からでOK、隙間時間を有効活用\"\n                ]\n            }\n        },\n        {\n            type: \"custom\",\n            title: \"手厚いサポート体制\",\n            icon: MessageCircle,\n            color: \"from-emerald-500 to-teal-500\",\n            characterImage: \"/slides/character_cheerleader.png\",\n            characterImage2: \"/slides/character_cheerleader2.png\",\n            content: {\n                heading: \"専任コンサルタントが全力サポート\",\n                subheading: \"一人で悩まない、仲間がいる環境\",\n                points: [\n                    \"専任コンサルタントへの相談が可能\",\n                    \"講師や投資仲間と交流できる掲示板\",\n                    \"わからないことはいつでも質問OK\",\n                    \"同じ目標を持つ仲間と切磋琢磨\"\n                ]\n            }\n        },\n        {\n            type: \"learning_method_comparison\",\n            title: \"学習の方法\",\n            subtitle: \"体系的なカリキュラムを用意しています！\",\n            selfStudy: {\n                title: \"独学の場合\",\n                problems: [\n                    \"Aさんは○○と言っている\",\n                    \"Bさんは△△と言っている\",\n                    \"Cさんは□□と言っている\"\n                ],\n                pathType: \"curved\"\n            },\n            gfsMethod: {\n                title: \"GFSの場合\",\n                subtitle: \"未経験者でも3ヶ月で投資ができる体系的学習プログラムを提供\",\n                programs: [\n                    \"スタート\\nダッシュ面談\",\n                    \"ゴール設定\",\n                    \"価値分析\\n＆\\n心理分析\",\n                    \"口座開設\"\n                ],\n                pathType: \"straight\"\n            }\n        }\n    ];\n\n    useEffect(() => {\n        if (isAutoPlaying) {\n            const timer = setInterval(() => {\n                setCurrentSlide((prev) => (prev + 1) % slides.length);\n            }, 5000);\n            return () => clearInterval(timer);\n        }\n    }, [isAutoPlaying, slides.length]);\n\n    const renderSlide = (slide: any) => {\n        // 会社情報スライド（カスタムデザイン）\n        if (slide.type === \"company_info\") {\n            if (isFullScreen) {\n                return (\n                    <div className=\"h-full w-full bg-gradient-to-br from-blue-700 via-blue-900 to-black flex items-center justify-center relative overflow-hidden p-0\">\n                        {/* 背景の巨大なぼかし */}\n                        <div className=\"absolute top-0 left-0 w-[80vw] h-[80vw] bg-blue-500/20 rounded-full blur-[150px] -translate-x-1/2 -translate-y-1/2\"></div>\n                        <div className=\"absolute bottom-0 right-0 w-[60vw] h-[60vw] bg-cyan-500/20 rounded-full blur-[150px] translate-x-1/2 translate-y-1/2\"></div>\n\n                        <div className=\"relative z-10 w-full px-12 text-center animate-fade-in\">\n                            <h3 className=\"font-black text-white leading-tight mb-20 text-[10vw] drop-shadow-[0_20px_50px_rgba(0,0,0,0.5)]\">\n                                株式会社GFS Education\n                            </h3>\n                            <div className=\"flex flex-col items-center gap-10\">\n                                <div className=\"bg-white/10 backdrop-blur-xl rounded-[4rem] p-24 border-4 border-white/20 shadow-2xl w-full max-w-none inline-block\">\n                                    <div className=\"space-y-16 text-white text-[5vw] font-black tracking-widest\">\n                                        <p className=\"opacity-70\">〒108-0023</p>\n                                        <p>東京都港区芝浦3-9-1</p>\n                                        <p>芝浦ルネサイトタワー 2F, 15F</p>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                );\n            }\n            return (\n                <div className={`h-full bg-gradient-to-br from-sky-100 via-blue-200 to-cyan-100 flex items-center relative overflow-hidden transition-all duration-700 p-8 md:p-12`}>\n                    {/* 背景装飾 */}\n                    <div className=\"absolute inset-0 opacity-10\">\n                        <Image\n                            src=\"/slides/office_building.jpg\"\n                            alt=\"\"\n                            fill\n                            className=\"object-cover\"\n                        />\n                    </div>\n\n                    <div className={`relative z-10 w-full grid grid-cols-1 md:grid-cols-2 gap-12 items-center mx-auto transition-all duration-700 max-w-6xl gap-12`}>\n                        {/* 左側: 会社情報 */}\n                        <div className=\"text-gray-800\">\n                            {/* アイコンとタイトル */}\n                            <div className={`flex items-center gap-3 transition-all mb-6`}>\n                                <Building2 className={`text-blue-600 transition-all w-10 h-10 md:w-12 md:h-12`} />\n                                <h2 className={`font-bold text-blue-900 transition-all text-2xl md:text-3xl`}>講座の運営元</h2>\n                            </div>\n\n                            {/* 会社名 */}\n                            <div className={`transition-all mb-6`}>\n                                <h3 className={`font-black bg-gradient-to-r from-blue-700 to-cyan-600 bg-clip-text text-transparent transition-all text-3xl md:text-4xl mb-4`}>\n                                    株式会社GFS Education\n                                </h3>\n                            </div>\n\n                            {/* 住所情報 */}\n                            <div className={`bg-white/80 backdrop-blur-sm rounded-3xl border-2 border-blue-300 shadow-lg transition-all p-6 mb-6`}>\n                                <div className={`space-y-8 transition-all text-base md:text-lg`}>\n                                    <p className=\"text-blue-700 font-extrabold whitespace-nowrap\">〒108-0023</p>\n                                    <p className=\"font-extrabold text-gray-800\">東京都港区芝浦3-9-1</p>\n                                    <p className=\"font-extrabold text-gray-800\">芝浦ルネサイトタワー 2F, 15F</p>\n                                </div>\n                            </div>\n\n                            {/* 会社の外観コンテナ */}\n                            <button\n                                onClick={() => setShowExteriorOverlay(true)}\n                                className=\"w-full bg-white/80 backdrop-blur-sm rounded-2xl p-4 border-2 border-blue-300 shadow-lg hover:bg-blue-50/80 transition-all duration-300 group cursor-pointer text-left\"\n                            >\n                                <div className=\"flex items-center gap-4\">\n                                    <div className=\"relative w-32 h-24 rounded-lg overflow-hidden shadow-md flex-shrink-0\">\n                                        <Image\n                                            src=\"/images/company_exterior.jpg\"\n                                            alt=\"会社の外観\"\n                                            fill\n                                            className=\"object-cover group-hover:scale-110 transition-transform duration-500\"\n                                        />\n                                        <div className=\"absolute inset-0 bg-blue-600/10 group-hover:bg-transparent transition-colors\"></div>\n                                    </div>\n                                    <div className=\"flex-1\">\n                                        <p className=\"text-xl md:text-2xl font-black text-blue-900 mb-1 flex items-center gap-2\">\n                                            会社の外観\n                                            <Sparkles className=\"w-4 h-4 text-amber-500 opacity-0 group-hover:opacity-100 transition-opacity\" />\n                                        </p>\n                                        <p className=\"text-sm md:text-base text-blue-700 font-bold group-hover:translate-x-1 transition-transform inline-flex items-center gap-1\">\n                                            タップして大きな写真を見る\n                                            <ArrowRight className=\"w-4 h-4\" />\n                                        </p>\n                                    </div>\n                                </div>\n                            </button>\n                        </div>\n\n                        {/* 右側: CMキャラクター画像 */}\n                        <div className=\"flex items-center justify-center\">\n                            <div className={`relative w-full aspect-[4/3] rounded-3xl overflow-hidden shadow-2xl border-4 border-white transition-all duration-700 max-w-md`}>\n                                <Image\n                                    src=\"/slides/cm_character.png\"\n                                    alt=\"GFSイメージキャラクター 藤本美貴さん\"\n                                    fill\n                                    className=\"object-cover\"\n                                />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n\n        // CM動画再生スライド\n        if (slide.type === \"cm_videos\") {\n            return (\n                <div className={`h-full bg-gradient-to-br from-blue-50 via-sky-100 to-cyan-50 flex flex-col relative overflow-y-auto transition-all duration-700 ${isFullScreen ? \"p-4 md:p-12\" : \"p-6 md:p-8\"}`}>\n                    {/* 背景装飾 */}\n                    <div className=\"absolute inset-0 opacity-5\">\n                        <div className=\"absolute top-10 left-10 w-32 h-32 bg-blue-400 rounded-full blur-3xl\"></div>\n                        <div className=\"absolute bottom-10 right-10 w-40 h-40 bg-cyan-400 rounded-full blur-3xl\"></div>\n                    </div>\n\n                    <div className={`relative z-10 w-full mx-auto transition-all duration-700 ${isFullScreen ? \"max-w-[98%]\" : \"max-w-6xl\"}`}>\n                        {/* ヘッダー */}\n                        <div className={`text-center transition-all ${isFullScreen ? \"mb-12\" : \"mb-8\"}`}>\n                            <h2 className={`font-black text-blue-900 transition-all ${isFullScreen ? \"text-5xl md:text-6xl mb-6\" : \"text-3xl md:text-4xl mb-3\"}`}>\n                                {slide.title}\n                            </h2>\n                            <p className={`font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent transition-all ${isFullScreen ? \"text-3xl md:text-4xl\" : \"text-xl md:text-2xl\"}`}>\n                                {slide.description}\n                            </p>\n                        </div>\n\n                        <div className={`grid grid-cols-1 gap-12 transition-all ${isFullScreen ? \"md:grid-cols-6\" : \"md:grid-cols-4\"}`}>\n                            {/* 左側: 動画サムネイル */}\n                            <div className={`space-y-6 transition-all ${isFullScreen ? \"md:col-span-1\" : \"md:col-span-1\"}`}>\n                                {slide.videos?.map((video: { src: string; title: string }, index: number) => (\n                                    <button\n                                        key={index}\n                                        onClick={() => {\n                                            setSelectedVideoIndex(index);\n                                            setIsVideoPlaying(false);\n                                        }}\n                                        className={`w-full rounded-2xl overflow-hidden transition-all duration-300 ${selectedVideoIndex === index\n                                            ? \"ring-8 ring-blue-500 shadow-2xl scale-105\"\n                                            : \"ring-2 ring-gray-300 hover:ring-blue-400 hover:scale-102\"\n                                            }`}\n                                    >\n                                        <div className=\"relative aspect-video bg-gradient-to-br from-blue-200 to-cyan-200\">\n                                            <video\n                                                src={video.src}\n                                                className=\"w-full h-full object-cover\"\n                                                preload=\"metadata\"\n                                            />\n                                            <div className=\"absolute inset-0 bg-black/20 flex items-center justify-center\">\n                                                <div className={`bg-white/90 rounded-full transition-all ${isFullScreen ? \"p-6\" : \"p-3\"}`}>\n                                                    <svg className={`${isFullScreen ? \"w-12 h-12\" : \"w-6 h-6\"} text-blue-600`} fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                                        <path d=\"M8 5v14l11-7z\" />\n                                                    </svg>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div className={`bg-white text-center border-t-2 border-blue-200 transition-all ${isFullScreen ? \"p-6\" : \"p-3\"}`}>\n                                            <p className={`font-serif font-black text-blue-900 tracking-wide transition-all ${isFullScreen ? \"text-2xl\" : \"text-sm\"}`} style={{ letterSpacing: '0.1em' }}>{video.title}</p>\n                                        </div>\n                                    </button>\n                                ))}\n                            </div>\n\n                            {/* 右側: メイン動画プレーヤー */}\n                            <div className={`transition-all ${isFullScreen ? \"md:col-span-5\" : \"md:col-span-3\"}`}>\n                                <div className={`bg-white rounded-[3rem] shadow-2xl overflow-hidden border-4 border-blue-200 transition-all ${isFullScreen ? \"scale-125 shadow-[0_0_150px_rgba(59,130,246,0.6)] border-[16px] my-10\" : \"\"}`}>\n                                    <div className=\"relative aspect-video bg-black\">\n                                        <video\n                                            key={selectedVideoIndex}\n                                            src={slide.videos?.[selectedVideoIndex].src}\n                                            controls\n                                            autoPlay={isVideoPlaying}\n                                            className=\"w-full h-full\"\n                                            onPlay={() => setIsVideoPlaying(true)}\n                                            onPause={() => setIsVideoPlaying(false)}\n                                        >\n                                            お使いのブラウザは動画タグをサポートしていません。\n                                        </video>\n                                    </div>\n                                    <div className={`bg-white text-center border-t-4 border-blue-300 transition-all ${isFullScreen ? \"p-12\" : \"p-6\"}`}>\n                                        <p className={`font-serif font-black text-blue-900 transition-all ${isFullScreen ? \"text-6xl md:text-8xl py-6\" : \"text-2xl\"}`} style={{ letterSpacing: '0.15em' }}>\n                                            {slide.videos?.[selectedVideoIndex].title}\n                                        </p>\n                                    </div>\n                                </div>\n\n                                {/* 累計受講者数 */}\n                                <div className=\"mt-6 bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 rounded-3xl p-8 border-4 border-amber-400 shadow-2xl text-center relative overflow-hidden\">\n                                    <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-amber-500/10 to-transparent animate-shimmer\"></div>\n\n                                    {/* 月桂樹の装飾 - 左上 */}\n                                    <div className=\"absolute left-4 top-4\">\n                                        <svg className=\"w-16 h-16 text-amber-400 opacity-70\" viewBox=\"0 0 40 40\" fill=\"currentColor\">\n                                            <path d=\"M20 5 Q15 10, 17 15 Q12 20, 14 25 Q10 28, 12 32\" stroke=\"currentColor\" strokeWidth=\"2.5\" fill=\"none\" />\n                                            <ellipse cx=\"17\" cy=\"10\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 17 10)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"14\" cy=\"18\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-25 14 18)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"12\" cy=\"26\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 12 26)\" opacity=\"0.9\" />\n                                        </svg>\n                                    </div>\n\n                                    {/* 月桂樹の装飾 - 右上 */}\n                                    <div className=\"absolute right-4 top-4\">\n                                        <svg className=\"w-16 h-16 text-amber-400 opacity-70\" viewBox=\"0 0 40 40\" fill=\"currentColor\">\n                                            <path d=\"M20 5 Q25 10, 23 15 Q28 20, 26 25 Q30 28, 28 32\" stroke=\"currentColor\" strokeWidth=\"2.5\" fill=\"none\" />\n                                            <ellipse cx=\"23\" cy=\"10\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 23 10)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"26\" cy=\"18\" rx=\"4\" ry=\"2.5\" transform=\"rotate(25 26 18)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"28\" cy=\"26\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 28 26)\" opacity=\"0.9\" />\n                                        </svg>\n                                    </div>\n\n                                    {/* 月桂樹の装飾 - 左側 */}\n                                    <div className=\"absolute left-4 top-1/2 -translate-y-1/2\">\n                                        <svg className=\"w-12 h-24 text-amber-400 opacity-70\" viewBox=\"0 0 30 60\" fill=\"currentColor\">\n                                            <path d=\"M15 5 Q10 10, 12 15 Q7 20, 9 25 Q5 30, 7 35 Q3 40, 5 45 Q1 50, 3 55\" stroke=\"currentColor\" strokeWidth=\"2.5\" fill=\"none\" />\n                                            <ellipse cx=\"12\" cy=\"10\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 12 10)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"9\" cy=\"18\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-25 9 18)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"7\" cy=\"26\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 7 26)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"5\" cy=\"34\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-25 5 34)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"3\" cy=\"42\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 3 42)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"1\" cy=\"50\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-25 1 50)\" opacity=\"0.9\" />\n                                        </svg>\n                                    </div>\n\n                                    {/* 月桂樹の装飾 - 右側 */}\n                                    <div className=\"absolute right-4 top-1/2 -translate-y-1/2\">\n                                        <svg className=\"w-12 h-24 text-amber-400 opacity-70\" viewBox=\"0 0 30 60\" fill=\"currentColor\">\n                                            <path d=\"M15 5 Q20 10, 18 15 Q23 20, 21 25 Q25 30, 23 35 Q27 40, 25 45 Q29 50, 27 55\" stroke=\"currentColor\" strokeWidth=\"2.5\" fill=\"none\" />\n                                            <ellipse cx=\"18\" cy=\"10\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 18 10)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"21\" cy=\"18\" rx=\"4\" ry=\"2.5\" transform=\"rotate(25 21 18)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"23\" cy=\"26\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 23 26)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"25\" cy=\"34\" rx=\"4\" ry=\"2.5\" transform=\"rotate(25 25 34)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"27\" cy=\"42\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 27 42)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"29\" cy=\"50\" rx=\"4\" ry=\"2.5\" transform=\"rotate(25 29 50)\" opacity=\"0.9\" />\n                                        </svg>\n                                    </div>\n\n                                    {/* 月桂樹の装飾 - 左下 */}\n                                    <div className=\"absolute left-4 bottom-4\">\n                                        <svg className=\"w-16 h-16 text-amber-400 opacity-70\" viewBox=\"0 0 40 40\" fill=\"currentColor\">\n                                            <path d=\"M12 8 Q10 13, 12 18 Q7 23, 9 28 Q5 33, 8 38\" stroke=\"currentColor\" strokeWidth=\"2.5\" fill=\"none\" />\n                                            <ellipse cx=\"12\" cy=\"14\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 12 14)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"9\" cy=\"22\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-25 9 22)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"8\" cy=\"30\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 8 30)\" opacity=\"0.9\" />\n                                        </svg>\n                                    </div>\n\n                                    {/* 月桂樹の装飾 - 右下 */}\n                                    <div className=\"absolute right-4 bottom-4\">\n                                        <svg className=\"w-16 h-16 text-amber-400 opacity-70\" viewBox=\"0 0 40 40\" fill=\"currentColor\">\n                                            <path d=\"M28 8 Q30 13, 28 18 Q33 23, 31 28 Q35 33, 32 38\" stroke=\"currentColor\" strokeWidth=\"2.5\" fill=\"none\" />\n                                            <ellipse cx=\"28\" cy=\"14\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 28 14)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"31\" cy=\"22\" rx=\"4\" ry=\"2.5\" transform=\"rotate(25 31 22)\" opacity=\"0.9\" />\n                                            <ellipse cx=\"32\" cy=\"30\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 32 30)\" opacity=\"0.9\" />\n                                        </svg>\n                                    </div>\n\n                                    <p className=\"text-3xl md:text-4xl font-black relative z-10\">\n                                        <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-amber-400 via-yellow-300 to-amber-400\">累計登録者数</span>\n                                        {' '}\n                                        <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 via-amber-300 to-yellow-300 text-4xl md:text-5xl\">50万人</span>\n                                        {' '}\n                                        <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-amber-400 via-yellow-300 to-amber-400\">突破！</span>\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n\n        // No.1実績スライド\n        if (slide.type === \"no1_achievements\") {\n            return (\n                <div className={`h-full bg-gradient-to-br from-blue-50 via-indigo-100 to-blue-50 flex flex-col relative overflow-y-auto transition-all duration-700 ${isFullScreen ? \"p-4 md:p-10\" : \"p-6 md:p-8\"}`}>\n                    {/* 背景装飾 */}\n                    <div className=\"absolute inset-0 opacity-5\">\n                        <div className=\"absolute top-20 left-20 w-40 h-40 bg-indigo-400 rounded-full blur-3xl\"></div>\n                        <div className=\"absolute bottom-20 right-20 w-48 h-48 bg-blue-400 rounded-full blur-3xl\"></div>\n                    </div>\n\n                    <div className={`relative z-10 w-full mx-auto transition-all duration-700 ${isFullScreen ? \"max-w-none px-12\" : \"max-w-6xl\"}`}>\n                        {/* ヘッダー */}\n                        <div className={`text-center transition-all ${isFullScreen ? \"mb-32\" : \"mb-8\"}`}>\n                            <h2 className={`font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-700 via-indigo-600 to-blue-700 transition-all ${isFullScreen ? \"text-8xl md:text-[12rem] mb-16\" : \"text-3xl md:text-5xl mb-3\"}`}>\n                                {slide.title}\n                            </h2>\n                            <p className={`text-gray-700 font-black transition-all ${isFullScreen ? \"text-5xl md:text-8xl\" : \"text-lg md:text-xl\"}`}>\n                                {slide.description}\n                            </p>\n                        </div>\n\n                        {/* 3つのNo.1バッジ */}\n                        <div className={`grid grid-cols-1 md:grid-cols-3 mx-auto transition-all ${isFullScreen ? \"gap-24 mb-24 max-w-[95%]\" : \"gap-8 mb-8 max-w-4xl\"}`}>\n                            {slide.achievements?.map((achievement: { label: string; rank: string }, index: number) => (\n                                <div\n                                    key={index}\n                                    className=\"group relative\"\n                                >\n                                    {/* 外側のグロー効果 */}\n                                    <div className=\"absolute -inset-4 bg-gradient-to-r from-amber-400/20 via-yellow-300/20 to-amber-400/20 rounded-full blur-xl group-hover:blur-2xl transition-all duration-300\"></div>\n\n                                    {/* メインバッジ */}\n                                    <div\n                                        className={`relative bg-gradient-to-br from-blue-900 via-indigo-900 to-blue-950 rounded-full aspect-square flex flex-col items-center justify-center transition-all duration-300 hover:scale-105 hover:shadow-2xl border-double border-amber-400 ${isFullScreen ? \"p-48 border-[32px] scale-[2.0]\" : \"p-6 border-8\"}`}\n                                        style={{\n                                            boxShadow: isFullScreen\n                                                ? \"0 0 150px rgba(251, 191, 36, 0.8), inset 0 0 80px rgba(251, 191, 36, 0.5)\"\n                                                : \"0 0 40px rgba(251, 191, 36, 0.4), inset 0 0 20px rgba(251, 191, 36, 0.1)\"\n                                        }}\n                                    >\n                                        {/* 王冠アイコン */}\n                                        <div className={`absolute bg-gradient-to-br from-amber-300 to-amber-500 rounded-full shadow-xl border-amber-200 transition-all ${isFullScreen ? \"-top-12 p-6 border-8\" : \"-top-8 p-4 border-4\"}`}>\n                                            <svg className={`${isFullScreen ? \"w-10 h-10\" : \"w-6 h-6\"} text-amber-900`} fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                                <path d=\"M12 2L15 8L22 9L17 14L18 21L12 18L6 21L7 14L2 9L9 8L12 2Z\" />\n                                            </svg>\n                                        </div>\n\n                                        {/* 月桂樹の装飾 - 左側 */}\n                                        <div className={`absolute top-1/2 -translate-y-1/2 transition-all ${isFullScreen ? \"-left-12 scale-150\" : \"left-1\"}`}>\n                                            <svg className=\"w-10 h-20 text-amber-400 opacity-70\" viewBox=\"0 0 30 60\" fill=\"currentColor\">\n                                                <path d=\"M15 5 Q10 10, 12 15 Q7 20, 9 25 Q5 30, 7 35 Q3 40, 5 45 Q1 50, 3 55\" stroke=\"currentColor\" strokeWidth=\"2.5\" fill=\"none\" />\n                                                <ellipse cx=\"12\" cy=\"10\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 12 10)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"9\" cy=\"18\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-25 9 18)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"7\" cy=\"26\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 7 26)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"5\" cy=\"34\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-25 5 34)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"3\" cy=\"42\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-35 3 42)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"1\" cy=\"50\" rx=\"4\" ry=\"2.5\" transform=\"rotate(-25 1 50)\" opacity=\"0.9\" />\n                                            </svg>\n                                        </div>\n\n                                        {/* 月桂樹の装飾 - 右側 */}\n                                        <div className={`absolute top-1/2 -translate-y-1/2 transition-all ${isFullScreen ? \"-right-12 scale-150\" : \"right-1\"}`}>\n                                            <svg className=\"w-10 h-20 text-amber-400 opacity-70\" viewBox=\"0 0 30 60\" fill=\"currentColor\">\n                                                <path d=\"M15 5 Q20 10, 18 15 Q23 20, 21 25 Q25 30, 23 35 Q27 40, 25 45 Q29 50, 27 55\" stroke=\"currentColor\" strokeWidth=\"2.5\" fill=\"none\" />\n                                                <ellipse cx=\"18\" cy=\"10\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 18 10)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"21\" cy=\"18\" rx=\"4\" ry=\"2.5\" transform=\"rotate(25 21 18)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"23\" cy=\"26\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 23 26)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"25\" cy=\"34\" rx=\"4\" ry=\"2.5\" transform=\"rotate(25 25 34)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"27\" cy=\"42\" rx=\"4\" ry=\"2.5\" transform=\"rotate(35 27 42)\" opacity=\"0.9\" />\n                                                <ellipse cx=\"29\" cy=\"50\" rx=\"4\" ry=\"2.5\" transform=\"rotate(25 29 50)\" opacity=\"0.9\" />\n                                            </svg>\n                                        </div>\n\n                                        {/* コンテンツ */}\n                                        <div className=\"text-center relative z-10\">\n                                            <p className={`text-amber-100 font-bold drop-shadow-lg tracking-wide transition-all ${isFullScreen ? \"text-6xl md:text-8xl mb-16\" : \"text-xl md:text-2xl mb-2\"}`}>\n                                                {achievement.label}\n                                            </p>\n                                            <p className={`text-amber-300 font-black tracking-wider drop-shadow-2xl transition-all ${isFullScreen ? \"text-9xl md:text-[12rem]\" : \"text-4xl md:text-5xl\"}`} style={{ letterSpacing: '0.05em' }}>\n                                                {achievement.rank}\n                                            </p>\n                                        </div>\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n\n                        {/* 東京商工リサーチのテキスト */}\n                        <div className={`bg-white/80 backdrop-blur-sm rounded-3xl border-2 border-indigo-300 shadow-lg text-center transition-all ${isFullScreen ? \"p-10 mb-10\" : \"p-6 mb-6\"}`}>\n                            <p className={`text-gray-800 font-bold transition-all ${isFullScreen ? \"text-2xl md:text-3xl\" : \"text-lg md:text-xl\"}`}>\n                                東京商工リサーチ調べで、オンライン投資スクールとして<br />\n                                <span className={`text-indigo-700 font-black transition-all ${isFullScreen ? \"text-3xl md:text-4xl\" : \"\"}`}>3つの分野で1位</span>を獲得しています\n                            </p>\n                        </div>\n\n                        {/* 受講者数 */}\n                        <div className={`bg-gradient-to-r from-indigo-600 via-blue-600 to-indigo-600 rounded-3xl shadow-2xl border-4 border-amber-400 text-center transition-all ${isFullScreen ? \"p-12 mb-10\" : \"p-8\"}`}>\n                            <p className={`text-white font-bold transition-all ${isFullScreen ? \"text-3xl md:text-4xl mb-4\" : \"text-2xl md:text-3xl mb-2\"}`}>\n                                現役生徒数\n                            </p>\n                            <p className={`text-amber-300 font-black transition-all ${isFullScreen ? \"text-7xl md:text-8xl mb-4\" : \"text-5xl md:text-6xl mb-2\"}`}>\n                                {slide.students}\n                            </p>\n                            <p className={`text-white font-black transition-all ${isFullScreen ? \"text-5xl md:text-6xl mb-6\" : \"text-4xl md:text-5xl mb-3\"}`}>\n                                を突破！\n                            </p>\n                            <p className={`text-amber-200 font-bold transition-all ${isFullScreen ? \"text-xl md:text-2xl\" : \"text-base md:text-lg\"}`}>\n                                {slide.note}\n                            </p>\n                        </div>\n\n                        {/* マスコット画像追加 */}\n                        <div className=\"absolute bottom-10 right-10 pointer-events-none opacity-20\">\n                            <Image src=\"/mascot/mascot_happy.png\" alt=\"\" width={isPreview ? 120 : 200} height={isPreview ? 120 : 200} className=\"animate-float\" />\n                        </div>\n                        <div className=\"absolute top-40 left-10 pointer-events-none opacity-10\">\n                            <Image src=\"/mascot/mascot_cheer_blue.png\" alt=\"\" width={isPreview ? 80 : 150} height={isPreview ? 80 : 150} className=\"animate-float-slow\" />\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n\n        // 生徒実績スライド\n        if (slide.type === \"student_achievements\") {\n            const maxAmount = Math.max(...(slide.barChart?.data.map((d: { amount: number }) => d.amount) || [300]));\n\n            return (\n                <div className={`h-full bg-gradient-to-br from-blue-50 via-indigo-50 to-blue-50 flex flex-col relative overflow-y-auto transition-all duration-700 ${isFullScreen ? \"p-4 md:p-8\" : \"p-6 md:p-8\"}`}>\n                    {/* 背景装飾 */}\n                    <div className=\"absolute top-10 right-10 pointer-events-none opacity-10\">\n                        <Image src=\"/mascot/mascot_thinking.png\" alt=\"\" width={180} height={180} className=\"animate-float-slow\" />\n                    </div>\n                    <div className=\"absolute bottom-20 left-10 pointer-events-none opacity-10\">\n                        <Image src=\"/mascot/mascot_happy.png\" alt=\"\" width={150} height={150} className=\"animate-bounce-gentle\" />\n                    </div>\n                    {/* 背景装飾 */}\n                    <div className=\"absolute inset-0 opacity-5\">\n                        <div className=\"absolute top-20 right-20 w-40 h-40 bg-pink-400 rounded-full blur-3xl\"></div>\n                        <div className=\"absolute bottom-20 left-20 w-48 h-48 bg-blue-400 rounded-full blur-3xl\"></div>\n                    </div>\n\n                    <div className={`relative z-10 w-full mx-auto transition-all duration-700 ${isFullScreen ? \"max-w-[98%]\" : \"max-w-6xl\"}`}>\n                        {/* ヘッダー */}\n                        <div className={`text-center transition-all ${isFullScreen ? \"mb-10\" : \"mb-6\"}`}>\n                            <h2 className={`font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-700 via-indigo-600 to-blue-700 transition-all ${isFullScreen ? \"text-5xl md:text-6xl mb-6\" : \"text-3xl md:text-4xl mb-3\"}`}>\n                                {slide.title}\n                            </h2>\n                            <p className={`text-gray-700 font-bold bg-blue-900 text-white rounded-xl inline-block transition-all ${isFullScreen ? \"text-xl md:text-2xl px-10 py-5\" : \"text-base md:text-lg px-6 py-3\"}`}>\n                                {slide.description}\n                            </p>\n                        </div>\n\n                        {/* 2カラムレイアウト */}\n                        <div className={`grid grid-cols-1 gap-6 transition-all ${isFullScreen ? \"lg:grid-cols-2 gap-12\" : \"lg:grid-cols-2\"}`}>\n                            {/* 左: 円グラフ */}\n                            <div className={`bg-white/90 backdrop-blur-sm rounded-3xl shadow-xl border-2 border-indigo-200 transition-all ${isFullScreen ? \"p-10\" : \"p-6\"}`}>\n                                <div className=\"text-center mb-6\">\n                                    <h3 className={`font-bold text-gray-800 transition-all ${isFullScreen ? \"text-2xl md:text-3xl\" : \"text-xl md:text-2xl\"}`}>\n                                        {slide.pieChart?.title}\n                                    </h3>\n                                </div>\n\n                                {/* 円グラフ */}\n                                <div className={`flex items-center justify-center relative transition-all ${isFullScreen ? \"pt-24 pb-16\" : \"pt-8\"}`}>\n                                    {/* ラベル */}\n                                    <div className={`absolute top-1/2 -translate-y-1/2 animate-fade-in-left z-10 transition-all ${isFullScreen ? \"-left-16\" : \"-left-8\"}`} style={{ animationDelay: '2s' }}>\n                                        <div className={`text-right bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl transition-all ${isFullScreen ? \"p-8 border-2 border-blue-100\" : \"p-6\"}`}>\n                                            <p className={`font-bold text-blue-400 transition-all ${isFullScreen ? \"text-4xl mb-4\" : \"text-2xl mb-2\"}`}>投資経験者</p>\n                                            <p className={`font-black text-blue-400 transition-all ${isFullScreen ? \"text-7xl md:text-9xl\" : \"text-5xl md:text-7xl\"}`}>34%</p>\n                                        </div>\n                                    </div>\n                                    <div className={`absolute top-1/2 -translate-y-1/2 animate-fade-in-right z-10 transition-all ${isFullScreen ? \"-right-16\" : \"-right-8\"}`} style={{ animationDelay: '1.2s' }}>\n                                        <div className={`text-left bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl transition-all ${isFullScreen ? \"p-8 border-2 border-blue-100\" : \"p-6\"}`}>\n                                            <p className={`font-bold text-blue-900 transition-all ${isFullScreen ? \"text-4xl mb-4\" : \"text-2xl mb-2\"}`}>投資初心者</p>\n                                            <p className={`font-black text-blue-900 transition-all ${isFullScreen ? \"text-7xl md:text-9xl\" : \"text-5xl md:text-7xl\"}`}>66%</p>\n                                        </div>\n                                    </div>\n\n                                    {/* SVG円グラフ */}\n                                    <svg className={`transition-all ${isFullScreen ? \"w-[800px] h-[800px] md:w-[1200px] md:h-[1200px]\" : \"w-64 h-64\"}`} viewBox=\"0 0 200 200\">\n                                        <circle cx=\"100\" cy=\"100\" r=\"70\" fill=\"none\" stroke=\"#60a5fa\" strokeWidth=\"50\" className=\"animate-fade-in-circle\" key={`bg-circle-${currentSlide}-${isFullScreen}`} />\n                                        <circle cx=\"100\" cy=\"100\" r=\"70\" fill=\"none\" stroke=\"#1e3a8a\" strokeWidth=\"55\" strokeDasharray=\"440\" strokeDashoffset=\"440\" transform=\"rotate(-90 100 100)\" className=\"animate-fill-pie\" key={`main-circle-${currentSlide}-${isFullScreen}`} />\n                                        <circle cx=\"100\" cy=\"100\" r=\"40\" fill=\"white\" className=\"animate-scale-center\" key={`center-circle-${currentSlide}-${isFullScreen}`} />\n                                    </svg>\n                                </div>\n                            </div>\n\n                            {/* 右: 棒グラフ */}\n                            <div className={`bg-white/90 backdrop-blur-sm rounded-3xl shadow-xl border-2 border-indigo-200 transition-all ${isFullScreen ? \"p-16 flex flex-col justify-center border-4\" : \"p-6\"}`}>\n                                <div className={`text-center transition-all ${isFullScreen ? \"mb-12\" : \"mb-4\"}`}>\n                                    <h3 className={`font-bold text-gray-800 transition-all ${isFullScreen ? \"text-4xl md:text-6xl mb-6\" : \"text-xl md:text-2xl mb-2\"}`}>\n                                        {slide.barChart?.title}\n                                    </h3>\n                                    <p className={`font-bold text-white bg-blue-900 rounded-lg inline-block transition-all ${isFullScreen ? \"text-3xl md:text-4xl px-10 py-5\" : \"text-sm md:text-base px-4 py-2\"}`}>\n                                        {slide.barChart?.subtitle}\n                                    </p>\n                                </div>\n\n                                {/* 棒グラフ */}\n                                <div className={`relative transition-all ${isFullScreen ? \"h-[650px] mb-12\" : \"h-80 mb-4\"}`}>\n                                    <div className=\"absolute inset-0 flex items-end justify-around px-4\">\n                                        {slide.barChart?.data.map((item: { amount: number; highlight?: boolean; color: string; period: string }, index: number) => (\n                                            <div key={index} className=\"flex flex-col items-center flex-1 mx-1 h-full\">\n                                                {/* 金額ラベル */}\n                                                <div className={`font-black mb-4 transition-all ${item.highlight ? 'text-red-600' : 'text-pink-600'} ${isFullScreen ? \"text-4xl md:text-6xl\" : \"text-base md:text-xl\"}`}>\n                                                    約{item.amount}万円\n                                                </div>\n\n                                                {/* 棒のコンテナ */}\n                                                <div className=\"flex-1 w-full flex items-end\">\n                                                    {/* 棒 */}\n                                                    <div\n                                                        key={`bar-${index}-${currentSlide}`}\n                                                        className={`w-full ${item.color} rounded-t-xl transition-all duration-1000 ease-out relative group hover:opacity-90 ${item.highlight ? 'scale-105 border-4 border-yellow-600' : ''}`}\n                                                        style={{\n                                                            height: `${(item.amount / maxAmount) * 100}%`,\n                                                            animation: `growUpSequence 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) ${index * 0.4}s both`,\n                                                            boxShadow: item.highlight ? '0 0 30px rgba(234, 179, 8, 0.8), 0 0 60px rgba(234, 179, 8, 0.4)' : '0 0 10px rgba(59, 130, 246, 0.3)',\n                                                            minHeight: '20px'\n                                                        }}\n                                                    >\n                                                        {/* ホバー時のグロー効果 */}\n                                                        <div className=\"absolute inset-0 bg-gradient-to-t from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-t-xl\"></div>\n                                                    </div>\n                                                </div>\n\n                                                {/* 期間ラベル */}\n                                                <div className={`mt-6 text-center transition-all ${isFullScreen ? \"scale-150\" : \"\"}`}>\n                                                    <div className=\"bg-blue-900 text-white px-4 py-2 rounded-xl text-sm font-bold whitespace-nowrap\">\n                                                        {item.period}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        ))}\n                                    </div>\n                                </div>\n\n                                {/* 注釈 */}\n                                <p className={`text-gray-600 text-center transition-all ${isFullScreen ? \"text-xl md:text-2xl mt-8\" : \"text-xs mt-2\"}`}>\n                                    {slide.barChart?.note}\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* アニメーション用のスタイル */}\n                    <style jsx>{`\n                        @keyframes growUp {\n                            0% {\n                                height: 0 !important;\n                                opacity: 0;\n                                transform: scaleY(0);\n                            }\n                            70% {\n                                transform: scaleY(1.05);\n                            }\n                            100% {\n                                opacity: 1;\n                                transform: scaleY(1);\n                            }\n                        }\n                        \n                        .animate-grow-bar {\n                            animation: growUp 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) both;\n                            transform-origin: bottom;\n                        }\n                        \n                        @keyframes scaleIn {\n                            0% {\n                                transform: scale(0) rotate(0deg);\n                                opacity: 0;\n                            }\n                            50% {\n                                transform: scale(1.1) rotate(180deg);\n                            }\n                            100% {\n                                transform: scale(1) rotate(360deg);\n                                opacity: 1;\n                            }\n                        }\n                        \n                        .animate-scale-in {\n                            animation: scaleIn 1s ease-out both;\n                        }\n                        \n                        @keyframes fadeInLeft {\n                            0% {\n                                opacity: 0;\n                                transform: translateX(-30px) translateY(-50%);\n                            }\n                            100% {\n                                opacity: 1;\n                                transform: translateX(0) translateY(-50%);\n                            }\n                        }\n                        \n                        .animate-fade-in-left {\n                            animation: fadeInLeft 0.8s ease-out both;\n                        }\n                        \n                        @keyframes fadeInRight {\n                            0% {\n                                opacity: 0;\n                                transform: translateX(30px) translateY(-50%);\n                            }\n                            100% {\n                                opacity: 1;\n                                transform: translateX(0) translateY(-50%);\n                            }\n                        }\n                        \n                        .animate-fade-in-right {\n                            animation: fadeInRight 0.8s ease-out both;\n                        }\n                        \n                        @keyframes fadeInCircle {\n                            0% {\n                                opacity: 0;\n                                transform: scale(0.8);\n                            }\n                            100% {\n                                opacity: 1;\n                                transform: scale(1);\n                            }\n                        }\n                        \n                        .animate-fade-in-circle {\n                            animation: fadeInCircle 0.6s ease-out both;\n                        }\n                        \n                        @keyframes fillPie {\n                            0% {\n                                stroke-dashoffset: 440;\n                                opacity: 0;\n                            }\n                            10% {\n                                opacity: 1;\n                            }\n                            100% {\n                                stroke-dashoffset: ${440 - 66 * 4.4};\n                                opacity: 1;\n                            }\n                        }\n                        \n                        .animate-fill-pie {\n                            animation: fillPie 2s cubic-bezier(0.4, 0, 0.2, 1) 0.6s both;\n                        }\n                        \n                        @keyframes scaleCenter {\n                            0% {\n                                transform: scale(0);\n                                opacity: 0;\n                            }\n                            50% {\n                                transform: scale(0);\n                                opacity: 0;\n                            }\n                            100% {\n                                transform: scale(1);\n                                opacity: 1;\n                            }\n                        }\n                        \n                        .animate-scale-center {\n                            animation: scaleCenter 2s ease-out both;\n                        }\n                        \n                        @keyframes growUpSequence {\n                            0% {\n                                height: 0 !important;\n                                opacity: 0;\n                                transform: scaleY(0);\n                            }\n                            70% {\n                                transform: scaleY(1.08);\n                            }\n                            100% {\n                                opacity: 1;\n                                transform: scaleY(1);\n                            }\n                        }\n                    `}</style>\n                </div>\n            );\n        }\n\n        if (slide.type === \"learning_method_comparison\") {\n            return (\n                <div className={`relative h-full flex flex-col bg-white overflow-y-auto scroll-smooth transition-all duration-700 ${isFullScreen ? \"p-4 md:p-8\" : \"p-8\"}`} style={{ willChange: 'scroll-position' }}>\n                    {/* タイトルとサブタイトル */}\n                    <div className={`text-center animate-fade-in-down transition-all ${isFullScreen ? \"mb-12\" : \"mb-8\"}`}>\n                        <h2 className={`font-black text-gray-900 transition-all ${isFullScreen ? \"text-5xl md:text-8xl mb-8\" : \"text-3xl md:text-5xl mb-3\"}`}>\n                            {slide.title}\n                        </h2>\n                        <p className={`font-bold text-blue-600 transition-all ${isFullScreen ? \"text-3xl md:text-5xl\" : \"text-lg md:text-2xl\"}`}>\n                            {slide.subtitle}\n                        </p>\n                    </div>\n\n                    {/* 2カラム比較レイアウト */}\n                    <div className={`grid grid-cols-1 mx-auto w-full flex-1 transition-all ${isFullScreen ? \"lg:grid-cols-2 gap-20 max-w-[98%]\" : \"lg:grid-cols-2 gap-8 max-w-7xl\"}`}>\n                        {/* 左側: 独学の場合 */}\n                        <div className={`bg-white rounded-[4rem] shadow-2xl border-4 border-gray-200 animate-slide-in-left flex flex-col transition-all ${isFullScreen ? \"p-16 md:p-24\" : \"p-6 md:p-8\"}`}>\n                            {/* タイトル */}\n                            <div className={`bg-gray-600 text-white text-center rounded-3xl shadow-xl transition-all ${isFullScreen ? \"py-12 mb-20\" : \"py-4 mb-6\"}`}>\n                                <h3 className={`font-black transition-all ${isFullScreen ? \"text-6xl md:text-8xl\" : \"text-2xl md:text-3xl\"}`}>{slide.selfStudy?.title}</h3>\n                            </div>\n\n                            {/* 困っている人のイラスト */}\n                            <div className={`text-center animate-bounce-slow transition-all ${isFullScreen ? \"mb-32\" : \"mb-6\"}`}>\n                                <div className={`relative mx-auto transition-all ${isFullScreen ? \"w-[1200px] h-[1000px] md:w-[1600px] md:h-[1400px]\" : \"w-48 h-48 md:w-56 md:h-56\"}`}>\n                                    <Image\n                                        src=\"/slides/confused_person_v2.png\"\n                                        alt=\"困っている人\"\n                                        fill\n                                        className=\"object-contain\"\n                                    />\n                                </div>\n                                <p className={`text-gray-600 font-black mt-20 transition-all ${isFullScreen ? \"text-[10rem]\" : \"text-lg\"}`}>情報が混乱...</p>\n                            </div>\n\n                            {/* フラフラ曲線と問題点の統合ビジュアル */}\n                            <div className={`relative flex-1 flex items-center justify-center transition-all ${isFullScreen ? \"min-h-[800px]\" : \"min-h-[500px]\"}`}>\n                                <svg viewBox=\"0 0 400 600\" className={`w-full h-full mx-auto transition-all ${isFullScreen ? \"max-w-2xl\" : \"max-w-md\"}`}>\n                                    <defs>\n                                        <marker id=\"arrowhead-gray-vertical\" markerWidth=\"10\" markerHeight=\"10\"\n                                            refX=\"5\" refY=\"5\" orient=\"auto\">\n                                            <polygon points=\"0 0, 10 5, 0 10\" fill=\"#6b7280\" />\n                                        </marker>\n                                    </defs>\n\n                                    {/* フラフラ曲線 - 縦軸で大きく左右に揺れる */}\n                                    <path\n                                        d=\"M 200 50 \n                                           C 120 120, 120 150, 200 200\n                                           C 280 250, 280 280, 200 330\n                                           C 120 380, 120 410, 200 460\n                                           L 200 550\"\n                                        stroke=\"#6b7280\"\n                                        strokeWidth=\"5\"\n                                        fill=\"none\"\n                                        strokeDasharray=\"10,5\"\n                                        markerEnd=\"url(#arrowhead-gray-vertical)\"\n                                        className=\"animate-draw-path-vertical\"\n                                    />\n\n                                    {/* 現在ラベル */}\n                                    <text x=\"200\" y=\"35\" className=\"text-xl font-bold fill-gray-700\" textAnchor=\"middle\">現在</text>\n\n                                    {/* 理想ラベル */}\n                                    <text x=\"200\" y=\"585\" className=\"text-xl font-bold fill-gray-700\" textAnchor=\"middle\">理想</text>\n\n                                    {/* 問題点1 - 左側の屈曲部 */}\n                                    <g className=\"animate-fade-in-up\" style={{ animationDelay: '0.3s' }}>\n                                        <foreignObject x={isFullScreen ? \"-20\" : \"10\"} y=\"110\" width={isFullScreen ? \"250\" : \"150\"} height={isFullScreen ? \"150\" : \"80\"}>\n                                            <div className={`flex items-start bg-white rounded-2xl shadow-xl border-2 border-red-200 transition-all ${isFullScreen ? \"p-6 gap-4\" : \"p-3 gap-2\"}`}>\n                                                <span className={`text-red-500 flex-shrink-0 transition-all ${isFullScreen ? \"text-4xl\" : \"text-xl\"}`}>❌</span>\n                                                <p className={`text-gray-700 font-bold transition-all ${isFullScreen ? \"text-2xl\" : \"text-sm\"}`}>{slide.selfStudy?.problems[0]}</p>\n                                            </div>\n                                        </foreignObject>\n                                    </g>\n\n                                    {/* 問題点2 - 右側の屈曲部 */}\n                                    <g className=\"animate-fade-in-up\" style={{ animationDelay: '0.5s' }}>\n                                        <foreignObject x=\"240\" y=\"240\" width=\"150\" height=\"80\">\n                                            <div className=\"flex items-start gap-2 bg-white p-3 rounded-lg shadow-lg border-2 border-red-200\">\n                                                <span className=\"text-red-500 text-xl flex-shrink-0\">❌</span>\n                                                <p className=\"text-gray-700 font-medium text-sm\">{slide.selfStudy?.problems[1]}</p>\n                                            </div>\n                                        </foreignObject>\n                                    </g>\n\n                                    {/* 問題点3 - 左側の屈曲部 */}\n                                    <g className=\"animate-fade-in-up\" style={{ animationDelay: '0.7s' }}>\n                                        <foreignObject x=\"10\" y=\"370\" width=\"150\" height=\"80\">\n                                            <div className=\"flex items-start gap-2 bg-white p-3 rounded-lg shadow-lg border-2 border-red-200\">\n                                                <span className=\"text-red-500 text-xl flex-shrink-0\">❌</span>\n                                                <p className=\"text-gray-700 font-medium text-sm\">{slide.selfStudy?.problems[2]}</p>\n                                            </div>\n                                        </foreignObject>\n                                    </g>\n                                </svg>\n                            </div>\n\n                        </div>\n\n                        {/* 右側: GFSの場合 */}\n                        <div className={`bg-white rounded-[4rem] shadow-2xl border-4 border-blue-400 animate-slide-in-right flex flex-col transition-all ${isFullScreen ? \"p-16 md:p-24\" : \"p-6 md:p-8\"}`}>\n                            {/* タイトル */}\n                            <div className={`bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-center rounded-3xl shadow-xl transition-all ${isFullScreen ? \"py-12 mb-12\" : \"py-4 mb-4\"}`}>\n                                <h3 className={`font-black transition-all ${isFullScreen ? \"text-6xl md:text-8xl\" : \"text-2xl md:text-3xl\"}`}>{slide.gfsMethod?.title}</h3>\n                            </div>\n\n                            {/* サブタイトル */}\n                            <div className={`text-center text-blue-900 font-black mb-12 leading-relaxed transition-all ${isFullScreen ? \"text-4xl md:text-5xl mb-16\" : \"text-base md:text-lg mb-6\"}`}>\n                                <p>未経験者でも3ヶ月で投資ができる</p>\n                                <p>学習プログラムを提供</p>\n                            </div>\n\n                            {/* 笑顔の人のイラスト */}\n                            <div className={`text-center animate-scale-in transition-all ${isFullScreen ? \"mb-32\" : \"mb-6\"}`}>\n                                <div className={`relative mx-auto transition-all ${isFullScreen ? \"w-[1200px] h-[1000px] md:w-[1600px] md:h-[1400px]\" : \"w-48 h-48 md:w-56 md:h-56\"}`}>\n                                    <Image\n                                        src=\"/slides/happy_person_v2.png\"\n                                        alt=\"笑顔の人\"\n                                        fill\n                                        className=\"object-contain\"\n                                    />\n                                </div>\n                            </div>\n\n                            {/* まっすぐなパスとプログラムの統合ビジュアル */}\n                            <div className=\"relative flex-1 min-h-[500px] flex items-center justify-center\">\n                                <svg viewBox=\"0 0 400 600\" className=\"w-full h-full max-w-md mx-auto\">\n                                    <defs>\n                                        <marker id=\"arrowhead-blue-vertical\" markerWidth=\"10\" markerHeight=\"10\"\n                                            refX=\"5\" refY=\"5\" orient=\"auto\">\n                                            <polygon points=\"0 0, 10 5, 0 10\" fill=\"#3b82f6\" />\n                                        </marker>\n                                        <marker id=\"arrowhead-orange-vertical\" markerWidth=\"10\" markerHeight=\"10\"\n                                            refX=\"5\" refY=\"5\" orient=\"auto\">\n                                            <polygon points=\"0 0, 10 5, 0 10\" fill=\"#fb923c\" />\n                                        </marker>\n                                    </defs>\n\n                                    {/* 専任コンサル用の2本目の軸（伴走型） */}\n                                    <line\n                                        x1=\"270\" y1=\"50\"\n                                        x2=\"270\" y2=\"550\"\n                                        stroke=\"#fb923c\"\n                                        strokeWidth=\"4\"\n                                        strokeDasharray=\"8,4\"\n                                        markerEnd=\"url(#arrowhead-orange-vertical)\"\n                                        className=\"animate-draw-line-vertical\"\n                                        style={{ animationDelay: '0.2s' }}\n                                    />\n\n                                    {/* ホバー時の接続線 (オレンジ軸 -> 青軸) */}\n                                    {hoveredProgram !== null && (\n                                        <line\n                                            x1=\"270\" y1={[110, 240, 370, 500][hoveredProgram]}\n                                            x2=\"110\" y2={[110, 240, 370, 500][hoveredProgram]}\n                                            stroke=\"#fb923c\"\n                                            strokeWidth=\"3\"\n                                            strokeDasharray=\"4,2\"\n                                            className=\"animate-draw-line-horizontal\"\n                                        />\n                                    )}\n\n                                    {/* 専任コンサル軸の結節点（同期） */}\n                                    <g className=\"animate-fade-in\" style={{ animationDelay: '0.8s' }}>\n                                        <circle cx=\"270\" cy=\"110\" r=\"5\" fill=\"#fb923c\" />\n                                        <circle cx=\"270\" cy=\"240\" r=\"5\" fill=\"#fb923c\" />\n                                        <circle cx=\"270\" cy=\"370\" r=\"5\" fill=\"#fb923c\" />\n                                        <circle cx=\"270\" cy=\"500\" r=\"5\" fill=\"#fb923c\" />\n                                    </g>\n\n                                    {/* まっすぐな矢印 - 縦軸 */}\n                                    <line\n                                        x1=\"110\" y1=\"50\"\n                                        x2=\"110\" y2=\"550\"\n                                        stroke=\"#3b82f6\"\n                                        strokeWidth=\"6\"\n                                        markerEnd=\"url(#arrowhead-blue-vertical)\"\n                                        className=\"animate-draw-line-vertical\"\n                                    />\n\n                                    {/* 現在ラベル */}\n                                    <text x=\"110\" y=\"35\" className=\"text-xl font-black fill-blue-700\" textAnchor=\"middle\">現在</text>\n                                    <text x=\"270\" y=\"22\" className=\"text-xs md:text-sm font-black fill-orange-600\" textAnchor=\"middle\">\n                                        <tspan x=\"270\" dy=\"0\">専任コンサルタントによる</tspan>\n                                        <tspan x=\"270\" dy=\"1.4em\">充実したサポート</tspan>\n                                    </text>\n\n                                    {/* 理想ラベル */}\n                                    <text x=\"190\" y=\"585\" className=\"text-4xl md:text-5xl font-black fill-blue-800 drop-shadow-sm\" textAnchor=\"middle\">理想</text>\n\n                                    {/* 各プログラムステップ */}\n                                    {[\n                                        { y: 110, delay: '0.3s', desc: \"あなたに最適な学習プランを提案\" },\n                                        { y: 240, delay: '0.4s', desc: \"あなたの目標設計をサポート\" },\n                                        { y: 370, delay: '0.5s', desc: \"あなたにピッタリな\\n分析・戦略を\\n一緒に考えます\" },\n                                        { y: 500, delay: '0.6s', desc: \"疑問・不安を\\n丸ごと解決\" }\n                                    ].map((step, idx) => (\n                                        <g\n                                            key={idx}\n                                            className=\"animate-fade-in-up cursor-pointer transition-all duration-300\"\n                                            style={{ animationDelay: step.delay }}\n                                            onMouseEnter={() => setHoveredProgram(idx)}\n                                            onMouseLeave={() => setHoveredProgram(null)}\n                                        >\n                                            {/* 青い結節点 */}\n                                            <circle\n                                                cx=\"110\" cy={step.y} r={hoveredProgram === idx ? 10 : 8}\n                                                fill=\"#3b82f6\"\n                                                className=\"transition-all duration-300\"\n                                            />\n\n                                            {/* ラベルボックス */}\n                                            <foreignObject x=\"0\" y={step.y - 30} width=\"110\" height=\"60\">\n                                                <div className={`flex items-center justify-center bg-white p-1 rounded-lg border-2 transition-all duration-300 origin-center ${hoveredProgram === idx ? 'shadow-xl scale-110 border-blue-400' : 'shadow-md border-blue-200'}`}>\n                                                    <p className=\"text-blue-900 font-bold text-[10px] items-center leading-tight whitespace-pre-line text-center\">\n                                                        {slide.gfsMethod?.programs[idx]}\n                                                    </p>\n                                                </div>\n                                            </foreignObject>\n\n                                            {/* 専任コンサル詳細ボックス（ホバー時） */}\n                                            {hoveredProgram === idx && (\n                                                <g className=\"animate-fade-in\">\n                                                    <foreignObject x=\"285\" y={step.y - 30} width=\"110\" height=\"70\">\n                                                        <div className=\"bg-orange-50 border-2 border-orange-400 p-2 rounded-xl shadow-lg flex items-center justify-center relative\">\n                                                            <div className=\"absolute -left-2 top-1/2 -translate-y-1/2 w-0 h-0 border-t-8 border-t-transparent border-b-8 border-b-transparent border-r-8 border-r-orange-400\"></div>\n                                                            <p className=\"text-orange-800 font-bold text-[10px] leading-snug whitespace-pre-line text-center\">\n                                                                {step.desc}\n                                                            </p>\n                                                        </div>\n                                                    </foreignObject>\n                                                </g>\n                                            )}\n                                        </g>\n                                    ))}\n                                </svg>\n                            </div>\n\n                        </div>\n                    </div>\n\n                    {/* アニメーション用のスタイル */}\n                    <style jsx>{`\n                        @keyframes drawPath {\n                            from {\n                                stroke-dashoffset: 1000;\n                            }\n                            to {\n                                stroke-dashoffset: 0;\n                            }\n                        }\n\n                        .animate-draw-path {\n                            stroke-dasharray: 1000;\n                            animation: drawPath 2.5s ease-out 0.5s forwards;\n                        }\n\n                        @keyframes drawLine {\n                            from {\n                                stroke-dashoffset: 300;\n                            }\n                            to {\n                                stroke-dashoffset: 0;\n                            }\n                        }\n\n                        .animate-draw-line {\n                            stroke-dasharray: 300;\n                            animation: drawLine 1.5s ease-out 0.5s forwards;\n                        }\n\n                        @keyframes drawPathVertical {\n                            from {\n                                stroke-dashoffset: 1500;\n                            }\n                            to {\n                                stroke-dashoffset: 0;\n                            }\n                        }\n\n                        .animate-draw-path-vertical {\n                            stroke-dasharray: 1500;\n                            animation: drawPathVertical 3s ease-out 0.5s forwards;\n                        }\n\n                        @keyframes drawLineHorizontal {\n                            from {\n                                stroke-dashoffset: 200;\n                            }\n                            to {\n                                stroke-dashoffset: 0;\n                            }\n                        }\n\n                        .animate-draw-line-horizontal {\n                            stroke-dasharray: 200;\n                            animation: drawLineHorizontal 0.4s ease-out forwards;\n                        }\n\n                        @keyframes drawLineVertical {\n                            from {\n                                stroke-dashoffset: 500;\n                            }\n                            to {\n                                stroke-dashoffset: 0;\n                            }\n                        }\n\n                        .animate-draw-line-vertical {\n                            stroke-dasharray: 500;\n                            animation: drawLineVertical 2s ease-out 0.5s forwards;\n                        }\n\n                        @keyframes slideInLeft {\n                            from {\n                                opacity: 0;\n                                transform: translateX(-50px);\n                            }\n                            to {\n                                opacity: 1;\n                                transform: translateX(0);\n                            }\n                        }\n\n                        .animate-slide-in-left {\n                            animation: slideInLeft 0.8s ease-out forwards;\n                        }\n\n                        @keyframes slideInRight {\n                            from {\n                                opacity: 0;\n                                transform: translateX(50px);\n                            }\n                            to {\n                                opacity: 1;\n                                transform: translateX(0);\n                            }\n                        }\n\n                        .animate-slide-in-right {\n                            animation: slideInRight 0.8s ease-out forwards;\n                        }\n\n                        @keyframes bounceSlow {\n                            0%, 100% {\n                                transform: translateY(0);\n                            }\n                            50% {\n                                transform: translateY(-10px);\n                            }\n                        }\n\n                        .animate-bounce-slow {\n                            animation: bounceSlow 2s ease-in-out infinite;\n                        }\n                    `}</style>\n                </div>\n            );\n        }\n\n        if (slide.type === \"image\") {\n            return (\n                <div className=\"relative h-full flex flex-col items-center justify-center bg-white p-8\">\n                    {/* 画像をトリミングして表示 */}\n                    <div className=\"relative w-full h-full max-w-5xl\">\n                        <Image\n                            src={slide.image!}\n                            alt={slide.title}\n                            fill\n                            className=\"object-contain\"\n                            style={{ objectPosition: slide.objectPosition || \"center center\" }}\n                            priority={currentSlide === 0}\n                        />\n                    </div>\n                </div>\n            );\n        }\n\n        // カスタムスライド\n        return (\n            <div className={`relative h-full bg-gradient-to-br ${slide.color} p-8 md:p-12 flex flex-col justify-center text-white overflow-hidden`}>\n                {/* キャラクター画像1 - 右下に配置 */}\n                {slide.characterImage && (\n                    <div className={`absolute right-4 bottom-4 opacity-40 animate-float pointer-events-none z-10 transition-all duration-700 ${isFullScreen ? \"w-[400px] h-[400px] md:w-[700px] md:h-[700px] right-20 bottom-20\" : \"w-48 h-48 md:w-64 md:h-64\"}`}>\n                        <Image\n                            src={slide.characterImage}\n                            alt=\"キャラクター\"\n                            fill\n                            className=\"object-contain\"\n                        />\n                    </div>\n                )}\n\n                {/* キャラクター画像2 - 斜め左上にずらして配置（重ならないように） */}\n                {slide.characterImage2 && (\n                    <div className={`absolute right-48 bottom-40 opacity-40 animate-float pointer-events-none z-20 transition-all duration-700 ${isFullScreen ? \"w-[400px] h-[400px] md:w-[700px] md:h-[700px] right-[400px] bottom-[300px]\" : \"w-48 h-48 md:w-64 md:h-64\"}`} style={{ animationDelay: '0.5s' }}>\n                        <Image\n                            src={slide.characterImage2}\n                            alt=\"キャラクター2\"\n                            fill\n                            className=\"object-contain\"\n                        />\n                    </div>\n                )}\n\n                <div className={`mx-auto w-full relative z-10 transition-all duration-700 ${isFullScreen ? \"max-w-[95%] space-y-16\" : \"max-w-4xl space-y-4\"}`}>\n                    <div className=\"flex items-center gap-6 mb-6\">\n                        {slide.icon && (\n                            <div className={`bg-white/10 rounded-3xl backdrop-blur-md border border-white/20 flex items-center justify-center transition-all ${isFullScreen ? \"p-8 w-24 h-24\" : \"p-4 w-16 h-16\"}`}>\n                                <slide.icon className={`transition-all ${isFullScreen ? \"w-16 h-16\" : \"w-10 h-10\"} animate-bounce-gentle`} />\n                            </div>\n                        )}\n                        <div>\n                            {isFullScreen && <p className=\"text-3xl font-bold opacity-60 mb-4 uppercase tracking-[0.5em] font-serif\">Section 01 / Concept</p>}\n                            <h2 className={`font-black transition-all ${isFullScreen ? \"text-6xl md:text-9xl mb-10\" : \"text-3xl md:text-4xl\"}`}>\n                                {slide.title}\n                            </h2>\n                        </div>\n                    </div>\n\n                    <div className={`transition-all ${isFullScreen ? \"space-y-16 pl-12 border-l-[12px] border-white/20\" : \"space-y-4\"}`}>\n                        <h3 className={`font-black mb-4 transition-all ${isFullScreen ? \"text-5xl md:text-8xl leading-tight\" : \"text-2xl md:text-3xl\"}`}>\n                            {slide.content?.heading}\n                        </h3>\n                        {slide.content?.subheading && (\n                            <p className={`opacity-90 font-bold transition-all ${isFullScreen ? \"text-3xl md:text-5xl mb-16\" : \"text-xl md:text-2xl mb-6\"}`}>\n                                {slide.content.subheading}\n                            </p>\n                        )}\n                        <ul className={`${isFullScreen ? \"grid grid-cols-1 md:grid-cols-2 gap-x-20 gap-y-12\" : \"space-y-3 md:space-y-4\"}`}>\n                            {slide.content?.points.map((point: string, index: number) => (\n                                <li key={index} className=\"flex items-start gap-8 transition-all\">\n                                    <div className=\"mt-4 text-white/60\">\n                                        <div className={`bg-white rounded-full shadow-[0_0_20px_rgba(255,255,255,1)] transition-all ${isFullScreen ? \"w-8 h-8\" : \"w-3 h-3\"}`} />\n                                    </div>\n                                    <span className={`font-bold transition-all ${isFullScreen ? \"text-3xl md:text-5xl leading-tight\" : \"text-lg md:text-xl\"}`}>\n                                        {point}\n                                    </span>\n                                </li>\n                            ))}\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        );\n    };\n\n    return (\n        <div className=\"min-h-screen relative overflow-hidden bg-gradient-to-br from-slate-50 via-blue-50 to-white\">\n            {/* GFSロゴ */}\n            <div className={`absolute top-8 left-8 z-30 transition-all duration-1000 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 -translate-y-10\"}`}>\n                <div className=\"flex items-center gap-3\">\n                    <Image src=\"/images/gfs_logo_navy.png\" alt=\"GFS\" width={80} height={80} className=\"object-contain\" />\n                    <div className=\"h-8 w-[1px] bg-slate-200 ml-1\" />\n                    <span className=\"text-[10px] font-black text-slate-400 uppercase tracking-[0.3em] bg-white/50 backdrop-blur-sm px-2 py-1 rounded\">Consulting AI</span>\n                </div>\n            </div>\n\n            {/* 背景のマスコット画像 */}\n            <div className=\"absolute inset-0 pointer-events-none\">\n                <Image\n                    src=\"/mascot/mascot_happy.png\"\n                    alt=\"\"\n                    width={250}\n                    height={250}\n                    className=\"absolute -top-10 -right-10 opacity-10 animate-float-slow\"\n                />\n                <Image\n                    src=\"/mascot/mascot_search.png\"\n                    alt=\"\"\n                    width={200}\n                    height={200}\n                    className=\"absolute bottom-20 -left-10 opacity-10 animate-float-delayed\"\n                />\n            </div>\n\n            <div className=\"relative z-10 min-h-screen py-8 px-4\">\n                <div className=\"max-w-6xl mx-auto\">\n                    {/* セクションヘッダー */}\n                    <div className={`text-center mb-8 transition-all duration-700 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                        <div className=\"flex justify-between items-center mb-4 max-w-4xl mx-auto px-4\">\n                            <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                onClick={onBack}\n                                className=\"text-gray-500 hover:text-primary transition-colors\"\n                            >\n                                <ChevronLeft className=\"w-4 h-4 mr-1\" />\n                                戻る\n                            </Button>\n                            <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                onClick={onGoToAgenda}\n                                className=\"text-gray-500 hover:text-primary transition-colors\"\n                            >\n                                <FileText className=\"w-4 h-4 mr-1\" />\n                                目次\n                            </Button>\n                        </div>\n                        <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-primary/10 backdrop-blur rounded-full mb-4\">\n                            <span className=\"text-primary font-bold\">Section 01</span>\n                            <span className=\"text-gray-400\">/</span>\n                            <span className=\"text-gray-600\">簡単に弊社のご紹介</span>\n                        </div>\n                        <h1 className=\"text-3xl md:text-4xl font-bold text-gray-800 mb-2\">\n                            GFSへようこそ\n                        </h1>\n                        <p className=\"text-gray-600\">\n                            まずはGFSについてご紹介させてください\n                        </p>\n                    </div>\n\n                    {/* メインスライド */}\n                    <div className={`relative mb-8 transition-all duration-700 delay-200 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                        <div className=\"bg-white rounded-3xl shadow-2xl overflow-hidden\">\n                            {/* スライドコンテンツ */}\n                            <div\n                                ref={scrollContainerRef}\n                                className=\"relative h-96 md:h-[600px] overflow-y-auto\"\n                            >\n                                {slides.map((slide, index) => (\n                                    <div\n                                        key={index}\n                                        className={`absolute inset-0 transition-all duration-700 ${index === currentSlide\n                                            ? \"opacity-100 scale-100\"\n                                            : \"opacity-0 scale-95 pointer-events-none\"\n                                            }`}\n                                    >\n                                        <div className=\"relative h-full group/slide-container\">\n                                            {/* 各スライド共通の全画面化ボタン */}\n                                            {index === currentSlide && (\n                                                <button\n                                                    onClick={() => setIsFullScreen(true)}\n                                                    className=\"absolute top-4 right-4 z-40 p-3 bg-white/20 hover:bg-white/40 rounded-full opacity-0 group-hover/slide-container:opacity-100 transition-all duration-300 backdrop-blur-md border border-white/30 shadow-xl\"\n                                                    title=\"全画面で表示\"\n                                                >\n                                                    <Maximize2 className={`w-6 h-6 ${slide.type === 'custom' ? 'text-white' : 'text-gray-700'}`} />\n                                                </button>\n                                            )}\n\n                                            {renderSlide(slide)}\n                                        </div>\n                                    </div>\n                                ))}\n                            </div>\n\n                            {/* ナビゲーション */}\n                            <div className=\"flex items-center justify-between p-4 bg-gray-50 border-t\">\n                                <button\n                                    onClick={prevSlide}\n                                    className=\"p-2 rounded-full hover:bg-gray-200 transition\"\n                                    aria-label=\"前のスライド\"\n                                >\n                                    <ChevronLeft className=\"w-6 h-6 text-gray-600\" />\n                                </button>\n\n                                <div className=\"flex items-center gap-3\">\n                                    <div className=\"flex gap-2\">\n                                        {slides.map((_, index) => (\n                                            <button\n                                                key={index}\n                                                onClick={() => goToSlide(index)}\n                                                className={`transition-all ${index === currentSlide\n                                                    ? \"w-8 h-3 bg-primary rounded-full\"\n                                                    : \"w-3 h-3 bg-gray-300 rounded-full hover:bg-gray-400\"\n                                                    }`}\n                                                aria-label={`スライド${index + 1}へ`}\n                                            />\n                                        ))}\n                                    </div>\n                                </div>\n\n                                <button\n                                    onClick={nextSlide}\n                                    className=\"p-2 rounded-full hover:bg-gray-200 transition\"\n                                    aria-label=\"次のスライド\"\n                                >\n                                    <ChevronRight className=\"w-6 h-6 text-gray-600\" />\n                                </button>\n                            </div>\n                        </div>\n\n                        {/* スライドタイトルと説明 */}\n                        <div className=\"mt-4 text-center\">\n                            <h3 className=\"text-xl font-bold text-gray-800 mb-1\">\n                                {slides[currentSlide].title}\n                            </h3>\n                            {slides[currentSlide].description && (\n                                <p className=\"text-gray-600\">\n                                    {slides[currentSlide].description}\n                                </p>\n                            )}\n                        </div>\n                    </div>\n\n                    {/* 次へボタン */}\n                    <div className={`text-center transition-all duration-700 delay-700 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                        <Button\n                            onClick={onNext}\n                            size=\"lg\"\n                            className=\"min-w-64 text-lg h-14 shadow-xl animate-pulse-border\"\n                        >\n                            <Sparkles className=\"w-5 h-5\" />\n                            あなたのことを聞かせてください\n                            <ArrowRight className=\"w-5 h-5\" />\n                        </Button>\n                    </div>\n                </div>\n            </div>\n\n            {/* 会社の外観オーバーレイ */}\n            {showExteriorOverlay && (\n                <div\n                    className=\"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-300 p-4 md:p-8 cursor-pointer\"\n                    onClick={() => setShowExteriorOverlay(false)}\n                >\n                    <div className=\"relative w-full max-w-5xl h-full max-h-[90vh] flex flex-col items-center justify-center animate-in zoom-in-95 duration-300\">\n                        <div className=\"relative w-full h-full rounded-2xl overflow-hidden shadow-2xl border-2 border-white/20\">\n                            <Image\n                                src=\"/images/company_exterior.jpg\"\n                                alt=\"会社の外観 大画像\"\n                                fill\n                                className=\"object-contain\"\n                                priority\n                            />\n                        </div>\n                        <button\n                            className=\"mt-6 px-8 py-3 bg-white/10 hover:bg-white/20 text-white rounded-full backdrop-blur-md border border-white/30 font-bold transition-all\"\n                            onClick={(e) => {\n                                e.stopPropagation();\n                                setShowExteriorOverlay(false);\n                            }}\n                        >\n                            閉じる\n                        </button>\n                    </div>\n                </div>\n            )}\n\n            {/* 全画面オーバーレイ（前の仕様を復元・拡張） */}\n            {isFullScreen && (\n                <div className=\"fixed inset-0 z-[110] bg-black flex items-center justify-center animate-in fade-in duration-500\">\n                    <div className=\"absolute inset-0 bg-gradient-to-br from-gray-900 to-black opacity-90\"></div>\n\n                    {/* 閉じるボタン */}\n                    <button\n                        onClick={() => setIsFullScreen(false)}\n                        className=\"absolute top-8 right-8 z-[130] p-4 bg-white/10 hover:bg-white/20 rounded-full backdrop-blur-xl border border-white/20 transition-all group\"\n                    >\n                        <X className=\"w-8 h-8 text-white group-hover:rotate-90 transition-transform\" />\n                    </button>\n\n                    {/* 左右ナビゲーションエリア */}\n                    <div\n                        className=\"absolute left-0 top-0 w-1/4 h-full z-[120] cursor-pointer group/nav\"\n                        onClick={(e) => { e.stopPropagation(); prevSlide(); }}\n                    >\n                        <div className=\"absolute left-12 top-1/2 -translate-y-1/2 p-4 bg-white/5 opacity-0 group-hover/nav:opacity-100 transition-all rounded-full backdrop-blur-sm border border-white/10\">\n                            <ChevronLeft className=\"w-12 h-12 text-white/50\" />\n                        </div>\n                    </div>\n                    <div\n                        className=\"absolute right-0 top-0 w-1/4 h-full z-[120] cursor-pointer group/nav\"\n                        onClick={(e) => { e.stopPropagation(); nextSlide(); }}\n                    >\n                        <div className=\"absolute right-12 top-1/2 -translate-y-1/2 p-4 bg-white/5 opacity-0 group-hover/nav:opacity-100 transition-all rounded-full backdrop-blur-sm border border-white/10\">\n                            <ChevronRight className=\"w-12 h-12 text-white/50\" />\n                        </div>\n                    </div>\n\n                    {/* スライド本体 */}\n                    <div className=\"relative w-full h-full overflow-hidden animate-in zoom-in-95 duration-500\">\n                        {renderSlide(slides[currentSlide])}\n                    </div>\n\n                    {/* 下部ページネーション */}\n                    <div className=\"absolute bottom-12 left-1/2 -translate-x-1/2 flex gap-4 z-[125]\">\n                        {slides.map((_, i) => (\n                            <div\n                                key={i}\n                                className={`h-2 transition-all duration-500 rounded-full ${i === currentSlide ? \"w-12 bg-white\" : \"w-4 bg-white/30\"}`}\n                            />\n                        ))}\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/Phase3Simulation.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used.","line":7,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":39,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CardHeader"},"fix":{"range":[262,274],"text":""},"desc":"Remove unused variable \"CardHeader\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used.","line":7,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":50,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CardTitle"},"fix":{"range":[274,285],"text":""},"desc":"Remove unused variable \"CardTitle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Rocket' is defined but never used.","line":10,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":22,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Rocket"},"fix":{"range":[409,417],"text":""},"desc":"Remove unused variable \"Rocket\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'User' is defined but never used.","line":11,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"User"},"fix":{"range":[480,490],"text":""},"desc":"Remove unused variable \"User\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Wallet' is defined but never used.","line":11,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Wallet"},"fix":{"range":[490,498],"text":""},"desc":"Remove unused variable \"Wallet\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Legend' is defined but never used.","line":13,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":71,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Legend"},"fix":{"range":[617,625],"text":""},"desc":"Remove unused variable \"Legend\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showArrowButton' is assigned a value but never used.","line":33,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setShowArrowButton' is assigned a value but never used.","line":33,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":47},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/Phase3Simulation.tsx:42:9\n  40 |     useEffect(() => {\n  41 |         if (isPreview) return;\n> 42 |         setShowContent(true);\n     |         ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  43 |         // 段階的にコンテンツを表示\n  44 |         const timers = [1, 2, 3, 4].map((step, index) =>\n  45 |             setTimeout(() => {","line":42,"column":9,"nodeType":null,"endLine":42,"endColumn":23},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/Phase3Simulation.tsx:70:13\n  68 |     useEffect(() => {\n  69 |         if (isPreview && typeof subStep === 'number' && subStep !== showStep) {\n> 70 |             setShowStep(subStep);\n     |             ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  71 |         }\n  72 |     }, [subStep, isPreview, showStep]);\n  73 |","line":70,"column":13,"nodeType":null,"endLine":70,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'trustEndValue' is assigned a value but never used.","line":92,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":92,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'stocksEndValue' is assigned a value but never used.","line":93,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":93,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'investmentSteps' is assigned a value but never used.","line":101,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":101,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":434,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":434,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29096,29099],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29096,29099],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":566,"column":53,"nodeType":"JSXOpeningElement","endLine":566,"endColumn":186},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":570,"column":53,"nodeType":"JSXOpeningElement","endLine":570,"endColumn":183},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":574,"column":53,"nodeType":"JSXOpeningElement","endLine":574,"endColumn":183},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":578,"column":53,"nodeType":"JSXOpeningElement","endLine":578,"endColumn":183},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":768,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":768,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[58335,58338],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[58335,58338],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState, useRef } from \"react\";\nimport { UserInput, SimulationResult } from \"@/types\";\nimport { formatManYen, formatPercent } from \"@/lib/simulation\";\nimport { Button } from \"@/components/ui/Button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/Card\";\nimport {\n    TrendingUp, TrendingDown, AlertTriangle, CheckCircle, ArrowRight,\n    PiggyBank, Rocket, Target, Lightbulb, BarChart3, ChevronLeft, FileText, Sparkles,\n    User, Wallet, Lock as LockIcon, ChevronsRight\n} from \"lucide-react\";\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, ReferenceLine } from \"recharts\";\nimport Image from \"next/image\";\n\ninterface Phase3SimulationProps {\n    userData: UserInput;\n    simulationResult?: SimulationResult;\n    onNext?: () => void;\n    onBack?: () => void;\n    onGoToAgenda?: () => void;\n    onSubStepChange?: (subStep: number | string) => void;\n    subStep?: number | string;\n    isPreview?: boolean;\n}\n\nexport default function Phase3Simulation({ userData, simulationResult, onNext, onBack, onGoToAgenda, onSubStepChange, subStep, isPreview = false }: Phase3SimulationProps) {\n    const [showStep, setShowStep] = useState(isPreview ? (typeof subStep === 'number' ? subStep : 4) : 0);\n    const [showContent, setShowContent] = useState(isPreview);\n    const [showSecondHalf, setShowSecondHalf] = useState(isPreview);\n    const [showSavingsResult, setShowSavingsResult] = useState(isPreview);\n    const [showGapCard, setShowGapCard] = useState(isPreview);\n    const [showArrowButton, setShowArrowButton] = useState(false);\n    const [showRequiredRate, setShowRequiredRate] = useState(false);\n    const [showRequiredGraph, setShowRequiredGraph] = useState(false);\n    const [activeInsightSlide, setActiveInsightSlide] = useState<number>(isPreview && typeof subStep === 'string' && subStep.startsWith('insight-') ? parseInt(subStep.split('-')[1]) : 0);\n    const gapCardRef = useRef<HTMLDivElement>(null);\n\n\n    useEffect(() => {\n        if (isPreview) return;\n        setShowContent(true);\n        // 段階的にコンテンツを表示\n        const timers = [1, 2, 3, 4].map((step, index) =>\n            setTimeout(() => {\n                setShowStep(step);\n                onSubStepChange?.(step);\n            }, (index + 1) * 800)\n        );\n        return () => timers.forEach(clearTimeout);\n    }, [isPreview, onSubStepChange]);\n\n    // 預金結果が表示されたら、段階的にストーリーを展開する演出\n    useEffect(() => {\n        if (showSavingsResult) {\n            // 2.5秒後に「不足金額（Reality Check）」を表示\n            const gapTimer = setTimeout(() => {\n                setShowGapCard(true);\n            }, 2500);\n\n            return () => {\n                clearTimeout(gapTimer);\n            };\n        }\n    }, [showSavingsResult]);\n\n    // Sync from prop (for preview mode)\n    useEffect(() => {\n        if (isPreview && typeof subStep === 'number' && subStep !== showStep) {\n            setShowStep(subStep);\n        }\n    }, [subStep, isPreview, showStep]);\n\n    // 不足金額が表示されたときに強制スクロール\n    useEffect(() => {\n        if (showGapCard && gapCardRef.current && !isPreview) {\n            gapCardRef.current.scrollIntoView({ behavior: 'smooth', block: 'center' });\n        }\n    }, [showGapCard, isPreview]);\n\n    // 全ての演出を一括スキップする\n    const handleSkipAnimation = () => {\n        setShowStep(4);\n        setShowSavingsResult(true);\n        setShowGapCard(true);\n        setShowSecondHalf(true);\n        onSubStepChange?.(4);\n    };\n\n    const {\n        savingsEndValue = 0,\n        trustEndValue = 0,\n        stocksEndValue = 0,\n        gfsEndValue = 0,\n        requiredAnnualRate = 0,\n        gap = 0,\n        isGapNegative = false,\n        chartData = []\n    } = simulationResult || {};\n\n    const investmentSteps = [\n        {\n            title: \"ゴールを決める\",\n            description: \"まずは何のために投資するか明確にする\",\n            icon: Target,\n            color: \"from-blue-500 to-cyan-500\",\n        },\n        {\n            title: \"体系的に学ぶ\",\n            description: \"断片的ではなく、基礎から順序立てて学ぶ\",\n            icon: Lightbulb,\n            color: \"from-purple-500 to-pink-500\",\n        },\n        {\n            title: \"少額から始める\",\n            description: \"数百円から購入可能。リスクを抑えてスタート\",\n            icon: PiggyBank,\n            color: \"from-emerald-500 to-teal-500\",\n        },\n    ];\n\n    return (\n        <div className=\"min-h-screen relative overflow-hidden bg-gradient-to-br from-slate-50 via-blue-50 to-white\">\n            {/* GFSロゴ */}\n            <div className={`absolute top-8 left-8 z-30 transition-all duration-1000 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 -translate-y-10\"}`}>\n                <div className=\"flex items-center gap-3\">\n                    <Image src=\"/images/gfs_logo_navy.png\" alt=\"GFS\" width={80} height={80} className=\"object-contain\" />\n                    <div className=\"h-8 w-[1px] bg-slate-200 ml-1\" />\n                    <span className=\"text-[10px] font-black text-slate-400 uppercase tracking-[0.3em] bg-white/50 backdrop-blur-sm px-2 py-1 rounded\">Consulting AI</span>\n                </div>\n            </div>\n\n            {/* 背景のマスコット画像 */}\n            <div className=\"absolute inset-0 pointer-events-none\">\n                <Image\n                    src=\"/mascot/mascot_search.png\"\n                    alt=\"\"\n                    width={220}\n                    height={220}\n                    className=\"absolute -top-10 -right-10 opacity-20 animate-float-slow\"\n                />\n                <Image\n                    src=\"/mascot/mascot_cheer_pink.png\"\n                    alt=\"\"\n                    width={180}\n                    height={180}\n                    className=\"absolute bottom-20 -left-10 opacity-20 animate-float-delayed\"\n                />\n            </div>\n\n            <div className=\"relative z-10 min-h-screen py-8 px-4\">\n                <div className=\"max-w-6xl mx-auto\">\n                    {/* セクションヘッダー */}\n                    <div className={`text-center mb-8 transition-all duration-700 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                        <div className=\"flex justify-between items-center mb-4 max-w-6xl mx-auto\">\n                            <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                onClick={onBack}\n                                className=\"text-blue-200 hover:text-white transition-colors\"\n                            >\n                                <ChevronLeft className=\"w-4 h-4 mr-1\" />\n                                戻る\n                            </Button>\n                            <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                onClick={onGoToAgenda}\n                                className=\"text-blue-200 hover:text-white transition-colors\"\n                            >\n                                <FileText className=\"w-4 h-4 mr-1\" />\n                                目次\n                            </Button>\n                        </div>\n                        <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-slate-900/10 backdrop-blur rounded-full mb-4 ring-1 ring-slate-900/5\">\n                            <span className=\"text-amber-600 font-bold\">Section 02</span>\n                            <span className=\"text-slate-400\">/</span>\n                            <span className=\"text-slate-900\">{userData.name || \"あなた\"}様の未来予想図</span>\n                            {!showSecondHalf && (\n                                <button\n                                    onClick={handleSkipAnimation}\n                                    title=\"演出をスキップ\"\n                                    className=\"ml-3 flex items-center gap-1 px-2.5 py-1 rounded-full bg-blue-600 text-white hover:bg-black transition-all duration-300 shadow-lg ring-2 ring-white\"\n                                >\n                                    <span className=\"text-[10px] font-black tracking-tighter\">SKIP</span>\n                                    <ChevronsRight className=\"w-4 h-4\" />\n                                </button>\n                            )}\n                        </div>\n                        <h1 className=\"text-3xl md:text-5xl font-black text-slate-950 mb-6 tracking-tight leading-tight whitespace-nowrap\">\n                            {userData.name}様の予測資産シミュレーション\n                        </h1>\n                        <p className=\"text-lg text-slate-600 font-bold max-w-2xl mx-auto leading-relaxed\">\n                            「{userData.investmentGoal}」という目標に向けた<br />\n                            資産形成のシミュレーション結果\n                        </p>\n                    </div>\n\n\n                    {/* 預金ルート：現実の直視 */}\n                    <div className={`mb-20 transition-all duration-700 ${showStep >= 1 ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                        <div className=\"flex items-center gap-2 mb-6\">\n                            <div className=\"h-px flex-1 bg-slate-200\"></div>\n                            <span className=\"text-xs font-black text-slate-400 uppercase tracking-widest italic\">Reality Check: Step 01</span>\n                            <div className=\"h-px flex-1 bg-slate-200\"></div>\n                        </div>\n\n                        {/* 必要年利の表示カード */}\n                        <div className=\"grid md:grid-cols-2 gap-6 mb-8\">\n                            <Card className=\"border-0 shadow-lg bg-white p-6 border-t-4 border-blue-500\">\n                                <p className=\"text-sm font-bold text-slate-400 mb-2\">目標金額</p>\n                                <p className=\"text-3xl font-black text-blue-900\">{formatManYen(userData.targetAmount)}</p>\n                            </Card>\n                            <Card className=\"border-0 shadow-lg bg-white p-6 border-t-4 border-slate-500\">\n                                <p className=\"text-sm font-bold text-slate-400 mb-2\">目標期間</p>\n                                <p className=\"text-3xl font-black text-slate-700\">{userData.targetPeriod}年間</p>\n                            </Card>\n                        </div>\n\n                        {/* 預金のみの結果を表示するボタン（非表示時） */}\n                        {!showSavingsResult && (\n                            <div className=\"flex flex-col items-center gap-6 py-12 animate-bounce-gentle\">\n                                <p className=\"text-slate-500 font-black text-lg tracking-widest uppercase italic\">もしも...</p>\n                                <button\n                                    onClick={() => setShowSavingsResult(true)}\n                                    className=\"group relative px-12 py-6 flex items-center justify-center bg-gradient-to-r from-slate-600 to-slate-700 rounded-2xl shadow-[0_20px_50px_rgba(0,0,0,0.15)] border border-slate-400 hover:shadow-[0_30px_70px_rgba(71,85,105,0.3)] hover:border-slate-300 transition-all duration-500 transform hover:scale-105 active:scale-95\"\n                                >\n                                    <div className=\"absolute inset-0 bg-gradient-to-b from-white/10 to-transparent opacity-0 group-hover:opacity-100 rounded-2xl transition-opacity\"></div>\n                                    <span className=\"text-white font-black text-xl tracking-wide relative z-10\">預金を{userData.targetPeriod}年間続けた場合</span>\n                                    <ArrowRight className=\"ml-3 w-6 h-6 text-white group-hover:translate-x-2 transition-all duration-500 relative z-10\" />\n                                    <div className=\"absolute -inset-2 bg-slate-400/20 rounded-2xl animate-ping-slow\"></div>\n                                </button>\n                            </div>\n                        )}\n\n                        {/* 預金のみの運用結果カード（表示時） */}\n                        {showSavingsResult && (\n                            <div className=\"animate-fade-in-up\">\n                                <Card className=\"border-0 shadow-xl overflow-hidden bg-slate-50 mb-8 border-l-8 border-slate-400\">\n                                    <div className=\"p-8 md:flex items-center justify-between gap-10\">\n                                        <div className=\"mb-6 md:mb-0\">\n                                            <div className=\"flex items-center gap-3 mb-4\">\n                                                <PiggyBank className=\"w-8 h-8 text-slate-400\" />\n                                                <h3 className=\"text-2xl font-black text-slate-700\">預金のみで運用を続けた場合</h3>\n                                            </div>\n                                            <p className=\"text-slate-500 leading-relaxed font-medium\">\n                                                超低金利の環境では、預金だけでは資産は増えていきません。<br className=\"hidden md:block\" />\n                                                むしろ物価上昇(インフレ)によって、お金の価値が目減りするリスクがあります。\n                                            </p>\n                                        </div>\n                                        <div className=\"text-center md:text-right bg-white p-6 rounded-2xl shadow-inner border border-slate-100 min-w-[280px]\">\n                                            <p className=\"text-xs font-bold text-slate-400 mb-1\">{userData.targetPeriod}年後の予測資産額</p>\n                                            <p className=\"text-5xl font-black text-slate-600 tracking-tighter\">\n                                                {formatManYen(savingsEndValue)}\n                                            </p>\n                                            <div className=\"mt-4 flex items-center justify-center md:justify-end gap-2 text-red-500 font-bold text-sm\">\n                                                <TrendingDown className=\"w-4 h-4\" />\n                                                <span>目標を達成するには不十分です</span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </Card>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* 不足額の強調：危機感のピーク */}\n                    {isGapNegative && showGapCard && (\n                        <div className=\"mb-12 animate-scale-in-bounce\" ref={gapCardRef}>\n                            <div className=\"animate-shake\">\n                                <Card className=\"border-0 shadow-2xl bg-gradient-to-br from-red-600 via-red-700 to-red-800 text-white relative overflow-hidden\">\n                                    {/* 背景装飾 */}\n                                    <div className=\"absolute top-0 right-0 p-4 opacity-10\">\n                                        <AlertTriangle className=\"w-48 h-48 -mr-10 -mt-10\" />\n                                    </div>\n                                    <CardContent className=\"py-12 px-6 md:px-12 relative z-10\">\n                                        <div className=\"flex flex-col xl:flex-row items-center justify-between gap-12\">\n                                            <div className=\"flex flex-col md:flex-row items-center gap-10 text-center md:text-left flex-1\">\n                                                <div className=\"p-8 bg-white rounded-[2rem] shadow-2xl animate-pulse shrink-0\">\n                                                    <AlertTriangle className=\"w-16 h-16 text-red-600\" />\n                                                </div>\n                                                <div className=\"flex-1\">\n                                                    <p className=\"text-xl md:text-2xl font-black mb-3 tracking-tight\">預金を続けた場合の目標に対する不足金額</p>\n                                                    <p className=\"text-red-100/80 text-base leading-relaxed font-medium\">\n                                                        「{userData.investmentGoal}」の実現において、<br />\n                                                        預金ルートでは以下の資金ギャップが生じます。\n                                                    </p>\n                                                </div>\n                                            </div>\n                                            <div className=\"text-center md:text-right bg-white/10 p-6 rounded-[2rem] backdrop-blur-md border border-white/20 min-w-fit\">\n                                                <p className=\"text-5xl md:text-7xl font-black text-white mb-1 tracking-tighter drop-shadow-xl whitespace-nowrap leading-none py-2\">\n                                                    {formatManYen(gap)}\n                                                </p>\n                                                <p className=\"text-red-100 font-bold text-xl opacity-80 italic tracking-widest\">FUNDING GAP</p>\n                                            </div>\n                                        </div>\n                                    </CardContent>\n                                    {/* マスコット：深刻 */}\n                                    <div className=\"absolute -bottom-4 left-4 pointer-events-none opacity-40\">\n                                        <Image src=\"/mascot/mascot_search.png\" alt=\"\" width={150} height={150} />\n                                    </div>\n                                </Card>\n                            </div>\n\n                            {/* スタイリッシュな展開ボタン */}\n                            {!showSecondHalf && (\n                                <div className=\"mt-16 flex flex-col items-center gap-8 animate-fade-in-scale-luxury\">\n                                    <p className=\"text-slate-500 font-black text-xl tracking-widest uppercase italic\">Solution is here</p>\n                                    <button\n                                        onClick={() => setShowSecondHalf(true)}\n                                        className=\"group relative w-32 h-32 flex items-center justify-center bg-white rounded-full shadow-[0_20px_50px_rgba(0,0,0,0.1)] border border-slate-100 hover:shadow-[0_30px_70px_rgba(59,130,246,0.2)] hover:border-blue-200 transition-all duration-500 transform hover:scale-110 active:scale-95\"\n                                    >\n                                        <div className=\"absolute inset-0 bg-gradient-to-b from-blue-50 to-transparent opacity-0 group-hover:opacity-100 rounded-full transition-opacity\"></div>\n                                        <ArrowRight className=\"w-12 h-12 text-blue-600 group-hover:translate-y-2 group-hover:rotate-90 transition-all duration-500 rotate-90\" />\n                                        <div className=\"absolute -inset-4 bg-blue-400/10 rounded-full animate-ping-slow\"></div>\n                                    </button>\n                                </div>\n                            )}\n                        </div>\n                    )}\n\n                    {/* 解決策セクション（条件付き表示） */}\n                    <div className={`transition-all duration-1000 transform ${showSecondHalf ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-20 pointer-events-none h-0 overflow-hidden\"}`}>\n                        <div className={`mb-20 transition-all duration-700 ${showSecondHalf ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                            <div className=\"flex items-center gap-2 mb-6\">\n                                <div className=\"h-px flex-1 bg-amber-200\"></div>\n                                <span className=\"text-xs font-black text-amber-500 uppercase tracking-widest italic\">The Solution: Step 02</span>\n                                <div className=\"h-px flex-1 bg-amber-200\"></div>\n                            </div>\n\n                            <Card className=\"border-0 shadow-2xl overflow-hidden ring-4 ring-amber-400 bg-white relative\">\n                                <div className=\"bg-gradient-to-r from-blue-950 via-blue-900 to-blue-800 p-8\">\n                                    <div className=\"flex items-center gap-6\">\n                                        <div className=\"w-16 h-16 rounded-3xl bg-amber-400 flex items-center justify-center shadow-[0_0_30px_rgba(251,189,35,0.4)] transform rotate-3\">\n                                            <TrendingUp className=\"w-10 h-10 text-blue-950\" />\n                                        </div>\n                                        <div>\n                                            <h3 className=\"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-black text-white tracking-tight leading-none drop-shadow-md whitespace-nowrap\">{(userData.name || \"あなた\")}様が投資で運用した場合のシミュレーション</h3>\n                                            <p className=\"text-blue-100 font-bold text-lg mt-2 opacity-90\">利回り20％で運用した場合の効率的な資産形成</p>\n                                        </div>\n                                        <div className=\"ml-auto hidden md:block\">\n                                            <Image src=\"/mascot/mascot_cheer_pink.png\" alt=\"\" width={100} height={100} className=\"animate-float-slow\" />\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <CardContent className=\"p-12\">\n                                    <div className=\"text-center relative\">\n                                        {/* 背景の装飾演出 */}\n                                        <div className=\"absolute -left-12 -top-12 flex flex-col items-center gap-2 animate-in fade-in slide-in-from-left-8 duration-1000 z-20\">\n                                            <div className=\"bg-white/90 backdrop-blur shadow-2xl border border-blue-100 rounded-2xl p-4 min-w-[160px] transform transition-transform cursor-default ring-4 ring-blue-500/20\">\n                                                <p className=\"text-[10px] font-black text-blue-500 uppercase tracking-widest mb-1\">Time to Goal</p>\n                                                <p className=\"text-4xl font-black text-slate-900 leading-none\">\n                                                    {(simulationResult?.achievedYear !== undefined ? simulationResult.achievedYear : userData.targetPeriod) || 0}<span className=\"text-sm ml-1\">年</span>\n                                                </p>\n                                                <p className=\"text-[10px] font-bold text-slate-400 mt-1\">目標達成までの期間</p>\n                                            </div>\n                                        </div>\n                                        <div className=\"absolute -right-20 top-1/2 -translate-y-1/2 w-64 h-64 bg-blue-500/5 blur-[80px] rounded-full\"></div>\n\n                                        <p className=\"text-xl font-black text-slate-400 mb-8 uppercase tracking-[0.3em] italic\">Projected Assets at 20% Yield</p>\n                                        <div className=\"relative inline-block mb-10\">\n                                            <p className=\"text-7xl sm:text-9xl md:text-[11rem] font-black bg-gradient-to-br from-blue-900 via-blue-800 to-amber-600 bg-clip-text text-transparent tracking-tighter py-4 leading-none\">\n                                                {formatManYen(gfsEndValue)}\n                                            </p>\n                                            <div className=\"absolute -top-6 -right-20 bg-amber-400 text-blue-950 font-black px-6 py-2 rounded-2xl text-xl shadow-2xl animate-float whitespace-nowrap\">\n                                                預金に比べて+{formatManYen(gfsEndValue - savingsEndValue)}増える！\n                                            </div>\n                                        </div>\n\n\n                                        <div className=\"mt-8 text-center\">\n                                            <p className=\"text-slate-400 text-xs font-medium leading-relaxed max-w-2xl mx-auto opacity-70\">\n                                                ※本シミュレーションは独自の分析手法に基づき、資産運用の最適化を行った場合の論理的数値を算出しています。<br />\n                                                過去の実績データをベースにしていますが、将来の成果を保証するものではありません。\n                                            </p>\n                                        </div>\n                                    </div>\n                                </CardContent>\n                            </Card>\n\n                            <div className=\"mt-12 group\">\n                                <Card className=\"border-0 shadow-2xl bg-slate-950 p-10 overflow-hidden relative\">\n                                    <div className=\"absolute top-0 right-0 w-64 h-64 bg-amber-500/10 blur-[100px] rounded-full\"></div>\n                                    <div className=\"absolute bottom-0 left-0 w-64 h-64 bg-blue-500/5 blur-[100px] rounded-full\"></div>\n\n                                    <div className=\"flex items-center justify-between mb-8 relative z-10\">\n                                        <h4 className=\"text-white font-black text-xl flex items-center gap-3\">\n                                            <TrendingUp className=\"text-amber-400 w-6 h-6\" />\n                                            目標達成までの資産推移グラフ\n                                        </h4>\n                                        <span className=\"text-slate-500 text-sm font-bold uppercase tracking-widest\">Compound Interest Effect</span>\n                                    </div>\n\n                                    <div className=\"h-[400px] md:h-[550px] relative z-10\">\n                                        <ResponsiveContainer width=\"100%\" height=\"100%\">\n                                            <AreaChart data={chartData} margin={{ top: 20, right: 30, left: 0, bottom: 0 }}>\n                                                <defs>\n                                                    <linearGradient id=\"colorGfsGolden\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                        <stop offset=\"5%\" stopColor=\"#FBBD23\" stopOpacity={0.8} />\n                                                        <stop offset=\"95%\" stopColor=\"#FBBD23\" stopOpacity={0.1} />\n                                                    </linearGradient>\n                                                    <linearGradient id=\"colorTrust\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                        <stop offset=\"5%\" stopColor=\"#10B981\" stopOpacity={0.3} />\n                                                        <stop offset=\"95%\" stopColor=\"#10B981\" stopOpacity={0.0} />\n                                                    </linearGradient>\n                                                    <linearGradient id=\"colorStocks\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                        <stop offset=\"5%\" stopColor=\"#A855F7\" stopOpacity={0.3} />\n                                                        <stop offset=\"95%\" stopColor=\"#A855F7\" stopOpacity={0.0} />\n                                                    </linearGradient>\n                                                    <filter id=\"shadow\" height=\"200%\">\n                                                        <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"12\" result=\"blur\" />\n                                                        <feOffset in=\"blur\" dx=\"0\" dy=\"12\" result=\"offsetBlur\" />\n                                                        <feMerge>\n                                                            <feMergeNode />\n                                                            <feMergeNode in=\"SourceGraphic\" />\n                                                        </feMerge>\n                                                    </filter>\n                                                </defs>\n                                                <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#1E293B\" opacity={0.3} />\n                                                <XAxis dataKey=\"year\" tickFormatter={(v) => `${v}年`} stroke=\"#475569\" fontSize={12} tick={{ fill: '#64748B' }} />\n                                                <YAxis\n                                                    domain={[0, userData.targetAmount / 0.8]}\n                                                    allowDataOverflow={true}\n                                                    tickFormatter={(v) => `${(v / 10000).toLocaleString()}万`}\n                                                    stroke=\"#475569\"\n                                                    fontSize={12}\n                                                    tick={{ fill: '#64748B' }}\n                                                />\n                                                <Tooltip\n                                                    contentStyle={{ backgroundColor: '#0F172A', border: '1px solid #1E293B', borderRadius: '1.5rem', padding: '1.5rem', boxShadow: '0 20px 25px -5px rgba(0, 0, 0, 0.5)' }}\n                                                    itemStyle={{ fontWeight: 'black', fontSize: '1rem' }}\n                                                    labelStyle={{ color: '#94A3B8', marginBottom: '0.75rem', fontWeight: 'bold' }}\n                                                    formatter={(v: any, name?: string) => {\n                                                        const labelMap: Record<string, string> = {\n                                                            gfs: `投資を行った場合 (${formatPercent(simulationResult?.gfsAnnualRate || 0)})`,\n                                                            savings: '預金のみ (0.2%)'\n                                                        };\n                                                        return [`${(v / 10000).toLocaleString()}万円`, labelMap[name as string] || name];\n                                                    }}\n                                                    labelFormatter={(l) => `${l}年目`}\n                                                />\n                                                <Area\n                                                    name=\"投資を行った場合\"\n                                                    type=\"monotone\"\n                                                    dataKey=\"gfs\"\n                                                    stroke=\"#FBBD23\"\n                                                    strokeWidth={5}\n                                                    fill=\"transparent\"\n                                                    animationDuration={3000}\n                                                    filter=\"url(#shadow)\"\n                                                />\n                                                <Area\n                                                    name=\"savings\"\n                                                    type=\"monotone\"\n                                                    dataKey=\"savings\"\n                                                    stroke=\"#ef4444\"\n                                                    strokeWidth={2}\n                                                    fill=\"transparent\"\n                                                    strokeDasharray=\"8 4\"\n                                                />\n                                                <ReferenceLine y={userData.targetAmount} stroke=\"#94A3B8\" strokeWidth={1} strokeDasharray=\"12 6\" label={{ value: \"TARGET GOAL\", position: \"top\", fill: \"#94A3B8\", fontWeight: \"900\", letterSpacing: \"3px\", fontSize: \"14px\" }} />\n                                            </AreaChart>\n                                        </ResponsiveContainer>\n                                    </div>\n\n                                    <div className=\"mt-12 flex flex-wrap justify-center gap-8 relative z-10 border-t border-slate-700/50 pt-10\">\n                                        <div className=\"flex items-center gap-3 bg-slate-900/50 px-4 py-2 rounded-xl border border-amber-400/20\">\n                                            <div className=\"w-4 h-4 bg-amber-400 rounded shadow-[0_0_15px_rgba(251,189,35,0.6)]\"></div>\n                                            <span className=\"text-amber-100 font-bold text-sm\">投資を行った場合 ({formatPercent(simulationResult?.gfsAnnualRate || 0)})</span>\n                                        </div>\n                                        <div className=\"flex items-center gap-3 bg-red-500/10 px-4 py-2 rounded-xl border border-red-500/20\">\n                                            <div className=\"w-4 h-1 border-t-2 border-red-500 border-dashed\"></div>\n                                            <span className=\"text-red-500 font-bold text-sm\">預金 (0.2%)</span>\n                                        </div>\n                                    </div>\n                                </Card>\n                            </div>\n\n                            {/* 将来の資産形成についてのメッセージ */}\n                            <div className=\"mt-24 mb-16 text-center max-w-4xl mx-auto px-4\">\n                                <h2 className=\"text-3xl md:text-5xl font-black text-slate-900 mb-8 leading-tight tracking-tight\">\n                                    将来の資産形成において、一番の武器は<br className=\"hidden md:block\" />\n                                    『正しい知識』と『時間』の活用です。\n                                </h2>\n                                <p className=\"text-xl text-slate-600 font-medium leading-relaxed\">\n                                    お金を預けるだけの時代は終わり、自分自身で賢く運用する力が求められています。<br className=\"hidden md:block\" />\n                                    投資は難しいものではなく、正しく学べば誰にでも武器になります。\n                                </p>\n                            </div>\n\n                            {/* カスタムインサイトスライドセクション */}\n                            <div className=\"mb-20 max-w-5xl mx-auto px-4\">\n                                <Card className=\"border-0 shadow-[0_50px_100px_rgba(0,0,0,0.1)] rounded-[3rem] overflow-hidden bg-white h-[750px] flex flex-col\">\n                                    <div className=\"flex-1 p-8 md:p-12 flex flex-col h-full overflow-hidden\">\n                                        {/* スライド共通ヘッダー - スライド1のみ表示 */}\n                                        {activeInsightSlide === 0 && (\n                                            <div className=\"flex justify-between items-start mb-8 border-b-2 border-blue-900 pb-4 shrink-0\">\n                                                <h3 className=\"text-2xl md:text-3xl font-black text-blue-900 tracking-tight flex-1\">\n                                                    投資で年利20%は難しい？\n                                                </h3>\n                                                <div className=\"flex items-center gap-2\">\n                                                    <div className=\"w-8 h-8 rounded-lg bg-blue-900 flex items-center justify-center p-1.5\">\n                                                        <Sparkles className=\"text-white w-full h-full\" />\n                                                    </div>\n                                                    <span className=\"font-black text-blue-900 text-xl tracking-tighter\">GFS</span>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {/* スライドメイン（スクロール可能エリア） */}\n                                        <div className=\"flex-1 overflow-y-auto pr-2 custom-scrollbar p-6\">\n                                            {activeInsightSlide === 0 ? (\n                                                <div className=\"animate-in fade-in slide-in-from-right-8 duration-700 space-y-12\">\n                                                    <div className=\"text-center\">\n                                                        <h4 className=\"text-2xl md:text-4xl font-black text-blue-950 mb-3\">\n                                                            1年間で年利20%以上となった銘柄数\n                                                        </h4>\n                                                    </div>\n\n                                                    <div className=\"max-w-4xl mx-auto w-full py-4 space-y-10\">\n                                                        {/* 2023年データ */}\n                                                        <div className=\"relative flex flex-col md:flex-row items-center justify-start gap-4 md:gap-8 px-4\">\n                                                            <div className=\"bg-[#0a2357] text-white px-6 py-2 rounded-sm font-black text-xl md:text-3xl shrink-0 tracking-tighter\">\n                                                                2023年\n                                                            </div>\n                                                            <div className=\"flex items-baseline flex-nowrap gap-1 md:gap-2\">\n                                                                <span className=\"text-5xl md:text-7xl font-black text-[#0a2357] tracking-tighter\">1,500</span>\n                                                                <span className=\"text-lg md:text-xl font-black text-[#0a2357] mr-1\">銘柄</span>\n                                                                <div className=\"h-12 md:h-16 w-[2px] bg-slate-400 rotate-[25deg] mx-2 md:mx-6\"></div>\n                                                                <span className=\"text-xs md:text-base font-bold text-[#0a2357] self-center mr-1\">約</span>\n                                                                <span className=\"text-4xl md:text-6xl font-black text-[#0a2357] tracking-tighter\">4,000</span>\n                                                                <span className=\"text-lg md:text-xl font-black text-[#0a2357]\">銘柄</span>\n                                                            </div>\n                                                            <div className=\"md:absolute md:-top-10 md:right-0 bg-[#5d8233] text-white px-6 py-2 rounded-xl text-xl md:text-3xl font-black shadow-lg animate-bounce-gentle\">\n                                                                約3社に1社！\n                                                            </div>\n                                                        </div>\n\n                                                        {/* 2024年データ */}\n                                                        <div className=\"relative flex flex-col md:flex-row items-center justify-start gap-4 md:gap-8 px-4 pt-4\">\n                                                            <div className=\"bg-[#0a2357] text-white px-6 py-2 rounded-sm font-black text-xl md:text-3xl shrink-0 tracking-tighter\">\n                                                                2024年\n                                                            </div>\n                                                            <div className=\"flex items-baseline flex-nowrap gap-1 md:gap-2\">\n                                                                <span className=\"text-5xl md:text-7xl font-black text-[#0a2357] tracking-tighter\">911</span>\n                                                                <span className=\"text-lg md:text-xl font-black text-[#0a2357] mr-1\">銘柄</span>\n                                                                <div className=\"h-12 md:h-16 w-[2px] bg-slate-400 rotate-[25deg] mx-2 md:mx-6\"></div>\n                                                                <span className=\"text-xs md:text-base font-bold text-[#0a2357] self-center mr-1\">約</span>\n                                                                <span className=\"text-4xl md:text-6xl font-black text-[#0a2357] tracking-tighter\">4,000</span>\n                                                                <span className=\"text-lg md:text-xl font-black text-[#0a2357]\">銘柄</span>\n                                                            </div>\n                                                            <div className=\"md:absolute md:-top-4 md:right-0 bg-[#e86a04] text-white px-6 py-2 rounded-xl text-xl md:text-3xl font-black shadow-lg animate-bounce-gentle\">\n                                                                約4.5社に1社！\n                                                            </div>\n                                                        </div>\n\n                                                        {/* 注釈 */}\n                                                        <div className=\"text-right text-[#0a2357] text-sm md:text-lg font-bold pr-4 mt-8 opacity-80\">\n                                                            ※上記は各年の1月1日と12月31日を比較した結果\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            ) : activeInsightSlide === 1 ? (\n                                                <div className=\"w-full h-full flex flex-col items-center justify-center p-4 min-h-[400px]\">\n                                                    <img src=\"/case-studies/slide2.png\" alt=\"LINEヤフー 事例\" className=\"max-w-full max-h-full object-contain rounded-2xl shadow-xl flex-1\" />\n                                                </div>\n                                            ) : activeInsightSlide === 2 ? (\n                                                <div className=\"w-full h-full flex flex-col items-center justify-center p-4 min-h-[400px]\">\n                                                    <img src=\"/case-studies/slide3.png\" alt=\"サンリオ 事例\" className=\"max-w-full max-h-full object-contain rounded-2xl shadow-xl flex-1\" />\n                                                </div>\n                                            ) : activeInsightSlide === 3 ? (\n                                                <div className=\"w-full h-full flex flex-col items-center justify-center p-4 min-h-[400px]\">\n                                                    <img src=\"/case-studies/slide4.png\" alt=\"スシロー 事例\" className=\"max-w-full max-h-full object-contain rounded-2xl shadow-xl flex-1\" />\n                                                </div>\n                                            ) : activeInsightSlide === 4 ? (\n                                                <div className=\"w-full h-full flex flex-col items-center justify-center p-4 min-h-[400px]\">\n                                                    <img src=\"/case-studies/slide5.png\" alt=\"良品計画 事例\" className=\"max-w-full max-h-full object-contain rounded-2xl shadow-xl flex-1\" />\n                                                </div>\n                                            ) : (\n                                                <div className=\"flex flex-col items-center justify-center h-full text-center py-20\">\n                                                    <Sparkles className=\"w-12 h-12 text-blue-900/20 mb-4\" />\n                                                    <h3 className=\"text-2xl font-black text-slate-300\">スライド準備中</h3>\n                                                </div>\n                                            )}\n                                        </div>\n\n                                        {/* スライド共通フッター */}\n                                        <div className=\"mt-8 pt-6 border-t border-slate-100 flex flex-col md:flex-row justify-between items-center gap-6 shrink-0\">\n                                            {activeInsightSlide === 0 ? (\n                                                <p className=\"text-blue-900 font-bold text-sm md:text-base italic opacity-70\">\n                                                    ※上記は各年の1月1日と12月31日を比較した結果\n                                                </p>\n                                            ) : (\n                                                <div className=\"flex-1\"></div>\n                                            )}\n                                            <div className=\"flex items-center gap-4\">\n                                                <div className=\"flex gap-2 mr-4\">\n                                                    {[0, 1, 2, 3, 4].map(i => (\n                                                        <button\n                                                            key={i}\n                                                            onClick={() => {\n                                                                setActiveInsightSlide(i);\n                                                                onSubStepChange?.(`insight-${i}`);\n                                                            }}\n                                                            className={`w-2.5 h-2.5 rounded-full transition-all duration-300 ${activeInsightSlide === i ? \"bg-blue-900 w-8\" : \"bg-slate-200 hover:bg-slate-300\"}`}\n                                                        />\n                                                    ))}\n                                                </div>\n                                                <div className=\"flex gap-3\">\n                                                    <Button\n                                                        variant=\"outline\"\n                                                        size=\"sm\"\n                                                        disabled={activeInsightSlide === 0}\n                                                        onClick={() => {\n                                                            const newSlide = Math.max(0, activeInsightSlide - 1);\n                                                            setActiveInsightSlide(newSlide);\n                                                            onSubStepChange?.(`insight-${newSlide}`);\n                                                        }}\n                                                        className=\"rounded-full border-2 border-slate-200 text-slate-400 hover:text-blue-900 hover:border-blue-900 transition-all p-0 w-12 h-12 shadow-sm\"\n                                                    >\n                                                        <ChevronLeft className=\"w-6 h-6\" />\n                                                    </Button>\n                                                    <Button\n                                                        variant=\"outline\"\n                                                        size=\"sm\"\n                                                        disabled={activeInsightSlide === 4}\n                                                        onClick={() => {\n                                                            const newSlide = Math.min(4, activeInsightSlide + 1);\n                                                            setActiveInsightSlide(newSlide);\n                                                            onSubStepChange?.(`insight-${newSlide}`);\n                                                        }}\n                                                        className=\"rounded-full border-2 border-blue-900 text-blue-900 bg-white hover:bg-blue-50 shadow-lg shadow-blue-900/10 transition-all font-black p-0 w-12 h-12\"\n                                                    >\n                                                        <ArrowRight className=\"w-6 h-6\" />\n                                                    </Button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </Card>\n                            </div>\n                        </div>\n\n                        {/* 独立した必要利回りセクション */}\n                        <div className=\"mb-12 text-center\">\n                            <div className=\"inline-flex items-center gap-3 px-6 py-2 bg-blue-50 rounded-full border border-blue-100 mb-8 shadow-sm\">\n                                <Target className=\"w-5 h-5 text-blue-600\" />\n                                <span className=\"text-blue-900 font-black tracking-widest uppercase text-sm\">Vital Condition</span>\n                            </div>\n\n                            <div className=\"max-w-4xl mx-auto px-4\">\n                                {!showRequiredRate ? (\n                                    <button\n                                        onClick={() => setShowRequiredRate(true)}\n                                        className=\"w-full bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 p-12 md:p-16 rounded-[4rem] border-8 border-white shadow-[0_40px_80px_-20px_rgba(15,23,42,0.4)] relative overflow-hidden group transition-all hover:scale-[1.01] hover:shadow-[0_50px_100px_-20px_rgba(30,58,138,0.5)] active:scale-95\"\n                                    >\n                                        <div className=\"absolute inset-0 bg-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity\"></div>\n                                        <div className=\"relative z-10\">\n                                            <div className=\"w-24 h-24 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-6 ring-4 ring-blue-500/30 animate-pulse\">\n                                                <LockIcon className=\"w-10 h-10 text-blue-400\" />\n                                            </div>\n                                            <p className=\"text-blue-100 font-black text-2xl tracking-[0.05em] mb-2 drop-shadow-lg\">\n                                                {userData.name}様の目標達成のための実際の利回りとは？\n                                            </p>\n                                            <div className=\"flex items-center justify-center gap-2 text-blue-400/80 font-bold uppercase tracking-widest text-xs\">\n                                                <Sparkles className=\"w-4 h-4\" />\n                                                <span>Reveal Required Annual Rate</span>\n                                                <Sparkles className=\"w-4 h-4\" />\n                                            </div>\n                                        </div>\n                                    </button>\n                                ) : (\n                                    <div className=\"bg-gradient-to-br from-blue-600 via-indigo-700 to-blue-800 p-12 md:p-16 rounded-[4rem] border-8 border-white shadow-[0_40px_80px_-20px_rgba(30,58,138,0.4)] relative overflow-hidden animate-in zoom-in-95 fade-in duration-700\">\n                                        {/* 装飾用背景 */}\n                                        <div className=\"absolute top-0 left-0 w-full h-full bg-[url('/mascot/mascot_search.png')] bg-no-repeat bg-[length:300px] opacity-[0.03] -rotate-12 translate-x-[-10%] translate-y-[20%]\"></div>\n                                        <div className=\"absolute top-0 right-0 w-full h-full bg-gradient-to-br from-white/10 to-transparent pointer-events-none\"></div>\n\n                                        <div className=\"relative z-10\">\n                                            <p className=\"text-blue-100 font-bold mb-6 text-xl tracking-wider\">Required Rate</p>\n                                            <div className=\"flex flex-col md:flex-row items-center justify-center gap-4 mb-6\">\n                                                <p className=\"text-8xl md:text-[11rem] font-black text-white tracking-tighter leading-none drop-shadow-2xl\">\n                                                    {formatPercent(requiredAnnualRate)}\n                                                </p>\n                                            </div>\n                                            <div className=\"inline-flex items-center gap-2 px-8 py-3 bg-white/10 backdrop-blur-md rounded-2xl border border-white/20\">\n                                                <span className=\"text-white text-xl md:text-2xl font-black\">{userData.name}様の目標達成に必要な利回り</span>\n                                            </div>\n                                        </div>\n\n                                        {/* インパクトのある光の演出 */}\n                                        <div className=\"absolute -top-20 -left-20 w-80 h-80 bg-blue-400/20 blur-[100px] rounded-full\"></div>\n                                        <div className=\"absolute -bottom-20 -right-20 w-80 h-80 bg-indigo-400/20 blur-[100px] rounded-full\"></div>\n                                    </div>\n                                )}\n\n                                <p className=\"mt-8 text-slate-500 font-bold text-lg leading-relaxed\">\n                                    この利回りを確保することが、ゴールへの最短ルートとなります。<br className=\"hidden md:block\" />\n                                    学びと実践によって、この数字を「確かな現実」へと変えていきましょう。\n                                </p>\n                            </div>\n                        </div>\n\n\n                        {!showRequiredGraph ? (\n                            <div className=\"mt-12 flex justify-center\">\n                                <button\n                                    onClick={() => setShowRequiredGraph(true)}\n                                    className=\"w-full bg-slate-950 p-12 md:p-16 rounded-[4rem] border-4 border-slate-800 shadow-[0_20px_50px_rgba(0,0,0,0.3)] relative overflow-hidden group transition-all hover:scale-[1.01] active:scale-95\"\n                                >\n                                    <div className=\"absolute inset-0 bg-blue-500/5 animate-pulse\"></div>\n                                    <div className=\"relative z-10 flex flex-col items-center gap-6\">\n                                        <div className=\"w-20 h-20 bg-blue-500/20 rounded-full flex items-center justify-center ring-4 ring-blue-500/40 animate-pulse shadow-[0_0_30px_rgba(59,130,246,0.4)]\">\n                                            <BarChart3 className=\"w-10 h-10 text-blue-400\" />\n                                        </div>\n                                        <p className=\"text-blue-100 font-black text-2xl tracking-[0.2em] drop-shadow-lg\">\n                                            グラフで表示\n                                        </p>\n                                    </div>\n                                </button>\n                            </div>\n                        ) : (\n                            <div className=\"mt-12 group animate-in zoom-in-95 fade-in duration-700\">\n                                <Card className=\"border-0 shadow-2xl bg-slate-950 p-10 overflow-hidden relative\">\n                                    <div className=\"absolute top-0 right-0 w-64 h-64 bg-blue-500/10 blur-[100px] rounded-full\"></div>\n                                    <div className=\"absolute bottom-0 left-0 w-64 h-64 bg-indigo-500/5 blur-[100px] rounded-full\"></div>\n\n                                    <div className=\"flex items-center justify-between mb-8 relative z-10\">\n                                        <h4 className=\"text-white font-black text-xl flex items-center gap-3\">\n                                            <Target className=\"text-blue-400 w-6 h-6\" />\n                                            {userData.name}様に必要な利回りでの資産推移グラフ\n                                        </h4>\n                                        <button\n                                            onClick={() => setShowRequiredGraph(false)}\n                                            className=\"bg-slate-800/50 hover:bg-slate-700 text-slate-400 hover:text-white px-4 py-2 rounded-xl text-xs font-bold transition-colors uppercase tracking-widest border border-slate-700\"\n                                        >\n                                            CLOSE\n                                        </button>\n                                    </div>\n\n                                    <div className=\"h-[400px] md:h-[550px] relative z-10\">\n                                        <ResponsiveContainer width=\"100%\" height=\"100%\">\n                                            <AreaChart data={simulationResult.fullChartData} margin={{ top: 20, right: 30, left: 0, bottom: 0 }}>\n                                                <defs>\n                                                    <linearGradient id=\"colorRequired\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                        <stop offset=\"5%\" stopColor=\"#3B82F6\" stopOpacity={0.8} />\n                                                        <stop offset=\"95%\" stopColor=\"#3B82F6\" stopOpacity={0.1} />\n                                                    </linearGradient>\n                                                    <linearGradient id=\"colorGfsGolden\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                        <stop offset=\"5%\" stopColor=\"#FBBD23\" stopOpacity={0.3} />\n                                                        <stop offset=\"95%\" stopColor=\"#FBBD23\" stopOpacity={0.0} />\n                                                    </linearGradient>\n                                                </defs>\n                                                <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#1E293B\" opacity={0.3} />\n                                                <XAxis dataKey=\"year\" tickFormatter={(v) => `${v}年`} stroke=\"#475569\" fontSize={12} tick={{ fill: '#64748B' }} />\n                                                <YAxis\n                                                    domain={[0, userData.targetAmount / 0.8]}\n                                                    allowDataOverflow={true}\n                                                    tickFormatter={(v) => `${(v / 10000).toLocaleString()}万`}\n                                                    stroke=\"#475569\"\n                                                    fontSize={12}\n                                                    tick={{ fill: '#64748B' }}\n                                                />\n                                                <Tooltip\n                                                    contentStyle={{ backgroundColor: '#0F172A', border: '1px solid #1E293B', borderRadius: '1.5rem', padding: '1.5rem', boxShadow: '0 20px 25px -5px rgba(0, 0, 0, 0.5)' }}\n                                                    itemStyle={{ fontWeight: 'black', fontSize: '1rem' }}\n                                                    labelStyle={{ color: '#94A3B8', marginBottom: '0.75rem', fontWeight: 'bold' }}\n                                                    formatter={(v: any, name?: string) => {\n                                                        const labelMap: Record<string, string> = {\n                                                            required: `目標達成に必要な年利 (${formatPercent(simulationResult.requiredAnnualRate)})`,\n                                                            gfs: '20%で投資を運用した場合',\n                                                            savings: '預金 (0.2%)'\n                                                        };\n                                                        return [`${(v / 10000).toLocaleString()}万円`, labelMap[name as string] || name];\n                                                    }}\n                                                    labelFormatter={(l) => `${l}年目`}\n                                                />\n                                                <Area\n                                                    name=\"required\"\n                                                    type=\"monotone\"\n                                                    dataKey=\"required\"\n                                                    stroke=\"#3B82F6\"\n                                                    strokeWidth={5}\n                                                    fill=\"transparent\"\n                                                    animationDuration={3000}\n                                                />\n                                                <Area\n                                                    name=\"gfs\"\n                                                    type=\"monotone\"\n                                                    dataKey=\"gfs\"\n                                                    stroke=\"#FBBD23\"\n                                                    strokeWidth={2}\n                                                    fill=\"url(#colorGfsGolden)\"\n                                                    fillOpacity={0.6}\n                                                    animationDuration={2500}\n                                                />\n                                                <Area\n                                                    name=\"savings\"\n                                                    type=\"monotone\"\n                                                    dataKey=\"savings\"\n                                                    stroke=\"#ef4444\"\n                                                    strokeWidth={2}\n                                                    fill=\"transparent\"\n                                                    strokeDasharray=\"8 4\"\n                                                />\n                                                <ReferenceLine y={userData.targetAmount} stroke=\"#94A3B8\" strokeWidth={1} strokeDasharray=\"12 6\" label={{ value: \"TARGET GOAL\", position: \"top\", fill: \"#94A3B8\", fontWeight: \"900\", letterSpacing: \"3px\", fontSize: \"14px\" }} />\n                                            </AreaChart>\n                                        </ResponsiveContainer>\n                                    </div>\n\n                                    <div className=\"mt-12 flex flex-wrap justify-center gap-8 relative z-10 border-t border-slate-700/50 pt-10\">\n                                        <div className=\"flex items-center gap-3 bg-slate-900/50 px-4 py-2 rounded-xl border border-blue-400/20\">\n                                            <div className=\"w-4 h-4 bg-blue-500 rounded shadow-[0_0_15px_rgba(59,130,246,0.6)]\"></div>\n                                            <span className=\"text-blue-100 font-bold text-sm\">目標達成に必要な年利 ({formatPercent(simulationResult.requiredAnnualRate)})</span>\n                                        </div>\n                                        <div className=\"flex items-center gap-3 bg-slate-900/50 px-4 py-2 rounded-xl border border-amber-400/20\">\n                                            <div className=\"w-4 h-4 bg-amber-400 rounded shadow-[0_0_15px_rgba(251,189,35,0.6)]\"></div>\n                                            <span className=\"text-amber-100 font-bold text-sm\">20%で投資を運用した場合</span>\n                                        </div>\n                                        <div className=\"flex items-center gap-3 bg-red-500/10 px-4 py-2 rounded-xl border border-red-500/20\">\n                                            <div className=\"w-4 h-1 border-t-2 border-red-500 border-dashed\"></div>\n                                            <span className=\"text-red-500 font-bold text-sm\">預金 (0.2%)</span>\n                                        </div>\n                                    </div>\n                                </Card>\n                            </div>\n                        )}\n\n                        <div className={`mt-24 transition-all duration-1000 ${showSecondHalf ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-20\"}`}>\n\n\n                            <Card className=\"border-0 shadow-[0_30px_60px_-15px_rgba(0,0,0,0.1)] bg-white text-slate-800 mb-16 overflow-hidden rounded-[3rem]\">\n                                <CardContent className=\"py-20 px-10 relative\">\n                                    {/* マスコット：不安・考え中 */}\n                                    <div className=\"absolute top-0 left-0 hidden lg:block p-8 transform -translate-x-4 -translate-y-1 opacity-30\">\n                                        <Image src=\"/mascot/mascot_thinking.png\" alt=\"\" width={200} height={200} className=\"animate-float-slow\" />\n                                    </div>\n\n                                    {/* マスコット：応援 */}\n                                    <div className=\"absolute bottom-0 right-0 hidden lg:block p-8 transform translate-x-4 translate-y-8 opacity-30\">\n                                        <Image src=\"/mascot/mascot_happy.png\" alt=\"\" width={220} height={220} className=\"animate-float-slow\" />\n                                    </div>\n\n                                    <div className=\"text-center relative z-10\">\n                                        <div className=\"inline-flex items-center justify-center p-5 bg-green-50 rounded-3xl mb-8\">\n                                            <CheckCircle className=\"w-14 h-14 text-green-600 animate-bounce-gentle\" />\n                                        </div>\n                                        <h3 className=\"text-3xl md:text-5xl font-black mb-12 text-slate-950 leading-tight\">\n                                            「でも、具体的に何から始めればいいの？」<br />\n                                            「どうやって失敗せずに済むの？」\n                                        </h3>\n\n                                        <Button\n                                            onClick={onNext}\n                                            size=\"lg\"\n                                            className=\"relative bg-blue-950 text-white hover:bg-black min-w-[420px] text-2xl h-20 rounded-full shadow-[0_20px_40px_-10px_rgba(0,40,100,0.3)] transform transition-all hover:scale-105 hover:shadow-[0_25px_50px_-12px_rgba(0,40,100,0.4)] group overflow-hidden\"\n                                        >\n                                            <span className=\"relative z-10\">投資ができるようになる為には？</span>\n                                            {/* 高級感を出すためのスイープ（シマー）エフェクト */}\n                                            <div className=\"absolute inset-0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700 bg-gradient-to-r from-transparent via-white/10 to-transparent pointer-events-none\" />\n                                        </Button>\n                                    </div>\n                                </CardContent>\n                            </Card>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div >\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/Phase4Solution.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Card' is defined but never used.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Card"},"fix":{"range":[173,178],"text":""},"desc":"Remove unused variable \"Card\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardContent' is defined but never used.","line":6,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":27,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"CardContent"},"fix":{"range":[164,221],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'GraduationCap' is defined but never used.","line":8,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":18,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"GraduationCap"},"fix":{"range":[235,249],"text":""},"desc":"Remove unused variable \"GraduationCap\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":8,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":55,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TrendingUp"},"fix":{"range":[273,285],"text":""},"desc":"Remove unused variable \"TrendingUp\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'HelpCircle' is defined but never used.","line":9,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":64,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"HelpCircle"},"fix":{"range":[346,358],"text":""},"desc":"Remove unused variable \"HelpCircle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Sparkles' is defined but never used.","line":10,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":49,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Sparkles"},"fix":{"range":[398,408],"text":""},"desc":"Remove unused variable \"Sparkles\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used.","line":10,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":56,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Users"},"fix":{"range":[408,415],"text":""},"desc":"Remove unused variable \"Users\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'simulationResult' is defined but never used.","line":25,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":68},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showContent' is assigned a value but never used.","line":26,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":23},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/Phase4Solution.tsx:37:9\n  35 |\n  36 |     useEffect(() => {\n> 37 |         setShowContent(true);\n     |         ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  38 |     }, []);\n  39 |\n  40 |     const nextSection = () => {","line":37,"column":9,"nodeType":null,"endLine":37,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'nextSection' is assigned a value but never used.","line":40,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { UserInput, SimulationResult } from \"@/types\";\nimport { Button } from \"@/components/ui/Button\";\nimport { Card, CardContent } from \"@/components/ui/Card\";\nimport {\n    GraduationCap, CheckCircle, ArrowRight, TrendingUp, Target,\n    Lightbulb, ChevronLeft, FileText, AlertTriangle, HelpCircle,\n    UserX, UserCheck, Zap, Layers, Map, Sparkles, Users, X, ArrowLeftRight, Car\n} from \"lucide-react\";\nimport Image from \"next/image\";\n\ninterface Phase4SolutionProps {\n    userData: UserInput;\n    simulationResult?: SimulationResult;\n    onNext?: () => void;\n    onBack?: () => void;\n    onGoToAgenda?: () => void;\n    onSubStepChange?: (subStep: number | string) => void;\n    subStep?: number | string;\n    isPreview?: boolean;\n}\n\nexport default function Phase4Solution({ userData, simulationResult, onNext, onBack, onGoToAgenda, onSubStepChange, subStep, isPreview = false }: Phase4SolutionProps) {\n    const [showContent, setShowContent] = useState(isPreview);\n    const [activeSection, setActiveSection] = useState(isPreview && typeof subStep === 'number' ? subStep : 0);\n    const [showGoalDetail, setShowGoalDetail] = useState(false);\n    const [showPracticeDetail, setShowPracticeDetail] = useState(false);\n    const [showComparison, setShowComparison] = useState(false);\n    const [showLicenseMetaphor, setShowLicenseMetaphor] = useState(false);\n    const [showLearningComparison, setShowLearningComparison] = useState(false);\n    const [revealedBad, setRevealedBad] = useState(false);\n    const [revealedGood, setRevealedGood] = useState(false);\n\n    useEffect(() => {\n        setShowContent(true);\n    }, []);\n\n    const nextSection = () => {\n        if (activeSection < 4) { // Assuming 5 sections total based on common pattern, or use sections.length if available\n            const next = activeSection + 1;\n            setActiveSection(next);\n            onSubStepChange?.(next);\n        } else {\n            onNext?.();\n        }\n    };\n\n    const prevSection = () => {\n        if (activeSection > 0) {\n            const prev = activeSection - 1;\n            setActiveSection(prev);\n            onSubStepChange?.(prev);\n        } else {\n            onBack?.();\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen relative overflow-hidden bg-white\">\n            {/* ナビゲーション */}\n            <div className=\"fixed top-0 left-0 w-full z-50 bg-white/80 backdrop-blur-md border-b border-slate-100 py-3 px-6 flex justify-between items-center\">\n                <div className=\"flex items-center gap-6\">\n                    <Button variant=\"ghost\" size=\"sm\" onClick={prevSection} className=\"text-slate-600\">\n                        <ChevronLeft className=\"w-4 h-4 mr-1\" /> {activeSection === 0 ? \"戻る\" : \"前へ\"}\n                    </Button>\n                    <div className=\"flex items-center gap-3 border-l border-slate-200 pl-6 h-8\">\n                        <Image src=\"/images/gfs_logo_navy.png\" alt=\"GFS\" width={60} height={60} className=\"object-contain\" />\n                        <span className=\"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em] hidden sm:inline\">Consulting AI</span>\n                    </div>\n                </div>\n                <div className=\"flex gap-2\">\n                    <div className=\"w-8 h-2 rounded-full bg-blue-600 transition-all duration-300\" />\n                </div>\n                <Button variant=\"ghost\" size=\"sm\" onClick={onGoToAgenda} className=\"text-slate-600\">\n                    <FileText className=\"w-4 h-4 mr-1\" /> 目次\n                </Button>\n            </div>\n\n            <div className=\"pt-24 pb-12 px-6 max-w-5xl mx-auto min-h-screen flex flex-col items-center justify-center\">\n\n                {/* SECTION 0: 3 Points (Slide 1) */}\n                {activeSection === 0 && (\n                    <div className=\"w-full animate-in fade-in slide-in-from-bottom-8 duration-1000\">\n                        <div className=\"text-center mb-12\">\n                            <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-slate-900/5 backdrop-blur rounded-full mb-6 ring-1 ring-slate-900/10\">\n                                <span className=\"text-blue-600 font-bold\">Section 03</span>\n                                <span className=\"text-slate-400\">/</span>\n                                <span className=\"text-slate-900\">{(userData?.name ? `${userData.name}様` : \"あなた\")}に合う投資</span>\n                            </div>\n                            <h2 className=\"text-3xl md:text-4xl lg:text-5xl font-black text-slate-900 leading-tight mb-8 whitespace-nowrap\">\n                                目標を達成するための本質的な3つのポイント\n                            </h2>\n                            <p className=\"text-slate-500 font-medium max-w-2xl mx-auto mb-10 text-lg\">\n                                資産運用の差を埋め、確実にゴールへ辿り着くために、<br className=\"hidden md:inline\" />プロが重要視する「成功の鉄則」をお伝えします。\n                            </p>\n                        </div>\n\n                        <div className=\"relative py-12 flex flex-col items-center\">\n                            {/* 三角形の図解 */}\n                            <div className=\"relative w-full max-w-md aspect-square\">\n                                <svg className=\"absolute inset-0 w-full h-full text-blue-900\" viewBox=\"0 0 100 100\">\n                                    <polygon points=\"50,15 85,85 15,85\" fill=\"currentColor\" />\n                                    <polygon points=\"50,28 78,80 22,80\" fill=\"white\" />\n                                </svg>\n\n                                {/* ①ゴールを決める */}\n                                <div\n                                    className=\"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center text-center w-64 cursor-pointer group/goal transform hover:-translate-y-1 transition-all duration-300\"\n                                    onClick={() => setShowGoalDetail(true)}\n                                >\n                                    <div className=\"w-20 h-20 rounded-full bg-white shadow-2xl border-4 border-slate-100 flex items-center justify-center mb-4 transition-all group/icon-container\">\n                                        <div className=\"absolute inset-0 rounded-full bg-blue-600 opacity-0 group-hover/goal:opacity-10 transition-opacity group-hover/goal:animate-ping\" />\n                                        <Target className=\"w-10 h-10 text-blue-900 group-hover/goal:text-blue-600 transition-colors\" />\n                                    </div>\n                                    <h4 className=\"text-xl font-black text-blue-900 mb-1 group-hover/goal:text-blue-600 transition-colors\">①ゴールを決める</h4>\n                                    <p className=\"text-slate-500 text-sm font-medium whitespace-nowrap\">曖昧な将来への不安を具体的な「数字」へと置換</p>\n                                    <div className=\"mt-2 text-blue-500 text-xs font-bold opacity-0 group-hover/goal:opacity-100 transition-opacity flex items-center gap-1\">\n                                        詳しく見る <ArrowRight className=\"w-3 h-3\" />\n                                    </div>\n                                </div>\n\n                                {/* ②体系的に学ぶ */}\n                                <div\n                                    className=\"absolute bottom-4 left-0 -translate-x-1/3 translate-y-1/2 flex flex-col items-center text-center w-64 cursor-pointer group/learn transform hover:-translate-y-1 transition-all duration-300\"\n                                    onClick={() => setShowLearningComparison(true)}\n                                >\n                                    <div className=\"w-20 h-20 rounded-full bg-white shadow-2xl border-4 border-slate-100 flex items-center justify-center mb-4 transition-all group/icon-container\">\n                                        <div className=\"absolute inset-0 rounded-full bg-blue-600 opacity-0 group-hover/learn:opacity-10 transition-opacity group-hover/learn:animate-ping\" />\n                                        <Layers className=\"w-10 h-10 text-blue-900 group-hover/learn:text-blue-600 transition-colors\" />\n                                    </div>\n                                    <h4 className=\"text-xl font-black text-blue-900 mb-1 group-hover/learn:text-blue-600 transition-colors\">②体系的に学ぶ</h4>\n                                    <p className=\"text-slate-500 text-sm font-medium whitespace-nowrap\">「断片的な知識」を「活かせる線」へ繋げる</p>\n                                    <div className=\"mt-2 text-blue-500 text-xs font-bold opacity-0 group-hover/learn:opacity-100 transition-opacity flex items-center gap-1\">\n                                        比較を見る <ArrowRight className=\"w-3 h-3\" />\n                                    </div>\n                                </div>\n\n                                {/* ③少額から実践する */}\n                                <div\n                                    className=\"absolute bottom-4 right-0 translate-x-1/3 translate-y-1/2 flex flex-col items-center text-center w-64 cursor-pointer group/practice transform hover:-translate-y-1 transition-all duration-300\"\n                                    onClick={() => setShowPracticeDetail(true)}\n                                >\n                                    <div className=\"w-20 h-20 rounded-full bg-white shadow-2xl border-4 border-slate-100 flex items-center justify-center mb-4 transition-all group/icon-container\">\n                                        <div className=\"absolute inset-0 rounded-full bg-blue-600 opacity-0 group-hover/practice:opacity-10 transition-opacity group-hover/practice:animate-ping\" />\n                                        <Zap className=\"w-10 h-10 text-blue-900 group-hover/practice:text-blue-600 transition-colors\" />\n                                    </div>\n                                    <h4 className=\"text-xl font-black text-blue-900 mb-1 group-hover/practice:text-blue-600 transition-colors\">③少額から実践する</h4>\n                                    <p className=\"text-slate-500 text-sm font-medium whitespace-nowrap\">リスクを抑え、まずは正しい一歩を踏み出す</p>\n                                    <div className=\"mt-2 text-blue-500 text-xs font-bold opacity-0 group-hover/practice:opacity-100 transition-opacity flex items-center gap-1\">\n                                        詳しく見る <ArrowRight className=\"w-3 h-3\" />\n                                    </div>\n                                </div>\n\n                                <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n                                    <span className=\"text-6xl font-black text-blue-900 opacity-5\">CORE</span>\n                                </div>\n                            </div>\n\n                            {/* 特殊パネルトグル (成功 vs 失敗のみが残る - 下部ボタンとラインを合わせる) */}\n                            <div className=\"absolute -bottom-48 left-4 flex flex-col gap-4\">\n                                {/* 成功 vs 失敗 (黒) */}\n                                <div className=\"group/btn relative\">\n                                    <button\n                                        onClick={() => setShowComparison(!showComparison)}\n                                        className={`w-14 h-14 rounded-full flex items-center justify-center shadow-2xl transition-all duration-500 transform hover:scale-110 active:scale-95 z-20 ${showComparison ? \"bg-blue-600 text-white rotate-45\" : \"bg-slate-900 text-white\"}`}\n                                    >\n                                        {showComparison ? <X className=\"w-8 h-8\" /> : <ArrowLeftRight className=\"w-8 h-8\" />}\n                                    </button>\n                                    {!showComparison && (\n                                        <div className=\"absolute left-18 top-1/2 -translate-y-1/2 ml-4 whitespace-nowrap bg-slate-900 text-white text-[10px] font-black px-4 py-2 rounded-lg pointer-events-none opacity-0 group-hover/btn:opacity-100 transition-all duration-300 transform translate-x-1 group-hover/btn:translate-x-0\">\n                                            失敗・成功の違いをチェック\n                                            <div className=\"absolute left-0 top-1/2 -translate-x-full -translate-y-1/2 border-8 border-transparent border-r-slate-900\" />\n                                        </div>\n                                    )}\n                                </div>\n                            </div>\n\n                            {/* 比較オーバーレイパネル (成功 vs 失敗) */}\n                            {showComparison && (\n                                <div className=\"absolute inset-0 z-[60] bg-white/95 backdrop-blur-sm rounded-[3rem] p-4 md:p-8 animate-in zoom-in-95 duration-500 overflow-y-auto border-4 border-slate-900/5 shadow-[0_40px_100px_-20px_rgba(0,0,0,0.2)]\">\n                                    <div className=\"text-center mb-8 relative\">\n                                        <button\n                                            onClick={() => setShowComparison(false)}\n                                            className=\"absolute -top-2 -right-2 w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 hover:text-slate-900 transition-all\"\n                                        >\n                                            <X className=\"w-5 h-5\" />\n                                        </button>\n                                        <h3 className=\"text-2xl font-black text-slate-900\">投資で失敗する人・成功する人</h3>\n                                        <div className=\"w-16 h-1 bg-blue-600 mx-auto mt-2\"></div>\n                                    </div>\n\n                                    <div className=\"grid md:grid-cols-2 gap-4\">\n                                        {/* 失敗する人 - BAD */}\n                                        <div\n                                            className=\"bg-slate-50 rounded-3xl p-6 border border-slate-100 relative group/card cursor-pointer\"\n                                            onClick={() => setRevealedBad(true)}\n                                        >\n                                            <div className=\"flex items-center gap-2 mb-6\">\n                                                <div className=\"w-8 h-8 bg-gray-200 rounded-lg flex items-center justify-center\">\n                                                    <UserX className=\"w-4 h-4 text-gray-500\" />\n                                                </div>\n                                                <h4 className=\"text-lg font-black text-slate-900 flex items-baseline gap-1\">\n                                                    失敗する人\n                                                    <span className=\"text-blue-400 font-black text-xl italic ml-1\">BAD</span>\n                                                </h4>\n                                            </div>\n\n                                            <div className={`space-y-2 transition-all duration-700 ${revealedBad ? 'opacity-100 blur-0' : 'opacity-20 blur-sm pointer-events-none'}`}>\n                                                {[\n                                                    \"投資のゴールがない\",\n                                                    \"他人のおすすめ銘柄を買っている\",\n                                                    \"SNSやYouTubeなど、無料の情報に頼っている\",\n                                                    \"銀行や証券会社で勧められたものを買っている\",\n                                                    \"とりあえず始めている\",\n                                                    \"時間がないを言い訳にしている\"\n                                                ].map((text, i) => (\n                                                    <li key={i} className=\"bg-white px-4 py-3 rounded-xl border border-slate-100 text-sm font-bold text-slate-600 flex items-center gap-2 list-none\">\n                                                        <div className=\"w-1.5 h-1.5 rounded-full bg-slate-300 shrink-0\" />\n                                                        {text}\n                                                    </li>\n                                                ))}\n                                            </div>\n\n                                            {!revealedBad && (\n                                                <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-slate-900/10 backdrop-blur-[2px] rounded-3xl animate-in fade-in duration-500\">\n                                                    <div className=\"bg-white px-4 py-2 rounded-full shadow-lg border border-slate-200 flex items-center gap-2 transform group-hover/card:scale-105 transition-transform\">\n                                                        <Zap className=\"w-4 h-4 text-blue-600 animate-pulse\" />\n                                                        <span className=\"text-xs font-black text-slate-900\">クリックして開示</span>\n                                                    </div>\n                                                </div>\n                                            )}\n                                        </div>\n\n                                        {/* 成功する人 - GOOD */}\n                                        <div\n                                            className=\"bg-blue-50/50 rounded-3xl p-6 border-2 border-blue-100 shadow-xl relative group/card cursor-pointer\"\n                                            onClick={() => setRevealedGood(true)}\n                                        >\n                                            <div className=\"flex items-center gap-2 mb-6\">\n                                                <div className=\"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center\">\n                                                    <UserCheck className=\"w-4 h-4 text-white\" />\n                                                </div>\n                                                <h4 className=\"text-lg font-black text-slate-900 flex items-baseline gap-1\">\n                                                    成功する人\n                                                    <span className=\"text-amber-500 font-black text-xl italic ml-1\">GOOD</span>\n                                                </h4>\n                                            </div>\n\n                                            <div className={`space-y-2 transition-all duration-700 ${revealedGood ? 'opacity-100 blur-0 translate-y-0' : 'opacity-20 blur-sm pointer-events-none'}`}>\n                                                {[\n                                                    \"自分なりの考えのもと選べている\",\n                                                    \"膨大な量の無料の情報に左右されない\",\n                                                    \"投資の目的が明確である\",\n                                                    \"人頼みの考えがない\",\n                                                    \"年利の理解ができている\",\n                                                    \"知識をつける意欲がある\"\n                                                ].map((text, i) => (\n                                                    <li key={i} className=\"bg-white px-4 py-3 rounded-xl border border-blue-100 text-sm font-black text-slate-900 flex items-center gap-2 list-none\">\n                                                        <CheckCircle className=\"w-4 h-4 text-blue-600 shrink-0\" />\n                                                        {text}\n                                                    </li>\n                                                ))}\n                                            </div>\n\n                                            {!revealedGood && (\n                                                <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-blue-600/5 backdrop-blur-[2px] rounded-3xl animate-in fade-in duration-500\">\n                                                    <div className=\"bg-white px-4 py-2 rounded-full shadow-lg border border-blue-100 flex items-center gap-2 transform group-hover/card:scale-105 transition-transform\">\n                                                        <Zap className=\"w-4 h-4 text-amber-500 animate-pulse\" />\n                                                        <span className=\"text-xs font-black text-slate-900\">クリックして開示</span>\n                                                    </div>\n                                                </div>\n                                            )}\n                                        </div>\n                                    </div>\n                                </div>\n                            )}\n\n                            {/* 学習方法比較オーバーレイ (Slide 2を統合) */}\n                            {showLearningComparison && (\n                                <div className=\"absolute inset-x-[-2rem] top-[-2rem] bottom-[-4rem] z-[70] bg-white animate-in slide-in-from-bottom duration-500 overflow-y-auto p-8 rounded-[3rem] shadow-2xl border-t-8 border-blue-600\">\n                                    <div className=\"max-w-4xl mx-auto py-8\">\n                                        <div className=\"flex justify-between items-start mb-8\">\n                                            <div className=\"text-left\">\n                                                <h3 className=\"text-3xl font-black text-slate-900 mb-2\">学習の方法による違い</h3>\n                                                <p className=\"text-slate-500 font-bold italic\">投資の結果は「学び方」で決まります</p>\n                                            </div>\n                                            <button\n                                                onClick={() => setShowLearningComparison(false)}\n                                                className=\"w-14 h-14 rounded-full bg-slate-100 flex items-center justify-center text-slate-400 hover:text-slate-900 hover:bg-slate-200 transition-all shadow-sm\"\n                                            >\n                                                <X className=\"w-8 h-8\" />\n                                            </button>\n                                        </div>\n\n                                        <div className=\"inline-block w-full px-8 py-4 bg-blue-900 text-white rounded-2xl font-black text-xl shadow-xl mb-12 text-center\">\n                                            断片的な知識を得ても、投資は失敗します！\n                                        </div>\n\n                                        <div className=\"grid md:grid-cols-2 gap-12 mt-16 pb-24\">\n                                            {/* 体系的に学んだ場合 */}\n                                            <div className=\"flex flex-col items-center\">\n                                                <h4 className=\"text-2xl font-black text-slate-800 mb-8 flex items-center gap-3\">\n                                                    <span className=\"text-blue-600 text-4xl\">基礎</span>から<br />体系的に学んだ場合\n                                                </h4>\n                                                <div className=\"relative w-full aspect-[4/3] bg-slate-50 border border-slate-100 p-8 flex flex-col items-center group overflow-hidden rounded-[2.5rem] shadow-inner\">\n                                                    <span className=\"text-xs font-black text-blue-900/40 tracking-[0.3em] uppercase mb-4\">Start</span>\n                                                    <div className=\"text-2xl font-black text-blue-900 mb-6\">スタート</div>\n                                                    <div className=\"flex justify-between w-full max-w-sm relative flex-1 h-full mb-2\">\n                                                        {[\n                                                            { colors: ['bg-blue-50', 'bg-blue-100', 'bg-blue-300'], delay: 0 },\n                                                            { colors: ['bg-green-50', 'bg-green-100', 'bg-green-300'], delay: 600 },\n                                                            { colors: ['bg-amber-50', 'bg-amber-100', 'bg-amber-300'], delay: 1200 }\n                                                        ].map((col, cIdx) => (\n                                                            <div key={cIdx} className=\"w-[30%] relative flex flex-col justify-between h-full\">\n                                                                <div className=\"absolute left-1/2 top-0 -bottom-6 w-1 -translate-x-1/2 z-20 pointer-events-none\">\n                                                                    <div className=\"absolute inset-0 bg-blue-900/10 rounded-full overflow-hidden\">\n                                                                        <div className=\"h-full bg-blue-600 animate-[grow_1s_ease-out_forwards] relative overflow-hidden\" style={{ animationDelay: `${col.delay}ms` }}>\n                                                                            <div className=\"absolute top-0 left-0 right-0 h-20 bg-gradient-to-b from-transparent via-white/80 to-transparent opacity-0 animate-[flow_3s_infinite]\" style={{ animationDelay: `${col.delay + 1000}ms` }} />\n                                                                        </div>\n                                                                    </div>\n                                                                    {/* 軸と同じテイストの下方向矢印 */}\n                                                                    <div\n                                                                        className=\"absolute -bottom-2 left-1/2 -translate-x-1/2 w-0 h-0 border-l-[6px] border-l-transparent border-r-[6px] border-r-transparent border-t-[10px] border-t-blue-600 animate-in fade-in zoom-in duration-500 fill-mode-both\"\n                                                                        style={{ animationDelay: `${col.delay + 1000}ms` }}\n                                                                    ></div>\n                                                                </div>\n                                                                {col.colors.map((color, bIdx) => (\n                                                                    <div key={bIdx} className={`w-full h-[28%] ${color} border border-slate-200 shadow-sm relative z-10`} style={{ clipPath: 'polygon(0% 0%, 100% 0%, 100% 85%, 50% 100%, 0% 85%)' }}></div>\n                                                                ))}\n                                                            </div>\n                                                        ))}\n                                                    </div>\n                                                    <div className=\"mt-8 relative group\">\n                                                        <div className=\"text-5xl font-black bg-gradient-to-r from-blue-900 via-blue-500 to-blue-900 bg-[length:200%_auto] animate-[shimmer_3s_linear_infinite] bg-clip-text text-transparent transition-all duration-500 hover:scale-105 cursor-default relative z-30\">\n                                                            ゴール\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            {/* 断片的に学んだ場合 */}\n                                            <div className=\"flex flex-col items-center\">\n                                                <h4 className=\"text-2xl font-black text-slate-800 mb-8 flex items-center gap-3\">\n                                                    <span className=\"text-slate-400 text-4xl italic\">YouTube</span>などで<br />断片的に学んだ場合\n                                                </h4>\n                                                <div className=\"relative w-full aspect-[4/3] bg-slate-50 border border-slate-100 p-8 flex flex-col items-center group overflow-hidden rounded-[2.5rem] shadow-inner\">\n                                                    <div className=\"flex w-full h-full\">\n                                                        <div className=\"flex flex-col items-center justify-start pt-12 pr-8 pl-4\">\n                                                            <span className=\"text-3xl font-black text-blue-900 leading-none [writing-mode:vertical-rl] tracking-tighter opacity-80 animate-pulse\">スタート？</span>\n                                                        </div>\n                                                        <div className=\"flex-1 flex flex-col\">\n                                                            <div className=\"flex justify-between w-full h-full relative mb-6\">\n                                                                <div className=\"absolute inset-0 z-20 pointer-events-none\">\n                                                                    <svg className=\"w-full h-full\" viewBox=\"0 0 300 180\" preserveAspectRatio=\"none\" overflow=\"visible\">\n                                                                        <path d=\"M -50 90 L 50 90 L 150 30 L 250 30 L 50 150 L 50 200\" fill=\"none\" stroke=\"#1e3a8a\" strokeWidth=\"5\" className=\"animate-[dash_10s_linear_infinite]\" strokeDasharray=\"12 12\" />\n                                                                        <path d=\"M 40 190 L 50 205 L 60 190\" fill=\"none\" stroke=\"#1e3a8a\" strokeWidth=\"5\" />\n                                                                    </svg>\n                                                                </div>\n                                                                {[\n                                                                    { colors: [null, 'bg-blue-100', 'bg-blue-300'] },\n                                                                    { colors: ['bg-green-100', null, null] },\n                                                                    { colors: ['bg-amber-100', null, null] }\n                                                                ].map((col, cIdx) => (\n                                                                    <div key={cIdx} className=\"w-[30%] relative flex flex-col justify-between h-full\">\n                                                                        {col.colors.map((color, bIdx) => (\n                                                                            <div key={bIdx} className={`w-full h-[28%] ${color ? color + ' border-slate-300 shadow-sm opacity-60' : 'border-dashed border-2 border-slate-300 bg-transparent opacity-30'} border relative z-10`}></div>\n                                                                        ))}\n                                                                    </div>\n                                                                ))}\n                                                            </div>\n                                                            <div className=\"text-3xl font-black text-blue-900 opacity-80 tracking-tighter mt-4 ml-2 animate-pulse\">ゴール？</div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                        {/* キャプション/注釈エリア */}\n                                        <div className=\"mt-12 flex items-center justify-center relative min-h-[80px]\">\n                                            {/* 車の免許の例え (黄色) - 左下に固定配置 */}\n                                            <div className=\"absolute left-4 bottom-4 group/btn\">\n                                                <button\n                                                    onClick={() => setShowLicenseMetaphor(true)}\n                                                    className=\"w-20 h-20 rounded-full bg-amber-400 text-white flex items-center justify-center shadow-2xl transition-all duration-500 transform hover:scale-110 hover:shadow-amber-200/50 active:scale-95 border-4 border-white\"\n                                                >\n                                                    <Car className=\"w-10 h-10\" />\n                                                </button>\n                                                <div className=\"absolute left-0 bottom-full mb-4 whitespace-nowrap bg-amber-500 text-white text-[10px] font-black px-4 py-2 rounded-lg pointer-events-none opacity-0 group-hover/btn:opacity-100 transition-all duration-300 transform translate-y-1 group-hover/btn:translate-y-0 shadow-xl\">\n                                                    投資と車の例え話を確認\n                                                    <div className=\"absolute left-4 top-full border-8 border-transparent border-t-amber-500\" />\n                                                </div>\n                                            </div>\n\n                                            <Button\n                                                onClick={() => setShowLearningComparison(false)}\n                                                className=\"bg-slate-900 hover:bg-black text-white font-black px-12 h-16 rounded-full shadow-lg group flex items-center gap-2\"\n                                            >\n                                                <X className=\"w-5 h-5\" />\n                                                詳細を閉じて戻る\n                                            </Button>\n                                        </div>\n                                    </div>\n                                </div>\n                            )}\n                        </div>\n\n                        <div className=\"mt-32 text-center\">\n                            <Button onClick={onNext} size=\"lg\" className=\"bg-blue-600 hover:bg-black text-white font-black px-12 h-16 rounded-full shadow-lg group\">\n                                効率的な学習方法とは？\n                                <ArrowRight className=\"ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform\" />\n                            </Button>\n                        </div>\n                    </div>\n                )}\n            </div>\n\n            {/* Deep Dive Slide: Goal Setting */}\n            {showGoalDetail && (\n                <div\n                    className=\"fixed inset-0 z-[100] bg-slate-900/40 backdrop-blur-xl flex items-center justify-center p-4 md:p-8 animate-in fade-in duration-500\"\n                    onClick={() => setShowGoalDetail(false)}\n                >\n                    <div\n                        className=\"bg-white rounded-[3rem] overflow-hidden max-w-5xl w-full max-h-[90vh] shadow-[0_50px_100px_-20px_rgba(0,0,0,0.5)] flex flex-col md:flex-row animate-in zoom-in-95 duration-500\"\n                        onClick={(e) => e.stopPropagation()}\n                    >\n                        {/* Left: Illustration */}\n                        <div className=\"md:w-1/2 relative bg-blue-900 min-h-[300px]\">\n                            <Image\n                                src=\"/images/goal_detail.png\"\n                                alt=\"Investment Goal Metaphor\"\n                                fill\n                                className=\"object-cover opacity-90\"\n                            />\n                            <div className=\"absolute inset-0 bg-gradient-to-t from-blue-900/90 via-blue-900/40 to-transparent flex items-end p-8 md:p-12\">\n                                <div className=\"text-white\">\n                                    <div className=\"bg-blue-400 w-16 h-1 mb-6\"></div>\n                                    <h5 className=\"text-3xl font-black mb-4 leading-tight\">人生は、長い航海。</h5>\n                                    <p className=\"text-blue-100 text-lg leading-relaxed opacity-90\">\n                                        目的地のない船は、<br />\n                                        どんなに速いエンジンを持っていても、<br />\n                                        決して理想の岸には辿り着けません。\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Right: Content */}\n                        <div className=\"md:w-1/2 p-8 md:p-16 flex flex-col justify-center bg-white relative\">\n                            <button\n                                onClick={() => setShowGoalDetail(false)}\n                                className=\"absolute top-8 right-8 w-12 h-12 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-all\"\n                            >\n                                <X className=\"w-6 h-6\" />\n                            </button>\n\n                            <div className=\"mb-12\">\n                                <div className=\"inline-flex items-center gap-2 px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-xs font-bold tracking-widest uppercase mb-4\">\n                                    <Target className=\"w-3 h-3\" /> Essentials\n                                </div>\n                                <h3 className=\"text-4xl font-black text-slate-900 leading-tight\">なぜ「ゴール」が<br /><span className=\"text-blue-600\">最優先</span>なのか？</h3>\n                            </div>\n\n                            <div className=\"space-y-10\">\n                                <div className=\"flex gap-6 group\">\n                                    <div className=\"w-14 h-14 rounded-2xl bg-amber-50 flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform duration-300\">\n                                        <Lightbulb className=\"w-7 h-7 text-amber-600\" />\n                                    </div>\n                                    <div>\n                                        <h4 className=\"text-xl font-black text-slate-900 mb-2\">灯台（数字）が道標になる</h4>\n                                        <p className=\"text-slate-500 leading-relaxed\">\n                                            「将来がなんとなく不安」という深い霧を、<br />\n                                            「月5万円の不足」という具体的な<span className=\"text-slate-900 font-bold\">数字の灯台</span>に変える。\n                                            そこから初めて、正しい航路が見えてきます。\n                                        </p>\n                                    </div>\n                                </div>\n\n                                <div className=\"flex gap-6 group\">\n                                    <div className=\"w-14 h-14 rounded-2xl bg-blue-50 flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform duration-300\">\n                                        <Map className=\"w-7 h-7 text-blue-600\" />\n                                    </div>\n                                    <div>\n                                        <h4 className=\"text-xl font-black text-slate-900 mb-2\">自分に最適な「船」を選べる</h4>\n                                        <p className=\"text-slate-500 leading-relaxed\">\n                                            目的地が決まれば、リスクを取って加速すべきか、着実に守りながら進むべきか、\n                                            <span className=\"text-slate-900 font-bold\">あなただけの最適な投資手法（船）</span>が明白になります。\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <Button\n                                onClick={() => setShowGoalDetail(false)}\n                                size=\"lg\"\n                                className=\"mt-16 w-full bg-blue-600 hover:bg-black text-white font-black h-20 rounded-2xl shadow-xl shadow-blue-200 transition-all flex items-center justify-center gap-3 text-xl\"\n                            >\n                                <X className=\"w-6 h-6\" />\n                                閉じて戻る\n                            </Button>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {/* Deep Dive Slide: Driver's License Metaphor (Yellow Icon) */}\n            {showLicenseMetaphor && (\n                <div\n                    className=\"fixed inset-0 z-[100] bg-slate-900/40 backdrop-blur-xl flex items-center justify-center p-4 md:p-8 animate-in fade-in duration-500\"\n                    onClick={() => setShowLicenseMetaphor(false)}\n                >\n                    <div\n                        className=\"bg-white rounded-[3rem] overflow-hidden max-w-5xl w-full max-h-[90vh] shadow-[0_50px_100px_-20px_rgba(0,0,0,0.5)] flex flex-col md:flex-row animate-in zoom-in-95 duration-500\"\n                        onClick={(e) => e.stopPropagation()}\n                    >\n                        {/* Left: Illustration */}\n                        <div className=\"md:w-1/2 relative bg-slate-900 min-h-[300px]\">\n                            <Image\n                                src=\"/images/learning_detail.png\"\n                                alt=\"Driver's License Metaphor\"\n                                fill\n                                className=\"object-cover opacity-90\"\n                            />\n                            <div className=\"absolute inset-0 bg-gradient-to-t from-slate-900/95 via-slate-900/40 to-transparent flex items-end p-8 md:p-12\">\n                                <div className=\"text-white\">\n                                    <div className=\"bg-amber-400 w-16 h-1 mb-6\"></div>\n                                    <h5 className=\"text-3xl font-black mb-4 leading-tight text-white\">投資も「運転」と同じ。</h5>\n                                    <p className=\"text-slate-100 text-lg leading-relaxed opacity-90\">\n                                        目的地が決まっても、<br />\n                                        免許がなければハンドルは握れません。<br />\n                                        正しい知識こそが、あなたを守る免許証です。\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Right: Content */}\n                        <div className=\"md:w-1/2 p-8 md:p-16 flex flex-col justify-center bg-white relative\">\n                            <button\n                                onClick={() => setShowLicenseMetaphor(false)}\n                                className=\"absolute top-8 right-8 w-12 h-12 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-all shadow-sm\"\n                            >\n                                <X className=\"w-6 h-6\" />\n                            </button>\n\n                            <div className=\"mb-12\">\n                                <div className=\"inline-flex items-center gap-2 px-3 py-1 bg-amber-50 text-amber-600 rounded-full text-xs font-bold tracking-widest uppercase mb-4\">\n                                    <Layers className=\"w-3 h-3\" /> Skill Mastery\n                                </div>\n                                <h3 className=\"text-4xl font-black text-slate-900 leading-tight\">なぜ「体系的に」<br /><span className=\"text-amber-500\">学ぶ</span>必要があるのか？</h3>\n                            </div>\n\n                            <div className=\"space-y-10\">\n                                <div className=\"flex gap-6 group\">\n                                    <div className=\"w-14 h-14 rounded-2xl bg-amber-50/50 flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform duration-300\">\n                                        <div className=\"text-2xl font-black text-amber-600 opacity-40\">01</div>\n                                    </div>\n                                    <div>\n                                        <h4 className=\"text-xl font-black text-slate-900 mb-2\">「鉄の塊」を制御するために</h4>\n                                        <p className=\"text-slate-500 leading-relaxed font-medium\">\n                                            目的地が決まり、どれだけ遠出をしたいと思っても、免許がない状態で運転はできません。\n                                            あの<span className=\"text-slate-900 font-bold underline decoration-amber-200 underline-offset-4 decoration-4\">「鉄の塊」</span>を安全に動かすには、正しい知識が必要です。\n                                        </p>\n                                    </div>\n                                </div>\n\n                                <div className=\"flex gap-6 group\">\n                                    <div className=\"w-14 h-14 rounded-2xl bg-amber-50/50 flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform duration-300\">\n                                        <div className=\"text-2xl font-black text-amber-600 opacity-40\">02</div>\n                                    </div>\n                                    <div>\n                                        <h4 className=\"text-xl font-black text-slate-900 mb-2\">教習所での「練習」の重要性</h4>\n                                        <p className=\"text-slate-500 leading-relaxed font-medium\">\n                                            誰もが<span className=\"text-slate-900 font-bold\">教習所などで勉強し、練習を繰り返して</span>初めて安全運転ができるようになります。\n                                            投資においても、全く同じステップが必要不可欠なのです。\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <Button\n                                onClick={() => setShowLicenseMetaphor(false)}\n                                size=\"lg\"\n                                className=\"mt-16 w-full bg-slate-900 hover:bg-black text-white font-black h-20 rounded-2xl shadow-2xl transition-all flex items-center justify-center gap-3 text-xl\"\n                            >\n                                <X className=\"w-6 h-6\" />\n                                閉じて戻る\n                            </Button>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n\n            {showPracticeDetail && (\n                <div\n                    className=\"fixed inset-0 z-[100] bg-slate-900/40 backdrop-blur-xl flex items-center justify-center p-4 md:p-8 animate-in fade-in duration-500\"\n                    onClick={() => setShowPracticeDetail(false)}\n                >\n                    <div\n                        className=\"bg-white rounded-[3rem] overflow-hidden max-w-5xl w-full max-h-[90vh] shadow-[0_50px_100px_-20px_rgba(0,0,0,0.5)] flex flex-col md:flex-row animate-in zoom-in-95 duration-500\"\n                        onClick={(e) => e.stopPropagation()}\n                    >\n                        {/* Image/Illustration side */}\n                        <div className=\"md:w-[45%] relative bg-slate-50 p-6 flex items-center justify-center border-b md:border-b-0 md:border-r border-slate-100\">\n                            <div className=\"relative w-full h-full flex flex-col\">\n                                <div className=\"flex-1 relative min-h-[250px] shadow-2xl rounded-2xl overflow-hidden border border-slate-200\">\n                                    <Image\n                                        src=\"/images/mini_stock_services.png\"\n                                        alt=\"Mini Stock Services Comparison\"\n                                        fill\n                                        className=\"object-contain bg-white p-4\"\n                                    />\n                                </div>\n                                <div className=\"mt-6 p-6 bg-blue-50 rounded-2xl border border-blue-100 flex items-start gap-3\">\n                                    <AlertTriangle className=\"w-6 h-6 text-blue-600 shrink-0 mt-1\" />\n                                    <div>\n                                        <p className=\"text-blue-900 font-black text-lg mb-1\">株は1株から買える時代です</p>\n                                        <p className=\"text-blue-700/80 text-sm font-medium leading-relaxed\">\n                                            かつては数十万円必要だった株式投資も、今はスマホ一つで「数百円」から始められます。\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Right: Content */}\n                        <div className=\"md:w-[55%] p-8 md:p-14 flex flex-col justify-center bg-white relative text-left\">\n                            <button\n                                onClick={() => setShowPracticeDetail(false)}\n                                className=\"absolute top-8 right-8 w-12 h-12 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-all shadow-sm\"\n                            >\n                                <X className=\"w-6 h-6\" />\n                            </button>\n\n                            <div className=\"mb-10 text-left\">\n                                <div className=\"inline-flex items-center gap-2 px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-xs font-bold tracking-widest uppercase mb-4\">\n                                    <Zap className=\"w-3 h-3 text-blue-500 fill-blue-500\" /> Start Small\n                                </div>\n                                <h3 className=\"text-4xl font-black text-slate-900 leading-tight\">なぜ「少額」から<br /><span className=\"text-blue-600\">実践</span>するのか？</h3>\n                            </div>\n\n                            <div className=\"space-y-8\">\n                                <div className=\"p-6 rounded-2xl bg-slate-50 border border-slate-100 group hover:border-blue-200 hover:bg-blue-50/30 transition-all cursor-default\">\n                                    <h4 className=\"text-xl font-black text-slate-900 mb-3 flex items-center gap-2\">\n                                        <div className=\"w-2 h-2 rounded-full bg-blue-500\" />\n                                        致命傷を避け、一歩を踏み出す\n                                    </h4>\n                                    <p className=\"text-slate-600 leading-relaxed\">\n                                        最初から大きなリスクを取る必要はありません。数百円から始めて<span className=\"text-slate-900 font-bold\">「まずは正しい一歩」</span>を踏み出す。\n                                        多くの証券会社が提供するミニ株なら、それが可能です。\n                                    </p>\n                                </div>\n\n                                <div className=\"p-6 rounded-2xl bg-slate-50 border border-slate-100 group hover:border-blue-200 hover:bg-blue-50/30 transition-all cursor-default\">\n                                    <h4 className=\"text-xl font-black text-slate-900 mb-3 flex items-center gap-2\">\n                                        <div className=\"w-2 h-2 rounded-full bg-blue-500\" />\n                                        「自分事」として学ぶための最適解\n                                    </h4>\n                                    <p className=\"text-slate-600 leading-relaxed\">\n                                        教科書を100回読むより、100円の株を1株買う方が遥かに学びになります。\n                                        自分のお金が動く感覚こそが、<span className=\"text-slate-900 font-bold\">市場と向き合う「真の経験値」</span>へと変わります。\n                                    </p>\n                                </div>\n                            </div>\n\n                            <Button\n                                onClick={() => setShowPracticeDetail(false)}\n                                size=\"lg\"\n                                className=\"mt-12 w-full bg-slate-900 text-white font-black h-20 rounded-2xl shadow-xl hover:bg-black transition-all text-xl\"\n                            >\n                                閉じて戻る\n                            </Button>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            <style jsx>{`\n                @keyframes grow {\n                    from { height: 0; }\n                    to { height: 100%; }\n                }\n                @keyframes shimmer {\n                    from { background-position: 0% center; }\n                    to { background-position: 200% center; }\n                }\n                @keyframes flow {\n                    0% { transform: translateY(-100%); opacity: 0; }\n                    20% { opacity: 1; }\n                    80% { opacity: 1; }\n                    100% { transform: translateY(400%); opacity: 0; }\n                }\n                @keyframes dash {\n                    to { stroke-dashoffset: -100; }\n                }\n            `}</style>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/Phase5Closing.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Map' is defined but never used.","line":11,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":54,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Map"},"fix":{"range":[458,463],"text":""},"desc":"Remove unused variable \"Map\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onSubStepChange' is defined but never used.","line":25,"column":91,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":106},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/Phase5Closing.tsx:33:25\n  31 |\n  32 |     useEffect(() => {\n> 33 |         if (!isPreview) setShowContent(true);\n     |                         ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  34 |     }, [isPreview]);\n  35 |\n  36 |     // Sync from prop (for preview mode)","line":33,"column":25,"nodeType":null,"endLine":33,"endColumn":39},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/Phase5Closing.tsx:39:13\n  37 |     useEffect(() => {\n  38 |         if (isPreview && typeof subStep === 'number' && subStep !== activeStep) {\n> 39 |             setActiveStep(subStep);\n     |             ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  40 |         }\n  41 |     }, [subStep, isPreview, activeStep]);\n  42 |","line":39,"column":13,"nodeType":null,"endLine":39,"endColumn":26}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { UserInput, SimulationResult } from \"@/types\";\nimport { formatManYen } from \"@/lib/simulation\";\nimport { Button } from \"@/components/ui/Button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/Card\";\nimport {\n    CheckCircle, Star, Crown, Sparkles, MessageCircle,\n    ExternalLink, ThumbsUp, ThumbsDown, CreditCard,\n    Shield, Zap, BookOpen, ChevronLeft, FileText, Map, ArrowRight\n} from \"lucide-react\";\nimport Image from \"next/image\";\n\ninterface Phase5ClosingProps {\n    userData: UserInput;\n    simulationResult?: SimulationResult;\n    onBack?: () => void;\n    onGoToAgenda?: () => void;\n    onSubStepChange?: (subStep: number | string) => void;\n    subStep?: number | string;\n    isPreview?: boolean;\n}\n\nexport default function Phase5Closing({ userData, simulationResult, onBack, onGoToAgenda, onSubStepChange, subStep, isPreview = false }: Phase5ClosingProps) {\n    const [interest, setInterest] = useState<\"yes\" | \"no\" | null>(null);\n    const [showPlan, setShowPlan] = useState(false);\n    const [showContent, setShowContent] = useState(isPreview);\n    const [selectedPlan, setSelectedPlan] = useState<string | null>(null);\n    const [activeStep, setActiveStep] = useState(isPreview && typeof subStep === 'number' ? subStep : 0);\n\n    useEffect(() => {\n        if (!isPreview) setShowContent(true);\n    }, [isPreview]);\n\n    // Sync from prop (for preview mode)\n    useEffect(() => {\n        if (isPreview && typeof subStep === 'number' && subStep !== activeStep) {\n            setActiveStep(subStep);\n        }\n    }, [subStep, isPreview, activeStep]);\n\n    const handleInterest = (value: \"yes\" | \"no\") => {\n        setInterest(value);\n        if (value === \"yes\") {\n            setShowPlan(true);\n        }\n    };\n\n    const plans = [\n        {\n            name: \"スタンダードプラン\",\n            icon: BookOpen,\n            color: \"from-blue-500 to-blue-600\",\n            normalPrice: \"698,000円\",\n            specialPrice: \"398,000円\",\n            features: [\n                \"全講義の視聴\",\n                \"専任コンサルタントへの相談\",\n                \"講師や投資仲間と交流できる掲示板\",\n            ],\n        },\n        {\n            name: \"ゴールドプラン\",\n            icon: Star,\n            color: \"from-amber-400 to-yellow-500\",\n            normalPrice: \"1,058,000円\",\n            specialPrice: \"578,000円\",\n            features: [\n                \"全講義の視聴\",\n                \"専任コンサルタントへの相談\",\n                \"相場分析力アップゼミ（ブンゼミ）\",\n                \"銘柄分析ツール（GFSの眼）\",\n            ],\n            highlight: false,\n        },\n        {\n            name: \"プラチナプラン\",\n            icon: Crown,\n            color: \"from-slate-600 to-slate-800\",\n            normalPrice: \"1,498,000円\",\n            specialPrice: \"908,000円\",\n            features: [\n                \"ゴールドプランの全機能\",\n                \"個別株実践勉強ゼミ\",\n                \"年利50%以上を目指す環境\",\n                \"VIP限定のライブセミナー\",\n            ],\n            highlight: true,\n        },\n    ];\n\n    const paymentMethods = [\n        {\n            title: \"一括払い\",\n            description: \"最安値で入学できる。最初の投資資金に回せる\",\n            icon: Zap,\n        },\n        {\n            title: \"分割払い\",\n            description: \"クレジットカードで後から分割可能\",\n            icon: CreditCard,\n        },\n    ];\n\n    return (\n        <div className=\"min-h-screen relative overflow-hidden bg-gradient-to-br from-slate-50 via-blue-50 to-white\">\n            {/* 背景のマスコット画像 */}\n            <div className=\"absolute inset-0 pointer-events-none\">\n                <Image\n                    src=\"/mascot/mascot_cheer_pink.png\"\n                    alt=\"\"\n                    width={220}\n                    height={220}\n                    className=\"absolute -top-10 -left-10 opacity-20 animate-float-slow\"\n                />\n                <Image\n                    src=\"/mascot/mascot_happy.png\"\n                    alt=\"\"\n                    width={200}\n                    height={200}\n                    className=\"absolute top-1/4 -right-10 opacity-20 animate-float-delayed\"\n                />\n                <Image\n                    src=\"/mascot/mascot_phone.png\"\n                    alt=\"\"\n                    width={180}\n                    height={180}\n                    className=\"absolute -bottom-10 left-1/3 opacity-20 animate-bounce-gentle\"\n                />\n            </div>\n\n            <div className=\"relative z-10 min-h-screen pt-20 pb-8 px-4\">\n                <div className=\"max-w-6xl mx-auto\">\n                    {activeStep === 0 && (\n                        <div className=\"w-full animate-in zoom-in fade-in duration-1000\">\n                            <div className=\"bg-slate-900 rounded-[4rem] p-12 md:p-20 text-white shadow-[0_50px_100px_rgba(0,0,0,0.3)] relative overflow-hidden text-center\">\n                                <div className=\"absolute top-0 right-0 w-1/2 h-full bg-blue-600/10 skew-x-12 translate-x-1/2 pointer-events-none\"></div>\n\n                                <div className=\"flex justify-between items-center mb-8 w-full max-w-6xl mx-auto\">\n                                    <Button\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        onClick={onBack}\n                                        className=\"text-slate-400 hover:text-white transition-colors\"\n                                    >\n                                        <ChevronLeft className=\"w-4 h-4 mr-1\" />\n                                        戻る\n                                    </Button>\n                                    <Button\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        onClick={onGoToAgenda}\n                                        className=\"text-slate-400 hover:text-white transition-colors\"\n                                    >\n                                        <FileText className=\"w-4 h-4 mr-1\" />\n                                        目次\n                                    </Button>\n                                </div>\n\n                                <div className=\"relative z-10\">\n                                    <div className=\"inline-flex items-center gap-2 px-6 py-2 bg-blue-500/10 backdrop-blur rounded-full mb-8 ring-1 ring-blue-500/20\">\n                                        <span className=\"text-blue-400 font-bold\">Section 04</span>\n                                        <span className=\"text-white/20\">/</span>\n                                        <span className=\"text-blue-100 font-medium\">投資の学びとは？</span>\n                                    </div>\n\n\n                                    <h3 className=\"text-2xl md:text-3xl font-black mb-12 leading-tight\">\n                                        <span className=\"bg-gradient-to-r from-blue-400 to-blue-200 bg-clip-text text-transparent whitespace-nowrap\">GFSを使って一緒に見ていこう！</span>\n                                    </h3>\n\n                                    <div className=\"max-w-2xl mx-auto mb-16 px-4\">\n                                        <a\n                                            href=\"https://gfs.tokyo/\"\n                                            target=\"_blank\"\n                                            rel=\"noopener noreferrer\"\n                                            className=\"group relative block w-full overflow-hidden rounded-[2.5rem] bg-white p-[1px] transition-all duration-500 hover:scale-[1.02] hover:shadow-[0_40px_80px_rgba(0,0,0,0.1)] shadow-xl\"\n                                        >\n                                            <div className=\"relative bg-white rounded-[2.5rem] p-8 md:p-10 flex flex-col items-center justify-center border border-slate-100\">\n                                                <div className=\"flex items-center gap-6 mb-4\">\n                                                    <div className=\"w-24 h-24 flex items-center justify-center translate-y-1\">\n                                                        <Image src=\"/images/gfs_logo_navy.png\" alt=\"GFS\" width={100} height={100} className=\"object-contain\" />\n                                                    </div>\n                                                    <div className=\"text-left border-l-2 border-blue-900/10 pl-6\">\n                                                        <p className=\"text-sm font-black text-blue-900/40 tracking-[0.4em] uppercase mb-2\">Official Website</p>\n                                                        <div className=\"text-2xl md:text-3xl font-black tracking-tight text-blue-900 flex flex-col leading-[1.1] gap-1\">\n                                                            <span>Global</span>\n                                                            <span>Financial</span>\n                                                            <span>School</span>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div className=\"w-full h-[1px] bg-gradient-to-r from-transparent via-blue-900/10 to-transparent my-6\"></div>\n                                                <div className=\"flex items-center gap-3 text-blue-900/60 group-hover:text-blue-900 transition-colors font-bold\">\n                                                    <span className=\"text-lg tracking-wide\">実際の学習環境を見にいく</span>\n                                                    <ArrowRight className=\"w-6 h-6 group-hover:translate-x-2 transition-transform\" />\n                                                </div>\n                                            </div>\n                                        </a>\n                                    </div>\n\n                                    <Button\n                                        onClick={onGoToAgenda}\n                                        className=\"bg-slate-950 text-blue-400 hover:bg-black font-black h-20 px-12 md:px-16 text-2xl rounded-full shadow-[0_30px_60px_rgba(0,0,0,0.3)] border border-blue-900/30 group transition-all\"\n                                    >\n                                        目次へ戻る\n                                    </Button>\n\n                                    <p className=\"mt-12 text-blue-400 font-black text-xl tracking-[0.3em] opacity-40 italic\">Global Financial School</p>\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {activeStep === 1 && (\n                        <div className=\"animate-in fade-in slide-in-from-right-8 duration-700\">\n                            {/* セクションヘッダー */}\n                            <div className={`text-center mb-8 transition-all duration-700 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                                <div className=\"flex justify-between items-center mb-4 max-w-6xl mx-auto\">\n                                    <Button\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        onClick={() => setActiveStep(0)}\n                                        className=\"text-slate-600 hover:text-slate-900 transition-colors\"\n                                    >\n                                        <ChevronLeft className=\"w-4 h-4 mr-1\" />\n                                        戻る\n                                    </Button>\n                                    <Button\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        onClick={onGoToAgenda}\n                                        className=\"text-slate-600 hover:text-slate-900 transition-colors\"\n                                    >\n                                        <FileText className=\"w-4 h-4 mr-1\" />\n                                        目次\n                                    </Button>\n                                </div>\n                                <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-slate-900/5 backdrop-blur rounded-full mb-4 ring-1 ring-slate-900/10\">\n                                    <span className=\"text-amber-600 font-bold\">Section 04</span>\n                                    <span className=\"text-slate-400\">/</span>\n                                    <span className=\"text-slate-900\">あなた専用の投資戦略と今後のお話</span>\n                                </div>\n                                <h1 className=\"text-3xl md:text-5xl font-black text-slate-900 mb-2\">\n                                    {userData.name || \"あなた\"}様へのご提案\n                                </h1>\n                                <p className=\"text-slate-500 font-medium\">\n                                    {userData.investmentGoal ? `「${userData.investmentGoal}」を実現するための最後のステップ` : \"理想の未来を実現するための最後のステップ\"}\n                                </p>\n                            </div>\n\n                            {/* サマリーカード */}\n                            <Card className={`border-0 shadow-xl mb-8 bg-gradient-to-r from-primary to-blue-600 text-white transition-all duration-700 delay-200 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                                <CardContent className=\"py-6\">\n                                    <div className=\"grid md:grid-cols-3 gap-6 text-center\">\n                                        <div>\n                                            <p className=\"text-sm opacity-80 mb-1\">目標</p>\n                                            <p className=\"text-xl font-bold\">{userData.investmentGoal || \"理想の資産形成\"}</p>\n                                        </div>\n                                        {simulationResult ? (\n                                            <>\n                                                <div>\n                                                    <p className=\"text-sm opacity-80 mb-1\">{userData.targetPeriod}年後の予測資産</p>\n                                                    <p className=\"text-2xl font-bold\">{formatManYen(simulationResult.gfsEndValue)}</p>\n                                                </div>\n                                                <div>\n                                                    <p className=\"text-sm opacity-80 mb-1\">預金との差額</p>\n                                                    <p className=\"text-2xl font-bold text-amber-300\">\n                                                        +{formatManYen(simulationResult.gfsEndValue - simulationResult.savingsEndValue)}\n                                                    </p>\n                                                </div>\n                                            </>\n                                        ) : (\n                                            <>\n                                                <div>\n                                                    <p className=\"text-sm opacity-80 mb-1\">目標までの期間</p>\n                                                    <p className=\"text-2xl font-bold\">{userData.targetPeriod > 0 ? `${userData.targetPeriod}年` : \"最短期間\"}</p>\n                                                </div>\n                                                <div>\n                                                    <p className=\"text-sm opacity-80 mb-1\">最適な投資戦略</p>\n                                                    <p className=\"text-2xl font-bold text-amber-300\">GFSで構築</p>\n                                                </div>\n                                            </>\n                                        )}\n                                    </div>\n                                </CardContent>\n                            </Card>\n\n                            {/* 興味確認 */}\n                            {!interest && (\n                                <Card className={`border-0 shadow-xl mb-8 transition-all duration-700 delay-300 ${showContent ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\"}`}>\n                                    <CardHeader className=\"text-center\">\n                                        <CardTitle className=\"text-2xl\">私たちのサービスに興味はありますか？</CardTitle>\n                                    </CardHeader>\n                                    <CardContent className=\"pb-8\">\n                                        <div className=\"flex flex-col sm:flex-row gap-4 justify-center max-w-lg mx-auto\">\n                                            <Button\n                                                onClick={() => handleInterest(\"yes\")}\n                                                size=\"lg\"\n                                                className=\"flex-1 h-14 text-lg animate-pulse-border\"\n                                            >\n                                                <ThumbsUp className=\"w-5 h-5\" />\n                                                はい、興味があります\n                                            </Button>\n                                            <Button\n                                                onClick={() => handleInterest(\"no\")}\n                                                size=\"lg\"\n                                                variant=\"outline\"\n                                                className=\"flex-1 h-14 text-lg bg-white\"\n                                            >\n                                                <ThumbsDown className=\"w-5 h-5\" />\n                                                もう少し検討したい\n                                            </Button>\n                                        </div>\n                                    </CardContent>\n                                </Card>\n                            )}\n\n                            {/* プラン詳細（YESの場合） */}\n                            {showPlan && (\n                                <div className=\"animate-fade-in space-y-8\">\n                                    <h2 className=\"text-2xl font-bold text-white text-center flex items-center justify-center gap-2\">\n                                        <Sparkles className=\"w-6 h-6 text-amber-400\" />\n                                        受講料について\n                                    </h2>\n\n                                    {/* プランカード */}\n                                    <div className=\"grid md:grid-cols-3 gap-6\">\n                                        {plans.map((plan, index) => (\n                                            <Card\n                                                key={index}\n                                                className={`border-0 shadow-xl relative overflow-hidden cursor-pointer transition-all duration-300 hover:scale-105 ${plan.highlight ? \"ring-2 ring-amber-400\" : \"\"\n                                                    } ${selectedPlan === plan.name ? \"ring-4 ring-primary\" : \"\"}`}\n                                                onClick={() => setSelectedPlan(plan.name)}\n                                            >\n                                                {plan.highlight && (\n                                                    <div className=\"absolute top-0 right-0 bg-amber-400 text-xs font-bold text-slate-900 px-3 py-1 rounded-bl-xl\">\n                                                        おすすめ\n                                                    </div>\n                                                )}\n                                                <CardHeader className={`bg-gradient-to-r ${plan.color} text-white`}>\n                                                    <div className=\"flex items-center gap-3\">\n                                                        <plan.icon className=\"w-8 h-8\" />\n                                                        <CardTitle className=\"text-lg text-white\">{plan.name}</CardTitle>\n                                                    </div>\n                                                </CardHeader>\n                                                <CardContent className=\"pt-6\">\n                                                    <div className=\"text-center mb-4\">\n                                                        <p className=\"text-sm text-gray-400 line-through\">{plan.normalPrice}</p>\n                                                        <p className=\"text-3xl font-black text-primary\">{plan.specialPrice}</p>\n                                                        <p className=\"text-xs text-gray-500\">税込・受講期間1年</p>\n                                                    </div>\n                                                    <ul className=\"space-y-2\">\n                                                        {plan.features.map((feature, i) => (\n                                                            <li key={i} className=\"flex items-start gap-2\">\n                                                                <CheckCircle className=\"w-4 h-4 text-primary shrink-0 mt-0.5\" />\n                                                                <span className=\"text-xs text-gray-700\">{feature}</span>\n                                                            </li>\n                                                        ))}\n                                                    </ul>\n                                                </CardContent>\n                                            </Card>\n                                        ))}\n                                    </div>\n\n                                    {/* 決済方法 */}\n                                    <Card className=\"border-0 shadow-xl\">\n                                        <CardHeader>\n                                            <CardTitle className=\"flex items-center gap-2\">\n                                                <CreditCard className=\"w-5 h-5\" />\n                                                お支払い方法\n                                            </CardTitle>\n                                        </CardHeader>\n                                        <CardContent>\n                                            <div className=\"grid md:grid-cols-2 gap-4\">\n                                                {paymentMethods.map((method, index) => (\n                                                    <div\n                                                        key={index}\n                                                        className=\"flex items-start gap-4 p-4 bg-gray-50 rounded-xl hover:bg-blue-50 transition\"\n                                                    >\n                                                        <div className=\"w-10 h-10 rounded-xl bg-primary flex items-center justify-center shrink-0\">\n                                                            <method.icon className=\"w-5 h-5 text-white\" />\n                                                        </div>\n                                                        <div>\n                                                            <h4 className=\"font-bold text-gray-800\">{method.title}</h4>\n                                                            <p className=\"text-sm text-gray-600\">{method.description}</p>\n                                                        </div>\n                                                    </div>\n                                                ))}\n                                            </div>\n                                        </CardContent>\n                                    </Card>\n\n                                    {/* 安心保証 */}\n                                    <Card className=\"border-0 shadow-xl bg-gradient-to-r from-emerald-50 to-teal-50\">\n                                        <CardContent className=\"py-6\">\n                                            <div className=\"flex items-center gap-4\">\n                                                <div className=\"w-14 h-14 rounded-2xl bg-emerald-500 flex items-center justify-center shrink-0\">\n                                                    <Shield className=\"w-7 h-7 text-white\" />\n                                                </div>\n                                                <div>\n                                                    <h4 className=\"font-bold text-gray-800 text-lg\">安心の保証制度</h4>\n                                                    <p className=\"text-gray-600\">\n                                                        入学後8日間であれば無条件にて全額返金保証を行っております\n                                                    </p>\n                                                </div>\n                                            </div>\n                                        </CardContent>\n                                    </Card>\n\n                                    {/* CTA */}\n                                    <Card className=\"border-0 shadow-xl bg-gradient-to-r from-amber-50 to-yellow-50\">\n                                        <CardContent className=\"py-8 text-center\">\n                                            <h3 className=\"text-2xl font-bold text-gray-800 mb-4\">\n                                                今すぐGFSで投資の学習を始めましょう\n                                            </h3>\n                                            <p className=\"text-gray-600 mb-6\">\n                                                LINEでお気軽にご相談ください\n                                            </p>\n                                            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n                                                <Button size=\"lg\" className=\"min-w-48 h-14 text-lg\">\n                                                    <MessageCircle className=\"w-5 h-5\" />\n                                                    LINEで相談する\n                                                </Button>\n                                                <Button size=\"lg\" variant=\"outline\" className=\"min-w-48 h-14 text-lg bg-white\">\n                                                    <ExternalLink className=\"w-5 h-5\" />\n                                                    公式サイトを見る\n                                                </Button>\n                                            </div>\n                                        </CardContent>\n                                    </Card>\n                                </div>\n                            )}\n\n                            {/* NOの場合 */}\n                            {interest === \"no\" && (\n                                <Card className=\"border-0 shadow-xl mb-8 animate-fade-in\">\n                                    <CardContent className=\"py-10 text-center\">\n                                        <div className=\"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-6\">\n                                            <MessageCircle className=\"w-10 h-10 text-primary\" />\n                                        </div>\n                                        <h3 className=\"text-2xl font-bold text-gray-800 mb-4\">\n                                            ご検討いただきありがとうございます\n                                        </h3>\n                                        <p className=\"text-gray-600 mb-6 max-w-md mx-auto\">\n                                            何かご不明点やご質問がございましたら、お気軽にご相談ください。\n                                            <br />\n                                            {userData.name}様の「{userData.investmentGoal}」の実現を心より応援しております。\n                                        </p>\n                                        <Button size=\"lg\" className=\"min-w-48 h-14 text-lg\">\n                                            <MessageCircle className=\"w-5 h-5\" />\n                                            質問・相談する\n                                        </Button>\n                                    </CardContent>\n                                </Card>\n                            )}\n\n                            {/* フッター */}\n                            <div className={`text-center mt-8 transition-all duration-700 ${showContent ? \"opacity-100\" : \"opacity-0\"}`}>\n                                <Button onClick={onBack} variant=\"ghost\" className=\"text-blue-300\">\n                                    <ChevronLeft className=\"w-4 h-4 mr-1\" />\n                                    前の画面に戻る\n                                </Button>\n                                <p className=\"text-blue-200/50 text-sm mt-4\">\n                                    今日はありがとうございました\n                                </p>\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/SupportPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used.","line":6,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":15,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ArrowRight"},"fix":{"range":[155,171],"text":""},"desc":"Remove unused variable \"ArrowRight\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle2' is defined but never used.","line":6,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":29,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CheckCircle2"},"fix":{"range":[171,185],"text":""},"desc":"Remove unused variable \"CheckCircle2\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":6,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":36,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Clock"},"fix":{"range":[185,192],"text":""},"desc":"Remove unused variable \"Clock\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronLeft' is defined but never used.","line":6,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":57,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ChevronLeft"},"fix":{"range":[200,213],"text":""},"desc":"Remove unused variable \"ChevronLeft\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Building2' is defined but never used.","line":6,"column":59,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":68,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Building2"},"fix":{"range":[213,224],"text":""},"desc":"Remove unused variable \"Building2\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BookOpen' is defined but never used.","line":6,"column":70,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":78,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"BookOpen"},"fix":{"range":[224,234],"text":""},"desc":"Remove unused variable \"BookOpen\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Presentation' is defined but never used.","line":7,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Presentation"},"fix":{"range":[234,252],"text":""},"desc":"Remove unused variable \"Presentation\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckSquare' is defined but never used.","line":7,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":30,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CheckSquare"},"fix":{"range":[252,265],"text":""},"desc":"Remove unused variable \"CheckSquare\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LineChart' is defined but never used.","line":7,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":41,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"LineChart"},"fix":{"range":[265,276],"text":""},"desc":"Remove unused variable \"LineChart\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Lightbulb' is defined but never used.","line":7,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":52,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Lightbulb"},"fix":{"range":[276,287],"text":""},"desc":"Remove unused variable \"Lightbulb\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FileText' is defined but never used.","line":7,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":62,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"FileText"},"fix":{"range":[287,297],"text":""},"desc":"Remove unused variable \"FileText\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Settings' is defined but never used.","line":7,"column":64,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":72,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Settings"},"fix":{"range":[297,307],"text":""},"desc":"Remove unused variable \"Settings\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Heart' is defined but never used.","line":7,"column":74,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":79,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Heart"},"fix":{"range":[307,314],"text":""},"desc":"Remove unused variable \"Heart\"."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'selectedPreview'. Either include it or remove the dependency array.","line":92,"column":8,"nodeType":"ArrayExpression","endLine":92,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [selectedPreview]","fix":{"range":[3841,3843],"text":"[selectedPreview]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState, useRef } from \"react\";\nimport {\n    Book, HelpCircle, ChevronRight, MessageSquare, Info, Sparkles, X, Activity,\n    ArrowRight, CheckCircle2, Clock, Search, ChevronLeft, Building2, BookOpen,\n    Presentation, CheckSquare, LineChart, Lightbulb, FileText, Settings, Heart\n} from \"lucide-react\";\nimport { GLOSSARY, SUPPORT_QA } from \"@/constants/supportData\";\nimport { UserInput, Phase, SimulationResult } from \"@/types\";\nimport { cn } from \"@/lib/utils\";\n\n// Phase Components for Roadmap Previews\nimport Agenda from \"@/components/Agenda\";\nimport Phase1Hearing from \"@/components/Phase1Hearing\";\nimport Phase1ThreeSteps from \"@/components/Phase1ThreeSteps\";\nimport Phase2CompanyIntro from \"@/components/Phase2CompanyIntro\";\nimport Phase3Simulation from \"@/components/Phase3Simulation\";\nimport Phase4Solution from \"@/components/Phase4Solution\";\nimport Phase5Closing from \"@/components/Phase5Closing\";\n\ninterface SupportPanelProps {\n    userData: UserInput;\n    isOpen: boolean;\n    onToggle: () => void;\n    isStandalone?: boolean;\n}\n\nexport default function SupportPanel({ userData: initialUserData, isOpen, onToggle, isStandalone = false }: SupportPanelProps) {\n    const [activeTab, setActiveTab] = useState<\"glossary\" | \"qa\" | \"roadmap\">(\"roadmap\");\n    const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\n    const [selectedItemIndex, setSelectedItemIndex] = useState<number | null>(null);\n    const [currentPhase, setCurrentPhase] = useState<Phase>(\"agenda\");\n    const [subStep, setSubStep] = useState<number | string>(0);\n    const [liveSubStep, setLiveSubStep] = useState<number | string>(0);\n    const [selectedPreview, setSelectedPreview] = useState<'live' | 'explorer' | null>(null);\n    const [explorerPhase, setExplorerPhase] = useState<Phase>(\"agenda\");\n    const [explorerSubStep, setExplorerSubStep] = useState<number | string>(0);\n    const [isTransitioning, setIsTransitioning] = useState(false);\n    const defaultUserData: UserInput = {\n        name: \"\",\n        age: 0,\n        occupation: \"\",\n        familyStructure: \"\",\n        investmentGoal: \"\",\n        experience: \"\",\n        knowledgeLevel: \"\",\n        currentAssets: 0,\n        monthlyInvestment: 0,\n        targetAmount: 0,\n        targetPeriod: 0,\n        initialBudget: 0,\n        monthlySavings: 0,\n        investmentExperience: [],\n    };\n\n    const [userData, setUserData] = useState<UserInput>(initialUserData || defaultUserData);\n    const [simulationResult, setSimulationResult] = useState<SimulationResult | null>(null);\n    const scrollContainerRef = useRef<HTMLDivElement>(null);\n\n    // Sync from props\n    useEffect(() => {\n        if (initialUserData) setUserData(initialUserData);\n    }, [initialUserData]);\n\n    // データの同期（ページ間、もしくは同一ページ内の他コンポーネントと）\n    useEffect(() => {\n        const channel = new BroadcastChannel(\"gfs-sync\");\n        channel.onmessage = (event) => {\n            if (event.data?.type === \"SYNC_STATE\") {\n                if (event.data.phase) {\n                    setCurrentPhase(event.data.phase);\n                    if (selectedPreview !== 'explorer') {\n                        setExplorerPhase(event.data.phase);\n                    }\n                }\n                if (event.data.subStep !== undefined) {\n                    setSubStep(event.data.subStep);\n                    if (selectedPreview !== 'explorer') {\n                        setExplorerSubStep(event.data.subStep);\n                    }\n                }\n                if (event.data.simulationResult) setSimulationResult(event.data.simulationResult);\n                if (event.data.userData) setUserData(event.data.userData);\n            }\n        };\n\n        // マウント時に最新データの送信を要求\n        channel.postMessage({ type: \"REQUEST_SYNC\" });\n\n        return () => channel.close();\n    }, []);\n\n    // 初期化時に親からのpropsでも更新\n    useEffect(() => {\n        setUserData(initialUserData);\n    }, [initialUserData]);\n\n    const phases: { id: Phase; title: string; desc: string; hideInTimeline?: boolean }[] = [\n        { id: \"agenda\", title: \"アジェンダ\", desc: \"本日の流れ\" },\n        { id: \"company\", title: \"Section 01: 会社紹介\", desc: \"GFSについて\" },\n        { id: \"threeSteps\", title: \"Section 02: 3ステップ\", desc: \"理想のゴールを一緒に描きましょう\" },\n        { id: \"hearing\", title: \"Section 02: ヒアリング\", desc: \"理想のゴールを一緒に描きましょう\" },\n        { id: \"simulation\", title: \"分析結果\", desc: \"投資ロードマップ\", hideInTimeline: true },\n        { id: \"solution\", title: \"Section 03: 解決策提示\", desc: \"自分にピッタリな投資手段を考えよう\" },\n        { id: \"closing\", title: \"Section 04: クロージング\", desc: \"投資をできるようになろう！\" },\n    ];\n\n    const currentIdx = phases.findIndex(p => p.id === currentPhase);\n\n    // Explorer Logic: Manual Stepping\n    const getNextState = (phase: Phase, step: number | string): { phase: Phase; subStep: number | string } | null => {\n        const pIdx = phases.findIndex(p => p.id === phase);\n\n        if (phase === \"hearing\") {\n            if (typeof step === 'number' && step < 3) return { phase, subStep: step + 1 };\n        } else if (phase === \"simulation\") {\n            if (typeof step === 'number' && step < 4) return { phase, subStep: step + 1 };\n            if (step === 4) return { phase, subStep: \"insight-0\" };\n            if (typeof step === 'string' && step.startsWith('insight-')) {\n                const idx = parseInt(step.split('-')[1]);\n                if (idx < 4) return { phase, subStep: `insight-${idx + 1}` };\n            }\n        } else if (phase === \"solution\") {\n            if (typeof step === 'number' && step < 2) return { phase, subStep: step + 1 };\n        }\n\n        let nextIdx = pIdx + 1;\n        // ヒアリング未入力の場合はシミュレーションを飛ばす\n        if (nextIdx < phases.length && phases[nextIdx].id === \"simulation\") {\n            if (!userData || !userData.name.trim()) {\n                nextIdx++;\n            }\n        }\n\n        const nextP = phases[nextIdx];\n        if (nextP) return { phase: nextP.id, subStep: 0 };\n        return null;\n    };\n\n    const getPrevState = (phase: Phase, step: number | string): { phase: Phase; subStep: number | string } | null => {\n        const pIdx = phases.findIndex(p => p.id === phase);\n\n        if (phase === \"hearing\") {\n            if (typeof step === 'number' && step > 0) return { phase, subStep: step - 1 };\n        } else if (phase === \"simulation\") {\n            if (typeof step === 'string' && step.startsWith('insight-')) {\n                const idx = parseInt(step.split('-')[1]);\n                if (idx > 0) return { phase, subStep: `insight-${idx - 1}` };\n                return { phase, subStep: 4 };\n            }\n            if (typeof step === 'number' && step > 0) return { phase, subStep: step - 1 };\n        } else if (phase === \"solution\") {\n            if (typeof step === 'number' && step > 0) return { phase, subStep: step - 1 };\n        }\n\n        let prevIdx = pIdx - 1;\n        // ヒアリング未入力の場合はシミュレーションを飛ばす\n        if (prevIdx >= 0 && phases[prevIdx].id === \"simulation\") {\n            if (!userData || !userData.name.trim()) {\n                prevIdx--;\n            }\n        }\n\n        const prevP = phases[prevIdx];\n        if (prevP) {\n            return { phase: prevP.id, subStep: 0 };\n        }\n        return null;\n    };\n\n    const handlePhaseChange = (phase: Phase, mode: 'live' | 'explorer', targetSubStep: number | string = 0) => {\n        if (mode === 'live') {\n            setCurrentPhase(phase);\n            setLiveSubStep(targetSubStep);\n            setSubStep(targetSubStep);\n            // DO NOT sync phase change back to main app\n        } else {\n            // Smooth transition for explorer\n            setIsTransitioning(true);\n            setTimeout(() => {\n                setExplorerPhase(phase);\n                setExplorerSubStep(targetSubStep);\n                setTimeout(() => setIsTransitioning(false), 50);\n            }, 200);\n        }\n    };\n\n    const handleHearingSubmit = (data: UserInput, mode: 'live' | 'explorer') => {\n        setUserData(data);\n\n        // Sync data to main app for consistency, but NOT phase\n        const channel = new BroadcastChannel(\"gfs-sync\");\n        channel.postMessage({ type: \"SYNC_STATE\", userData: data });\n        channel.close();\n\n        // Skip simulation if no name\n        const targetPhase = !data.name.trim() ? \"solution\" : \"simulation\";\n        handlePhaseChange(targetPhase, mode, 0);\n    };\n\n    const handleExplorerNext = () => {\n        const next = getNextState(explorerPhase, explorerSubStep);\n        if (next) {\n            handlePhaseChange(next.phase, 'explorer', next.subStep);\n        }\n    };\n\n    const handleExplorerPrev = () => {\n        const prev = getPrevState(explorerPhase, explorerSubStep);\n        if (prev) {\n            handlePhaseChange(prev.phase, 'explorer', prev.subStep);\n        }\n    };\n\n    const handleTimelineClick = (phase: Phase) => {\n        handlePhaseChange(phase, 'explorer', 0);\n        setSelectedPreview('explorer');\n    };\n\n    const explorerTitle = phases.find(p => p.id === explorerPhase)?.title;\n\n    // オートスクロール制御\n    useEffect(() => {\n        if (activeTab === \"roadmap\" && scrollContainerRef.current) {\n            const activeElement = scrollContainerRef.current.querySelector(`[data-phase=\"${currentPhase}\"]`);\n            if (activeElement) {\n                activeElement.scrollIntoView({ behavior: 'smooth', block: 'center' });\n            }\n        }\n    }, [currentPhase, activeTab]);\n\n    const formatContent = (text: string) => {\n        if (!text) return \"\";\n        return text.replace(/@@/g, userData?.name || \"あなた\");\n    };\n\n    return (\n        <div\n            className={isStandalone\n                ? \"w-full h-screen bg-slate-50 relative overflow-hidden flex flex-col\"\n                : `fixed top-1/2 -translate-y-1/2 left-0 z-50 transition-all duration-500 transform ${isOpen ? \"translate-x-0\" : \"translate-x-[calc(-100%+40px)]\"}`\n            }\n        >\n            <div className={`flex items-stretch ${isStandalone ? \"h-full\" : \"shadow-2xl h-[80vh]\"}`}>\n                {/* 内容 */}\n                <div className={`${isStandalone ? \"w-full\" : \"w-[450px] rounded-r-3xl\"} bg-white/95 backdrop-blur-xl border-r border-slate-200 h-full overflow-hidden flex flex-col`}>\n                    {/* Header */}\n                    <div className=\"p-6 border-b border-slate-100 bg-gradient-to-r from-blue-50 to-indigo-50\">\n                        <div className=\"flex items-center justify-between mb-6\">\n                            <div className=\"flex items-center gap-3\">\n                                <div className=\"p-2.5 bg-blue-600 rounded-xl shadow-lg shadow-blue-200\">\n                                    <Sparkles className=\"w-6 h-6 text-white\" />\n                                </div>\n                                <div>\n                                    <h2 className=\"text-xl font-black text-slate-900 tracking-tight\">Investment Support</h2>\n                                    <div className=\"flex items-center gap-3\">\n                                        <p className=\"text-[10px] font-bold text-blue-600/70 uppercase tracking-[0.2em]\">Concierge Service</p>\n                                        <a\n                                            href=\"https://gfs.tokyo/\"\n                                            target=\"_blank\"\n                                            rel=\"noopener noreferrer\"\n                                            className=\"flex items-center gap-1.5 px-2 py-0.5 bg-blue-600/10 hover:bg-blue-600/20 border border-blue-600/20 rounded-lg transition-all group/link\"\n                                        >\n                                            <span className=\"text-[9px] font-black text-blue-600\">GFSのコンテンツ</span>\n                                            <ChevronRight className=\"w-2.5 h-2.5 text-blue-600 group-hover/link:translate-x-0.5 transition-transform\" />\n                                        </a>\n                                    </div>\n                                </div>\n                            </div>\n                            {!isStandalone && (\n                                <button\n                                    onClick={onToggle}\n                                    className=\"p-2 hover:bg-white/50 rounded-full transition-colors text-slate-400\"\n                                >\n                                    <X className=\"w-5 h-5\" />\n                                </button>\n                            )}\n                        </div>\n\n                        {/* Tabs */}\n                        <div className=\"flex p-1 bg-slate-100/50 rounded-2xl relative\">\n                            <button\n                                onClick={() => { setActiveTab(\"glossary\"); setSelectedCategory(null); setSelectedItemIndex(null); }}\n                                className={`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-[11px] font-black transition-all relative z-10 ${activeTab === \"glossary\" ? \"text-blue-600\" : \"text-slate-400 hover:text-slate-600\"}`}\n                            >\n                                <Book className=\"w-3.5 h-3.5\" />\n                                専門用語集\n                            </button>\n                            <button\n                                onClick={() => { setActiveTab(\"qa\"); setSelectedCategory(null); setSelectedItemIndex(null); }}\n                                className={`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-[11px] font-black transition-all relative z-10 ${activeTab === \"qa\" ? \"text-blue-600\" : \"text-slate-400 hover:text-slate-600\"}`}\n                            >\n                                <MessageSquare className=\"w-3.5 h-3.5\" />\n                                よくある質問\n                            </button>\n                            <button\n                                onClick={() => setActiveTab(\"roadmap\")}\n                                className={`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-[11px] font-black transition-all relative z-10 ${activeTab === \"roadmap\" ? \"text-blue-600\" : \"text-slate-400 hover:text-slate-600\"}`}\n                            >\n                                <Activity className=\"w-3.5 h-3.5\" />\n                                現在の進捗\n                            </button>\n                            <div\n                                className={`absolute inset-y-1 transition-all duration-300 bg-white shadow-md rounded-xl ${activeTab === \"glossary\" ? \"left-1 w-[calc(33.3%-4px)]\" :\n                                    activeTab === \"qa\" ? \"left-[calc(33.3%+2px)] w-[calc(33.3%-4px)]\" :\n                                        \"left-[calc(66.6%+2px)] w-[calc(33.3%-4px)]\"\n                                    }`}\n                            />\n                        </div>\n                    </div>\n\n                    {/* Presenter View Area */}\n                    <div className=\"flex-1 overflow-y-auto p-4 custom-scrollbar bg-slate-50/30\" ref={scrollContainerRef}>\n                        {activeTab === \"roadmap\" ? (\n                            <div className=\"space-y-8 py-4\">\n                                {/* LIVE & NEXT Section */}\n                                <div className=\"grid grid-cols-1 gap-6\">\n                                    {/* LIVE Slide */}\n                                    <div className=\"space-y-3\">\n                                        <div className=\"flex items-center gap-2 px-2\">\n                                            <div className=\"w-2 h-2 rounded-full bg-red-500 animate-pulse\" />\n                                            <span className=\"text-[10px] font-black text-slate-900 tracking-[0.2em] uppercase\">LIVE</span>\n                                        </div>\n                                        <div className={cn(\n                                            \"bg-white rounded-[2rem] border-2 shadow-2xl overflow-hidden transition-all duration-300 relative group/live\",\n                                            selectedPreview === 'live' ? \"border-blue-600 shadow-blue-100 ring-4 ring-blue-600/20\" : \"border-red-500 shadow-red-100\"\n                                        )}>\n                                            <div className=\"aspect-video bg-slate-100 relative overflow-y-auto custom-scrollbar flex justify-center\">\n                                                <div className=\"w-[1000px] shrink-0 pt-10 pb-40\" style={{ zoom: 0.4 }}>\n                                                    {currentPhase === \"agenda\" && <Agenda onGoToPhase={(p) => handlePhaseChange(p, 'live')} userData={userData} isPreview />}\n                                                    {currentPhase === \"company\" && <Phase2CompanyIntro userData={userData} isPreview subStep={typeof liveSubStep === 'number' ? liveSubStep : 0} onSubStepChange={(s) => handlePhaseChange(currentPhase, 'live', s)} />}\n                                                    {currentPhase === \"threeSteps\" && <Phase1ThreeSteps isPreview />}\n                                                    {currentPhase === \"hearing\" && <Phase1Hearing onSubmit={(d) => handleHearingSubmit(d, 'live')} onBack={() => handlePhaseChange(\"threeSteps\", 'live')} onGoToAgenda={() => handlePhaseChange(\"agenda\", 'live')} isPreview subStep={liveSubStep} onSubStepChange={(s) => handlePhaseChange(currentPhase, 'live', s)} />}\n                                                    {currentPhase === \"simulation\" && <Phase3Simulation userData={userData} simulationResult={simulationResult || undefined} isPreview subStep={liveSubStep} onSubStepChange={(s) => handlePhaseChange(currentPhase, 'live', s)} />}\n                                                    {currentPhase === \"solution\" && <Phase4Solution userData={userData} simulationResult={simulationResult || undefined} isPreview subStep={liveSubStep} onSubStepChange={(s) => handlePhaseChange(currentPhase, 'live', s)} />}\n                                                    {currentPhase === \"closing\" && <Phase5Closing userData={userData} simulationResult={simulationResult || undefined} isPreview subStep={liveSubStep} onSubStepChange={(s) => handlePhaseChange(currentPhase, 'live', s)} />}\n                                                </div>\n                                                <div className=\"absolute inset-x-0 bottom-0 h-10 bg-gradient-to-t from-black/5 to-transparent pointer-events-none sticky top-[100%]\" />\n\n                                                {/* Selection Overlay */}\n                                                {selectedPreview !== 'live' && (\n                                                    <div\n                                                        className=\"absolute inset-0 bg-black/40 backdrop-blur-[1px] flex items-center justify-center cursor-pointer z-[100] group/overlay\"\n                                                        onClick={() => setSelectedPreview('live')}\n                                                    >\n                                                        <div className=\"bg-white/90 px-4 py-2 rounded-full shadow-xl flex items-center gap-2 transform transition-transform group-hover/overlay:scale-110\">\n                                                            <Activity className=\"w-4 h-4 text-blue-600\" />\n                                                            <span className=\"text-xs font-black text-slate-900\">操作する</span>\n                                                        </div>\n                                                    </div>\n                                                )}\n                                            </div>\n                                            <div className=\"p-4 bg-white flex justify-between items-center\">\n                                                <h4 className=\"text-sm font-black text-slate-900\">\n                                                    {phases.find(p => p.id === currentPhase)?.title}\n                                                    <span className=\"ml-2 text-[10px] text-slate-400 font-bold\">\n                                                        {typeof subStep === 'number' ? `Step ${subStep + 1}` : subStep}\n                                                    </span>\n                                                </h4>\n                                                {selectedPreview === 'live' && (\n                                                    <button\n                                                        onClick={(e) => { e.stopPropagation(); setSelectedPreview(null); }}\n                                                        className=\"text-[10px] font-bold text-blue-600 hover:underline\"\n                                                    >\n                                                        解除\n                                                    </button>\n                                                )}\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    {/* EXPLORER Slide (Next/Peek) */}\n                                    <div className=\"space-y-3\">\n                                        <div className=\"flex items-center justify-between px-2\">\n                                            <div className=\"flex items-center gap-2\">\n                                                <div className=\"w-2 h-2 rounded-full bg-blue-600\" />\n                                                <span className=\"text-[10px] font-black text-slate-900 tracking-[0.2em] uppercase\">EXPLORER</span>\n                                            </div>\n                                            <div className=\"flex gap-1\">\n                                                <button\n                                                    onClick={() => {\n                                                        setExplorerPhase(currentPhase);\n                                                        setExplorerSubStep(subStep);\n                                                    }}\n                                                    className=\"p-2 text-slate-400 hover:text-blue-600 transition-colors\"\n                                                    title=\"現在に同期\"\n                                                >\n                                                    <Activity className=\"w-4 h-4\" />\n                                                </button>\n                                                <button\n                                                    onClick={handleExplorerPrev}\n                                                    className=\"w-8 h-8 rounded-full bg-white border border-slate-200 flex items-center justify-center hover:bg-slate-50 transition-all shadow-sm group/btn\"\n                                                >\n                                                    <ChevronRight className=\"w-4 h-4 text-slate-400 rotate-180 group-hover/btn:text-blue-600\" />\n                                                </button>\n                                                <button\n                                                    onClick={handleExplorerNext}\n                                                    className=\"w-8 h-8 rounded-full bg-white border border-slate-200 flex items-center justify-center hover:bg-slate-50 transition-all shadow-sm group/btn\"\n                                                >\n                                                    <ChevronRight className=\"w-4 h-4 text-slate-400 group-hover/btn:text-blue-600\" />\n                                                </button>\n                                            </div>\n                                        </div>\n                                        <div className={cn(\n                                            \"bg-white rounded-[2rem] border shadow-xl overflow-hidden transition-all duration-500 relative group/explorer\",\n                                            selectedPreview === 'explorer' ? \"border-blue-600 ring-4 ring-blue-600/20\" : \"border-blue-100 hover:border-blue-300\"\n                                        )}>\n                                            <div className={cn(\n                                                \"aspect-video bg-slate-50 relative overflow-y-auto custom-scrollbar flex justify-center border-b border-slate-100 transition-all duration-300\",\n                                                isTransitioning ? \"opacity-0 scale-98 blur-sm\" : \"opacity-100 scale-100 blur-0\"\n                                            )}>\n                                                <div className=\"w-[1000px] shrink-0 pt-10 pb-40\" style={{ zoom: 0.4 }}>\n                                                    {explorerPhase === \"agenda\" && <Agenda onGoToPhase={(p) => handlePhaseChange(p, 'explorer')} userData={userData} isPreview />}\n                                                    {explorerPhase === \"company\" && <Phase2CompanyIntro userData={userData} isPreview subStep={typeof explorerSubStep === 'number' ? explorerSubStep : 0} onSubStepChange={(s) => handlePhaseChange(explorerPhase, 'explorer', s)} />}\n                                                    {explorerPhase === \"threeSteps\" && <Phase1ThreeSteps isPreview />}\n                                                    {explorerPhase === \"hearing\" && <Phase1Hearing onSubmit={(d) => handleHearingSubmit(d, 'explorer')} onBack={() => handlePhaseChange(\"threeSteps\", 'explorer')} onGoToAgenda={() => handlePhaseChange(\"agenda\", 'explorer')} isPreview subStep={explorerSubStep} onSubStepChange={(s) => handlePhaseChange(explorerPhase, 'explorer', s)} />}\n                                                    {explorerPhase === \"simulation\" && <Phase3Simulation userData={userData} simulationResult={simulationResult || undefined} isPreview subStep={explorerSubStep} onSubStepChange={(s) => handlePhaseChange(explorerPhase, 'explorer', s)} />}\n                                                    {explorerPhase === \"solution\" && <Phase4Solution userData={userData} simulationResult={simulationResult || undefined} isPreview subStep={explorerSubStep} onSubStepChange={(s) => handlePhaseChange(explorerPhase, 'explorer', s)} />}\n                                                    {explorerPhase === \"closing\" && <Phase5Closing userData={userData} simulationResult={simulationResult || undefined} isPreview subStep={explorerSubStep} onSubStepChange={(s) => handlePhaseChange(explorerPhase, 'explorer', s)} />}\n                                                </div>\n                                                <div className=\"absolute inset-x-0 bottom-0 h-10 bg-gradient-to-t from-black/5 to-transparent pointer-events-none sticky top-[100%]\" />\n\n                                                {/* Selection Overlay */}\n                                                {selectedPreview !== 'explorer' && (\n                                                    <div\n                                                        className=\"absolute inset-0 bg-black/40 backdrop-blur-[1px] flex items-center justify-center cursor-pointer z-[100] group/overlay\"\n                                                        onClick={() => setSelectedPreview('explorer')}\n                                                    >\n                                                        <div className=\"bg-white/90 px-4 py-2 rounded-full shadow-xl flex items-center gap-2 transform transition-transform group-hover/overlay:scale-110\">\n                                                            <Search className=\"w-4 h-4 text-blue-600\" />\n                                                            <span className=\"text-xs font-black text-slate-900\">操作する</span>\n                                                        </div>\n                                                    </div>\n                                                )}\n                                            </div>\n                                            <div className=\"p-4 bg-slate-50/50\">\n                                                <div className=\"flex items-center justify-between\">\n                                                    <div>\n                                                        <h4 className=\"text-xs font-black text-slate-600 tracking-tight\">{explorerTitle}</h4>\n                                                        <p className=\"text-[9px] font-bold text-slate-400 uppercase\">\n                                                            Slide/Step: {typeof explorerSubStep === 'number' ? explorerSubStep + 1 : explorerSubStep}\n                                                        </p>\n                                                    </div>\n                                                    {selectedPreview === 'explorer' ? (\n                                                        <button\n                                                            onClick={(e) => { e.stopPropagation(); setSelectedPreview(null); }}\n                                                            className=\"text-[10px] font-bold text-blue-600 hover:underline\"\n                                                        >\n                                                            解除\n                                                        </button>\n                                                    ) : (\n                                                        <div className=\"w-6 h-6 rounded-lg bg-blue-100 flex items-center justify-center\">\n                                                            <Activity className=\"w-3.5 h-3.5 text-blue-600\" />\n                                                        </div>\n                                                    )}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                {/* Simplified Timeline */}\n                                <div className=\"pt-8 px-2\">\n                                    <div className=\"flex items-center gap-4 mb-6\">\n                                        <h4 className=\"text-[10px] font-black text-slate-900 tracking-[0.3em]\">TIMELINE</h4>\n                                        <div className=\"h-[1px] flex-1 bg-slate-100\" />\n                                    </div>\n                                    <div className=\"relative pl-6 space-y-4 before:absolute before:left-2 before:top-2 before:bottom-2 before:w-[2px] before:bg-slate-100\">\n                                        {phases.map((p, idx) => {\n                                            if (p.hideInTimeline) return null;\n                                            const isPast = idx < currentIdx;\n                                            const isCurrent = p.id === currentPhase;\n                                            return (\n                                                <button\n                                                    key={p.id}\n                                                    className=\"relative flex items-center gap-4 w-full text-left transition-all hover:translate-x-1\"\n                                                    onClick={() => handleTimelineClick(p.id as Phase)}\n                                                >\n                                                    <div className={cn(\n                                                        \"absolute -left-[1.35rem] w-3 h-3 rounded-full border-2 border-white z-10 transition-colors duration-500\",\n                                                        isCurrent ? \"bg-blue-600 shadow-[0_0_10px_rgba(37,99,235,0.4)] animate-pulse\" : isPast ? \"bg-blue-300\" : \"bg-slate-200\"\n                                                    )} />\n                                                    <div className={cn(\n                                                        \"flex-1 p-3 rounded-2xl border transition-all duration-300\",\n                                                        isCurrent ? \"bg-blue-50/50 border-blue-100\" : p.id === explorerPhase ? \"bg-blue-50 border-blue-200\" : \"bg-transparent border-transparent\"\n                                                    )}>\n                                                        <span className={cn(\n                                                            \"text-[11px] font-black\",\n                                                            isCurrent ? \"text-blue-900\" : p.id === explorerPhase ? \"text-blue-600\" : isPast ? \"text-slate-500\" : \"text-slate-300\"\n                                                        )}>\n                                                            {p.id === \"threeSteps\" || p.id === \"hearing\"\n                                                                ? `Section 02: ${userData?.name ? userData.name + '様の未来予想図' : 'あなたの目標を教えてください'}`\n                                                                : p.id === \"solution\"\n                                                                    ? `Section 03: ${userData?.name ? userData.name + '様に合う投資' : 'あなたに合う投資'}`\n                                                                    : p.title}\n                                                        </span>\n                                                    </div>\n                                                </button>\n                                            );\n                                        })}\n                                    </div>\n                                </div>\n                            </div>\n                        ) : activeTab === \"glossary\" ? (\n                            <div className=\"space-y-4\">\n                                {Object.keys(GLOSSARY).map((category) => (\n                                    <div key={category} className=\"space-y-2\">\n                                        <h3 className=\"text-[11px] font-black text-slate-400 uppercase tracking-widest px-2 mb-3 mt-4\">\n                                            {category}\n                                        </h3>\n                                        <div className=\"grid grid-cols-1 gap-2\">\n                                            {GLOSSARY[category].map((item, idx) => (\n                                                <button\n                                                    key={item.term}\n                                                    onClick={() => {\n                                                        if (selectedCategory === category && selectedItemIndex === idx) {\n                                                            setSelectedCategory(null);\n                                                            setSelectedItemIndex(null);\n                                                        } else {\n                                                            setSelectedCategory(category);\n                                                            setSelectedItemIndex(idx);\n                                                        }\n                                                    }}\n                                                    className={`w-full text-left p-4 rounded-2xl border transition-all duration-300 group hover:shadow-lg ${selectedCategory === category && selectedItemIndex === idx\n                                                        ? \"bg-blue-600 border-blue-600 text-white shadow-xl shadow-blue-200\"\n                                                        : \"bg-white border-slate-100 text-slate-700 hover:border-blue-200\"}`}\n                                                >\n                                                    <div className=\"flex items-center justify-between\">\n                                                        <span className=\"font-bold text-base tracking-tight\">{item.term}</span>\n                                                        <ChevronRight className={`w-4 h-4 transition-transform duration-300 ${selectedCategory === category && selectedItemIndex === idx ? \"rotate-90 text-white\" : \"text-slate-300 group-hover:translate-x-1\"}`} />\n                                                    </div>\n\n                                                    {selectedCategory === category && selectedItemIndex === idx && (\n                                                        <div className=\"mt-4 space-y-4 animate-in fade-in slide-in-from-top-2 duration-300\">\n                                                            <div className=\"bg-white/10 rounded-xl p-4 backdrop-blur-sm border border-white/20\">\n                                                                <div className=\"flex items-start gap-2 mb-2\">\n                                                                    <Info className=\"w-4 h-4 mt-0.5 shrink-0 opacity-70\" />\n                                                                    <p className=\"text-sm font-medium leading-relaxed italic\">\n                                                                        {item.meaning}\n                                                                    </p>\n                                                                </div>\n                                                                <div className=\"mt-4 pt-4 border-t border-white/10\">\n                                                                    <div className=\"flex items-start gap-2\">\n                                                                        <HelpCircle className=\"w-4 h-4 mt-0.5 shrink-0 text-blue-200\" />\n                                                                        <div className=\"space-y-1\">\n                                                                            <p className=\"text-[10px] font-black uppercase tracking-widest text-blue-200/80\">分かりやすい例え</p>\n                                                                            <p className=\"text-sm font-black leading-relaxed\">\n                                                                                {item.metaphor}\n                                                                            </p>\n                                                                        </div>\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n                                                </button>\n                                            ))}\n                                        </div>\n                                    </div>\n                                ))}\n                            </div>\n                        ) : (\n                            <div className=\"space-y-4\">\n                                {Object.keys(SUPPORT_QA).map((category) => (\n                                    <div key={category} className=\"space-y-2\">\n                                        <h3 className=\"text-[11px] font-black text-slate-400 uppercase tracking-widest px-2 mb-3 mt-4\">\n                                            {category}\n                                        </h3>\n                                        <div className=\"space-y-3\">\n                                            {SUPPORT_QA[category].map((item, idx) => (\n                                                <div\n                                                    key={idx}\n                                                    className=\"bg-slate-50 border border-slate-100 rounded-3xl overflow-hidden hover:border-blue-100 transition-colors\"\n                                                >\n                                                    <button\n                                                        onClick={() => {\n                                                            if (selectedCategory === category && selectedItemIndex === idx) {\n                                                                setSelectedCategory(null);\n                                                                setSelectedItemIndex(null);\n                                                            } else {\n                                                                setSelectedCategory(category);\n                                                                setSelectedItemIndex(idx);\n                                                            }\n                                                        }}\n                                                        className=\"w-full text-left p-5 flex items-start gap-4\"\n                                                    >\n                                                        <div className=\"w-8 h-8 rounded-full bg-white flex items-center justify-center shrink-0 shadow-sm border border-slate-100\">\n                                                            <span className=\"text-blue-600 font-black text-xs\">Q</span>\n                                                        </div>\n                                                        <span className=\"font-bold text-slate-800 pt-1 flex-1 leading-snug\">\n                                                            {formatContent(item.question)}\n                                                        </span>\n                                                        <ChevronRight className={`w-5 h-5 text-slate-300 mt-1 transition-transform duration-300 ${selectedCategory === category && selectedItemIndex === idx ? \"rotate-90 pointer-events-none\" : \"\"}`} />\n                                                    </button>\n                                                    {selectedCategory === category && selectedItemIndex === idx && (\n                                                        <div className=\"px-5 pb-6 animate-in fade-in slide-in-from-top-1 duration-300\">\n                                                            <div className=\"flex gap-4\">\n                                                                <div className=\"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center shrink-0 shadow-lg shadow-blue-100\">\n                                                                    <span className=\"text-white font-black text-xs\">A</span>\n                                                                </div>\n                                                                <div className=\"flex-1 bg-white p-5 rounded-2xl shadow-sm border border-slate-100\">\n                                                                    <p className=\"text-slate-600 font-bold leading-relaxed\">\n                                                                        {formatContent(item.answer)}\n                                                                    </p>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n                                                </div>\n                                            ))}\n                                        </div>\n                                    </div>\n                                ))}\n                            </div>\n                        )}\n                    </div>\n                </div>\n\n                {/* 開閉ボタン（縦の帯） */}\n                {!isStandalone && (\n                    <button\n                        onClick={onToggle}\n                        className=\"w-10 bg-blue-600 text-white flex flex-col items-center justify-center gap-4 py-8 rounded-r-2xl hover:bg-blue-700 transition-colors cursor-pointer group shadow-xl\"\n                    >\n                        <HelpCircle className={`w-5 h-5 transition-transform duration-500 ${isOpen ? \"rotate-180\" : \"\"}`} />\n                        <span className=\"[writing-mode:vertical-rl] font-black text-[10px] tracking-[0.3em] uppercase opacity-70 group-hover:opacity-100\">Support Panel</span>\n                    </button>\n                )}\n            </div>\n\n            <style jsx global>{`\n                .custom-scrollbar::-webkit-scrollbar {\n                    width: 4px;\n                }\n                .custom-scrollbar::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .custom-scrollbar::-webkit-scrollbar-thumb {\n                    background: #e2e8f0;\n                    border-radius: 10px;\n                }\n                .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n                    background: #cbd5e1;\n                }\n            `}</style>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/ui/Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/ui/Card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/components/ui/Input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/constants/supportData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/lib/simulation.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'STOCKS_RATE_MAX' is assigned a value but never used.","line":11,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'OPTIMAL_RATE_MAX' is assigned a value but never used.","line":15,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'yield30EndValue' is assigned a value but never used.","line":182,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":182,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'yield20EndValue' is assigned a value but never used.","line":183,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":183,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { UserInput, SimulationResult, ChartDataPoint } from \"@/types\";\n\n// 預金金利（日本の普通預金の一般的な金利）\nconst SAVINGS_ANNUAL_RATE = 0.002; // 0.2%\n\n// 預金＆積立（投資信託等）\nconst TRUST_ANNUAL_RATE = 0.04; // 4%\n\n// 預金＆個別株投資（現実的な範囲）\nconst STOCKS_RATE_MIN = 0.07; // 7%\nconst STOCKS_RATE_MAX = 0.10; // 10%\n\n// 最適な資産形成（学びと組み合わせた現実的な目標）\nconst OPTIMAL_RATE_MIN = 0.12; // 12%\nconst OPTIMAL_RATE_MAX = 0.15; // 15%\n\n/**\n * 全角数字を半角数字に変換し、数字以外の文字（カンマ等）を除去\n */\nexport function toHalfWidth(str: string): string {\n    return str.replace(/[０-９]/g, (s) => {\n        return String.fromCharCode(s.charCodeAt(0) - 0xFEE0);\n    }).replace(/[^0-9]/g, \"\"); // 数字以外を除去\n}\n\n/**\n * カンマ区切りなどの入力を数値に変換\n */\nexport function parseNumericInput(value: string): number {\n    const cleanValue = toHalfWidth(value);\n    return parseInt(cleanValue) || 0;\n}\n\n/**\n * 複利計算（月次積立対応）: \n * FV = PV * (1+r)^n + PMT * [((1+r/12)^(12n) - 1) / (r/12)]\n */\nexport function calculateFutureValue(\n    principal: number,\n    annualRate: number,\n    years: number,\n    monthlySavings: number = 0\n): number {\n    const r = annualRate;\n    const n = years;\n    const p = principal;\n    const s = monthlySavings;\n\n    // 元本の複利\n    const fvPrincipal = p * Math.pow(1 + r, n);\n\n    if (r === 0) return p + s * 12 * n;\n\n    // 積立の複利（月利計算）\n    const monthlyRate = r / 12;\n    const totalMonths = n * 12;\n    const fvSavings = s * (Math.pow(1 + monthlyRate, totalMonths) - 1) / monthlyRate;\n\n    return fvPrincipal + fvSavings;\n}\n\n/**\n * 目標金額に達するために必要な年利を算出（二分探索）\n */\nexport function calculateRequiredRate(\n    principal: number,\n    targetAmount: number,\n    years: number,\n    monthlySavings: number\n): number {\n    let low = 0;\n    let high = 2.0; // 最大200%まで探索\n    let iterations = 0;\n\n    while (iterations < 100) {\n        const mid = (low + high) / 2;\n        const fv = calculateFutureValue(principal, mid, years, monthlySavings);\n\n        if (Math.abs(fv - targetAmount) < 1) return mid;\n\n        if (fv < targetAmount) {\n            low = mid;\n        } else {\n            high = mid;\n        }\n        iterations++;\n    }\n    return low;\n}\n\n/**\n * シミュレーション結果を生成\n */\nexport function generateSimulation(input: UserInput): SimulationResult {\n    const { initialBudget = 0, targetAmount, targetPeriod, monthlySavings = 0 } = input;\n\n    // 非負の値を保証\n    const principal = Math.max(0, initialBudget);\n    const savings = Math.max(0, monthlySavings);\n\n    // インプットがどちらも空（または0）の場合は NaN 防止のためデフォルト値を設定するか計算をスキップ\n    if (principal === 0 && savings === 0) {\n        // 全て0の空データ（デフォルト値）を返す\n        return {\n            savingsEndValue: 0,\n            savingsAnnualRate: SAVINGS_ANNUAL_RATE,\n            trustEndValue: 0,\n            trustAnnualRate: TRUST_ANNUAL_RATE,\n            stocksEndValue: 0,\n            stocksAnnualRate: STOCKS_RATE_MIN,\n            gfsEndValue: 0,\n            gfsAnnualRate: OPTIMAL_RATE_MIN,\n            yield30EndValue: 0,\n            yield30AnnualRate: 0.3,\n            achievedYear: null,\n            isAchieved: false,\n            requiredAnnualRate: 0,\n            requiredTrustAnnualRate: 0,\n            requiredStocksAnnualRate: 0,\n            gap: targetAmount,\n            isGapNegative: true,\n            chartData: Array.from({ length: targetPeriod + 1 }, (_, i) => ({\n                year: i,\n                savings: 0,\n                trust: 0,\n                stocks: 0,\n                gfs: 0,\n                yield30: 0,\n                required: 0,\n                requiredTrust: 0,\n                requiredStocks: 0,\n                target: targetAmount\n            })),\n            fullChartData: Array.from({ length: targetPeriod + 1 }, (_, i) => ({\n                year: i,\n                savings: 0,\n                trust: 0,\n                stocks: 0,\n                gfs: 0,\n                yield30: 0,\n                required: 0,\n                requiredTrust: 0,\n                requiredStocks: 0,\n                target: targetAmount\n            })),\n        };\n    }\n\n    // 目標達成に必要な利回りを算出\n    const rawRequiredRate = calculateRequiredRate(principal, targetAmount, targetPeriod, savings);\n\n    /**\n     * ユーザー要望：目標到達金額は少し過ぎて数万〜数十万くらいなら端数が出てもいい\n     * 0.1%単位で切り上げた後、さらにわずかなランダムバッファ（0.02%〜0.05%）を加えることで、\n     * 常に「少しだけ目標を上回る」自然な数値を生成する\n     */\n    /**\n     * 【重要】ユーザー要望：メインの計算基準を20%運用に変更\n     * 目標達成に必要な利率は参考値として保持し、メインの表示は20%運用時の数値とする\n     */\n    const TARGET_RATE_20 = 0.2;\n    const roundedRate = Math.ceil(rawRequiredRate * 1000) / 1000;\n    const randomBuffer = (Math.floor(Math.random() * 4) + 2) / 10000; // 0.0002 ~ 0.0005\n    const requiredAnnualRate = Math.round((roundedRate + randomBuffer) * 10000) / 10000;\n    /**\n     * 比率は積立と個別株でランダムに揺らぎを持たせる（35%〜45%の範囲）\n     * 基数となる利率は20%とする\n     */\n    const trustRatio = (Math.floor(Math.random() * 11) + 35) / 100; // 0.35 ~ 0.45\n    const trustAnnualRate = Math.round(TARGET_RATE_20 * trustRatio * 10000) / 10000;\n\n    const requiredTrustAnnualRate = Math.round(requiredAnnualRate * trustRatio * 10000) / 10000;\n    const requiredStocksAnnualRate = Math.round((requiredAnnualRate - requiredTrustAnnualRate) * 10000) / 10000;\n    const stocksAnnualRate = Math.round((TARGET_RATE_20 - trustAnnualRate) * 10000) / 10000;\n\n    // ユーザー要望：20%運用をメインの表示基準にする\n    const YIELD_20 = 0.2;\n    const gfsAnnualRate = YIELD_20;\n\n    // 運用ルート（互換性のために保持しつつ、20%も追加）\n    const YIELD_30 = 0.3;\n    const yield30EndValue = calculateFutureValue(principal, YIELD_30, targetPeriod, savings);\n    const yield20EndValue = calculateFutureValue(principal, YIELD_20, targetPeriod, savings); // 追加\n\n    // 達成年の特定\n    let achievedYear: number | null = null;\n    let isAchieved = false;\n\n    // グラフ用データ生成\n    const fullChartData: ChartDataPoint[] = [];\n    for (let year = 0; year <= targetPeriod; year++) {\n        const valSavings = Math.round(calculateFutureValue(principal, SAVINGS_ANNUAL_RATE, year, savings));\n\n        // ユーザー要望：積立と個別株を「足すと」目標に届くように、目標達成曲線をランダムな比率で分割\n        const valGfs = Math.round(calculateFutureValue(principal, gfsAnnualRate, year, savings));\n        const valTrust = Math.round(valGfs * trustRatio);\n        const valStocks = valGfs - valTrust; // 合計が一致するように引き算で算出\n\n        const valYield30 = Math.round(calculateFutureValue(principal, YIELD_30, year, savings));\n        const valRequired = Math.round(calculateFutureValue(principal, requiredAnnualRate, year, savings));\n        const valRequiredTrust = Math.round(valRequired * trustRatio);\n        const valRequiredStocks = valRequired - valRequiredTrust;\n\n        fullChartData.push({\n            year,\n            savings: valSavings,\n            trust: valTrust,\n            stocks: valStocks,\n            gfs: valGfs,\n            yield30: valYield30,\n            required: valRequired,\n            requiredTrust: valRequiredTrust,\n            requiredStocks: valRequiredStocks,\n            target: targetAmount,\n        });\n\n        if (achievedYear === null && valGfs >= targetAmount) {\n            achievedYear = year;\n            isAchieved = true;\n        }\n    }\n\n    // 期間内に達成する場合、グラフ期間を短縮。達成時の値を成果とする。\n    const displayYear = (isAchieved && achievedYear !== null) ? achievedYear : targetPeriod;\n\n    const chartData = (isAchieved && achievedYear !== null)\n        ? fullChartData.slice(0, achievedYear + 1)\n        : fullChartData;\n\n    // 各成果の最終値（短縮された場合は達成時、そうでなければ目標期間時）\n    const lastPoint = fullChartData[displayYear];\n\n    // Gap分析（預金 vs 目標）\n    const finalSavingsEndValue = lastPoint.savings;\n    const gap = Math.max(0, targetAmount - finalSavingsEndValue);\n    const isGapNegative = gap > 0;\n\n    return {\n        savingsEndValue: finalSavingsEndValue,\n        savingsAnnualRate: SAVINGS_ANNUAL_RATE,\n        trustEndValue: lastPoint.trust,\n        trustAnnualRate: trustAnnualRate,\n        stocksEndValue: lastPoint.stocks,\n        stocksAnnualRate: stocksAnnualRate,\n        gfsEndValue: lastPoint.gfs,\n        gfsAnnualRate: gfsAnnualRate,\n        yield30EndValue: lastPoint.yield30,\n        yield30AnnualRate: YIELD_30,\n        achievedYear,\n        isAchieved,\n        requiredAnnualRate,\n        requiredTrustAnnualRate,\n        requiredStocksAnnualRate,\n        gap: Math.round(gap),\n        isGapNegative,\n        chartData,\n        fullChartData,\n    };\n}\n\n/**\n * 金額を日本円フォーマットで表示\n */\nexport function formatCurrency(amount: number): string {\n    return new Intl.NumberFormat('ja-JP', {\n        style: 'currency',\n        currency: 'JPY',\n        maximumFractionDigits: 0,\n    }).format(amount);\n}\n\n/**\n * 金額を万円単位で表示\n */\nexport function formatManYen(amount: number): string {\n    const manYen = amount / 10000;\n    if (manYen >= 10000) {\n        return `${(manYen / 10000).toFixed(1)}億円`;\n    }\n    return `${Math.round(manYen).toLocaleString()}万円`;\n}\n\n/**\n * パーセンテージ表示\n */\nexport function formatPercent(rate: number): string {\n    return `${(rate * 100).toFixed(1)}%`;\n}\n/**\n * 金額を日本語の単位（円、千、万、億、兆、京）でフォーマット\n */\nexport function formatJapaneseAmount(amount: number): string {\n    if (amount === 0) return \"0円\";\n\n    const units = [\n        { label: \"京\", value: 1e16 },\n        { label: \"兆\", value: 1e12 },\n        { label: \"億\", value: 1e8 },\n        { label: \"万\", value: 1e4 },\n        { label: \"千\", value: 1e3 }\n    ];\n\n    let result = \"\";\n    let remaining = amount;\n\n    for (const unit of units) {\n        if (remaining >= unit.value) {\n            const count = Math.floor(remaining / unit.value);\n            result += `${count.toLocaleString()}${unit.label}`;\n            remaining %= unit.value;\n        }\n    }\n\n    if (remaining > 0 || result === \"\") {\n        result += remaining.toLocaleString();\n    }\n\n    return result + \"円\";\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/lib/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/tf-fl0243/Desktop/GFSコンサルAIスライド補完計画/src/types/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
